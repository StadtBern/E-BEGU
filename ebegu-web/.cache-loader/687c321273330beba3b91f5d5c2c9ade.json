{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/gesuch/component/erwerbspensumListView/erwerbspensumListView.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/component/erwerbspensumListView/erwerbspensumListView.ts","mtime":1512484412015},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar abstractGesuchView_1 = require(\"../abstractGesuchView\");\nvar RemoveDialogController_1 = require(\"../../dialog/RemoveDialogController\");\nvar TSWizardStepName_1 = require(\"../../../models/enums/TSWizardStepName\");\nvar TSRole_1 = require(\"../../../models/enums/TSRole\");\nvar moment = require(\"moment\");\nvar TSWizardStepStatus_1 = require(\"../../../models/enums/TSWizardStepStatus\");\nvar template = require('./erwerbspensumListView.html');\nvar removeDialogTemplate = require('../../dialog/removeDialogTemplate.html');\nrequire('./erwerbspensumListView.less');\nvar ErwerbspensumListViewComponentConfig = /** @class */ (function () {\n    function ErwerbspensumListViewComponentConfig() {\n        this.transclude = false;\n        this.bindings = {};\n        this.template = template;\n        this.controller = ErwerbspensumListViewController;\n        this.controllerAs = 'vm';\n    }\n    return ErwerbspensumListViewComponentConfig;\n}());\nexports.ErwerbspensumListViewComponentConfig = ErwerbspensumListViewComponentConfig;\nvar ErwerbspensumListViewController = /** @class */ (function (_super) {\n    __extends(ErwerbspensumListViewController, _super);\n    /* @ngInject */\n    function ErwerbspensumListViewController($state, gesuchModelManager, berechnungsManager, $log, dvDialog, errorService, wizardStepManager, $scope, authServiceRS, $timeout) {\n        var _this = _super.call(this, gesuchModelManager, berechnungsManager, wizardStepManager, $scope, TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM, $timeout) || this;\n        _this.$state = $state;\n        _this.$log = $log;\n        _this.dvDialog = dvDialog;\n        _this.errorService = errorService;\n        _this.authServiceRS = authServiceRS;\n        _this.erwerbspensenGS1 = undefined;\n        _this.initViewModel();\n        return _this;\n    }\n    ErwerbspensumListViewController.prototype.initViewModel = function () {\n        var _this = this;\n        this.gesuchModelManager.isErwerbspensumRequired(this.getGesuchId()).then(function (response) {\n            _this.erwerbspensumRequired = response;\n            if (_this.isSaveDisabled()) {\n                _this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.IN_BEARBEITUNG);\n            }\n            else {\n                _this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.OK);\n            }\n        });\n    };\n    ErwerbspensumListViewController.prototype.getErwerbspensenListGS1 = function () {\n        if (this.erwerbspensenGS1 === undefined) {\n            if (this.gesuchModelManager.getGesuch() && this.gesuchModelManager.getGesuch().gesuchsteller1 &&\n                this.gesuchModelManager.getGesuch().gesuchsteller1.erwerbspensenContainer) {\n                var gesuchsteller1 = this.gesuchModelManager.getGesuch().gesuchsteller1;\n                this.erwerbspensenGS1 = gesuchsteller1.erwerbspensenContainer;\n            }\n            else {\n                this.erwerbspensenGS1 = [];\n            }\n        }\n        return this.erwerbspensenGS1;\n    };\n    ErwerbspensumListViewController.prototype.getErwerbspensenListGS2 = function () {\n        if (this.erwerbspensenGS2 === undefined) {\n            if (this.gesuchModelManager.getGesuch() && this.gesuchModelManager.getGesuch().gesuchsteller2 &&\n                this.gesuchModelManager.getGesuch().gesuchsteller2.erwerbspensenContainer) {\n                var gesuchsteller2 = this.gesuchModelManager.getGesuch().gesuchsteller2;\n                this.erwerbspensenGS2 = gesuchsteller2.erwerbspensenContainer;\n            }\n            else {\n                this.erwerbspensenGS2 = [];\n            }\n        }\n        return this.erwerbspensenGS2;\n    };\n    ErwerbspensumListViewController.prototype.createErwerbspensum = function (gesuchstellerNumber) {\n        this.openErwerbspensumView(gesuchstellerNumber, undefined);\n    };\n    ErwerbspensumListViewController.prototype.removePensum = function (pensum, gesuchstellerNumber, element_id, index) {\n        var _this = this;\n        // Spezielle Meldung, wenn es ein GS ist, der in einer Mutation loescht\n        var gsInMutation = (this.authServiceRS.getPrincipalRole() === TSRole_1.TSRole.GESUCHSTELLER && pensum.vorgaengerId !== undefined);\n        var pensumLaufendOderVergangen = pensum.erwerbspensumJA.gueltigkeit.gueltigAb.isBefore(moment(moment.now()));\n        this.errorService.clearAll();\n        this.dvDialog.showDialog(removeDialogTemplate, RemoveDialogController_1.RemoveDialogController, {\n            deleteText: (gsInMutation && pensumLaufendOderVergangen) ? 'ERWERBSPENSUM_LOESCHEN_GS_MUTATION' : '',\n            title: 'ERWERBSPENSUM_LOESCHEN',\n            parentController: this,\n            elementID: element_id + index\n        })\n            .then(function () {\n            _this.gesuchModelManager.setGesuchstellerNumber(gesuchstellerNumber);\n            _this.gesuchModelManager.removeErwerbspensum(pensum);\n        });\n    };\n    ErwerbspensumListViewController.prototype.editPensum = function (pensum, gesuchstellerNumber) {\n        var index = this.gesuchModelManager.findIndexOfErwerbspensum(parseInt(gesuchstellerNumber), pensum);\n        this.openErwerbspensumView(gesuchstellerNumber, index);\n    };\n    ErwerbspensumListViewController.prototype.openErwerbspensumView = function (gesuchstellerNumber, erwerbspensumNum) {\n        this.$state.go('gesuch.erwerbsPensum', {\n            gesuchstellerNumber: gesuchstellerNumber,\n            erwerbspensumNum: erwerbspensumNum,\n            gesuchId: this.getGesuchId()\n        });\n    };\n    /**\n     * Gibt true zurueck wenn Erwerbspensen nicht notwendig sind oder wenn sie notwendig sind aber mindestens eines pro Gesuchsteller\n     * eingegeben wurde.\n     * @returns {boolean}\n     */\n    ErwerbspensumListViewController.prototype.isSaveDisabled = function () {\n        var erwerbspensenNumber = 0;\n        if (this.erwerbspensumRequired) {\n            if (this.getErwerbspensenListGS1() && this.getErwerbspensenListGS1().length <= 0) {\n                return true;\n            }\n            if (this.gesuchModelManager.isGesuchsteller2Required() && this.getErwerbspensenListGS2() && this.getErwerbspensenListGS2().length <= 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ErwerbspensumListViewController.prototype.setFocusBack = function (elementID) {\n        angular.element('#' + elementID).first().focus();\n    };\n    ErwerbspensumListViewController.$inject = ['$state', 'GesuchModelManager', 'BerechnungsManager', '$log', 'DvDialog',\n        'ErrorService', 'WizardStepManager', '$scope', 'AuthServiceRS', '$timeout'];\n    return ErwerbspensumListViewController;\n}(abstractGesuchView_1.default));\nexports.ErwerbspensumListViewController = ErwerbspensumListViewController;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/component/erwerbspensumListView/erwerbspensumListView.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/gesuch/component/erwerbspensumListView/erwerbspensumListView.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IComponentOptions} from 'angular';\nimport {IStateService} from 'angular-ui-router';\nimport AbstractGesuchViewController from '../abstractGesuchView';\nimport GesuchModelManager from '../../service/gesuchModelManager';\nimport TSErwerbspensumContainer from '../../../models/TSErwerbspensumContainer';\nimport {DvDialog} from '../../../core/directive/dv-dialog/dv-dialog';\nimport BerechnungsManager from '../../service/berechnungsManager';\nimport {RemoveDialogController} from '../../dialog/RemoveDialogController';\nimport ErrorService from '../../../core/errors/service/ErrorService';\nimport WizardStepManager from '../../service/wizardStepManager';\nimport {TSWizardStepName} from '../../../models/enums/TSWizardStepName';\nimport TSGesuchstellerContainer from '../../../models/TSGesuchstellerContainer';\nimport AuthServiceRS from '../../../authentication/service/AuthServiceRS.rest';\nimport {TSRole} from '../../../models/enums/TSRole';\nimport * as moment from 'moment';\nimport {IDVFocusableController} from '../../../core/component/IDVFocusableController';\nimport {TSWizardStepStatus} from '../../../models/enums/TSWizardStepStatus';\nimport ILogService = angular.ILogService;\nimport IScope = angular.IScope;\nimport ITimeoutService = angular.ITimeoutService;\n\nlet template: string = require('./erwerbspensumListView.html');\nlet removeDialogTemplate = require('../../dialog/removeDialogTemplate.html');\nrequire('./erwerbspensumListView.less');\n\nexport class ErwerbspensumListViewComponentConfig implements IComponentOptions {\n    transclude: boolean;\n    bindings: any;\n    template: string;\n    controller: any;\n    controllerAs: string;\n\n    constructor() {\n        this.transclude = false;\n        this.bindings = {};\n        this.template = template;\n        this.controller = ErwerbspensumListViewController;\n        this.controllerAs = 'vm';\n    }\n}\n\nexport class ErwerbspensumListViewController extends AbstractGesuchViewController<any> implements IDVFocusableController {\n\n    erwerbspensenGS1: Array<TSErwerbspensumContainer> = undefined;\n    erwerbspensenGS2: Array<TSErwerbspensumContainer>;\n    erwerbspensumRequired: boolean;\n\n    static $inject: string[] = ['$state', 'GesuchModelManager', 'BerechnungsManager', '$log', 'DvDialog',\n        'ErrorService', 'WizardStepManager', '$scope', 'AuthServiceRS', '$timeout'];\n\n    /* @ngInject */\n    constructor(private $state: IStateService, gesuchModelManager: GesuchModelManager, berechnungsManager: BerechnungsManager,\n                private $log: ILogService, private dvDialog: DvDialog, private errorService: ErrorService,\n                wizardStepManager: WizardStepManager, $scope: IScope, private authServiceRS: AuthServiceRS, $timeout: ITimeoutService) {\n        super(gesuchModelManager, berechnungsManager, wizardStepManager, $scope, TSWizardStepName.ERWERBSPENSUM, $timeout);\n        this.initViewModel();\n    }\n\n    private initViewModel() {\n        this.gesuchModelManager.isErwerbspensumRequired(this.getGesuchId()).then((response: boolean) => {\n            this.erwerbspensumRequired = response;\n            if (this.isSaveDisabled()) {\n                this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.IN_BEARBEITUNG);\n            } else {\n                this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.OK);\n            }\n        });\n    }\n\n    getErwerbspensenListGS1(): Array<TSErwerbspensumContainer> {\n        if (this.erwerbspensenGS1 === undefined) {\n            if (this.gesuchModelManager.getGesuch() && this.gesuchModelManager.getGesuch().gesuchsteller1 &&\n                this.gesuchModelManager.getGesuch().gesuchsteller1.erwerbspensenContainer) {\n                let gesuchsteller1: TSGesuchstellerContainer = this.gesuchModelManager.getGesuch().gesuchsteller1;\n                this.erwerbspensenGS1 = gesuchsteller1.erwerbspensenContainer;\n\n            } else {\n                this.erwerbspensenGS1 = [];\n            }\n        }\n        return this.erwerbspensenGS1;\n    }\n\n    getErwerbspensenListGS2(): Array<TSErwerbspensumContainer> {\n        if (this.erwerbspensenGS2 === undefined) {\n            if (this.gesuchModelManager.getGesuch() && this.gesuchModelManager.getGesuch().gesuchsteller2 &&\n                this.gesuchModelManager.getGesuch().gesuchsteller2.erwerbspensenContainer) {\n                let gesuchsteller2: TSGesuchstellerContainer = this.gesuchModelManager.getGesuch().gesuchsteller2;\n                this.erwerbspensenGS2 = gesuchsteller2.erwerbspensenContainer;\n\n            } else {\n                this.erwerbspensenGS2 = [];\n            }\n        }\n        return this.erwerbspensenGS2;\n\n    }\n\n    createErwerbspensum(gesuchstellerNumber: number): void {\n        this.openErwerbspensumView(gesuchstellerNumber, undefined);\n    }\n\n    removePensum(pensum: TSErwerbspensumContainer, gesuchstellerNumber: number, element_id: string, index: any): void {\n        // Spezielle Meldung, wenn es ein GS ist, der in einer Mutation loescht\n        let gsInMutation: boolean = (this.authServiceRS.getPrincipalRole() === TSRole.GESUCHSTELLER && pensum.vorgaengerId !== undefined);\n        let pensumLaufendOderVergangen: boolean = pensum.erwerbspensumJA.gueltigkeit.gueltigAb.isBefore(moment(moment.now()));\n        this.errorService.clearAll();\n        this.dvDialog.showDialog(removeDialogTemplate, RemoveDialogController, {\n            deleteText: (gsInMutation && pensumLaufendOderVergangen) ? 'ERWERBSPENSUM_LOESCHEN_GS_MUTATION' : '',\n            title: 'ERWERBSPENSUM_LOESCHEN',\n            parentController: this,\n            elementID: element_id + index\n        })\n            .then(() => {   //User confirmed removal\n                this.gesuchModelManager.setGesuchstellerNumber(gesuchstellerNumber);\n                this.gesuchModelManager.removeErwerbspensum(pensum);\n\n            });\n\n    }\n\n    editPensum(pensum: any, gesuchstellerNumber: any): void {\n        let index: number = this.gesuchModelManager.findIndexOfErwerbspensum(parseInt(gesuchstellerNumber), pensum);\n        this.openErwerbspensumView(gesuchstellerNumber, index);\n    }\n\n    private openErwerbspensumView(gesuchstellerNumber: number, erwerbspensumNum: number): void {\n        this.$state.go('gesuch.erwerbsPensum', {\n            gesuchstellerNumber: gesuchstellerNumber,\n            erwerbspensumNum: erwerbspensumNum,\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    /**\n     * Gibt true zurueck wenn Erwerbspensen nicht notwendig sind oder wenn sie notwendig sind aber mindestens eines pro Gesuchsteller\n     * eingegeben wurde.\n     * @returns {boolean}\n     */\n    public isSaveDisabled(): boolean {\n        let erwerbspensenNumber: number = 0;\n        if (this.erwerbspensumRequired) {\n            if (this.getErwerbspensenListGS1() && this.getErwerbspensenListGS1().length <= 0) {\n                return true;\n            }\n            if (this.gesuchModelManager.isGesuchsteller2Required() && this.getErwerbspensenListGS2() && this.getErwerbspensenListGS2().length <= 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public setFocusBack(elementID: string): void {\n        angular.element('#' + elementID).first().focus();\n    }\n}\n"]}]}