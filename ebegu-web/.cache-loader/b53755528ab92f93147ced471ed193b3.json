{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","mtime":1518535855212},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\ndefine([\"require\", \"exports\", \"../../../models/enums/TSWizardStepName\", \"../../../models/enums/TSWizardStepStatus\"], function (require, exports, TSWizardStepName_1, TSWizardStepStatus_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var template = require('./dv-navigation.html');\n    var style = require('./dv-navigation.less');\n    /**\n     * Diese Direktive wird benutzt, um die Navigation Buttons darzustellen. Folgende Parameter koennen benutzt werden,\n     * um die Funktionalitaet zu definieren:\n     *\n     * -- dvPrevious: function      Wenn true wird der Button \"previous\" angezeigt (nicht gleichzeitig mit dvCancel benutzen)\n     * -- dvNext: function          Wenn true wird der Button \"next\" angezeigt\n     * -- dvNextDisabled: function  Wenn man eine extra Pruefung braucht, um den Button Next zu disablen\n     * -- dvSubStep: number         Manche Steps haben sog. SubSteps (z.B. finanzielle Situation). Dieses Parameter wird benutzt,\n     *                              um zwischen SubSteps unterscheiden zu koennen\n     * -- dvSave: function          Die callback Methode, die man aufrufen muss, wenn der Button geklickt wird. Verwenden nur um die Daten zu speichern\n     * -- dvCancel: function        Die callback Methode, um alles zurueckzusetzen (nicht gleichzeitig mit dvPrevious benutzen)\n     */\n    var DVNavigation = /** @class */ (function () {\n        function DVNavigation() {\n            this.restrict = 'E';\n            this.scope = {\n                dvPrevious: '&?',\n                dvNext: '&?',\n                dvCancel: '&?',\n                dvNextDisabled: '&?',\n                dvSubStep: '<',\n                dvSave: '&?',\n                dvSavingPossible: '<?',\n                dvTranslateNext: '@',\n                dvTranslatePrevious: '@'\n            };\n            this.controller = NavigatorController;\n            this.controllerAs = 'vm';\n            this.bindToController = true;\n            this.template = template;\n        }\n        DVNavigation.factory = function () {\n            var directive = function () { return new DVNavigation(); };\n            directive.$inject = [];\n            return directive;\n        };\n        return DVNavigation;\n    }());\n    exports.DVNavigation = DVNavigation;\n    /**\n     * Direktive  der initial die smart table nach dem aktuell eingeloggtem user filtert\n     */\n    var NavigatorController = /** @class */ (function () {\n        /* @ngInject */\n        function NavigatorController(wizardStepManager, state, gesuchModelManager, $translate, errorService, $q) {\n            this.wizardStepManager = wizardStepManager;\n            this.state = state;\n            this.gesuchModelManager = gesuchModelManager;\n            this.$translate = $translate;\n            this.errorService = errorService;\n            this.$q = $q;\n            this.isRequestInProgress = false; // this semaphore will prevent a navigation button to be called again until the prozess is not finished\n        }\n        //wird von angular aufgerufen\n        NavigatorController.prototype.$onInit = function () {\n            //initial nach aktuell eingeloggtem filtern\n            this.dvSavingPossible = this.dvSavingPossible || false;\n        };\n        NavigatorController.prototype.doesCancelExist = function () {\n            return this.dvCancel !== undefined && this.dvCancel !== null;\n        };\n        NavigatorController.prototype.doesdvTranslateNextExist = function () {\n            return this.dvTranslateNext !== undefined && this.dvTranslateNext !== null;\n        };\n        /**\n         * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und weiter. Sonst nur weiter\n         * @returns {string}\n         */\n        NavigatorController.prototype.getPreviousButtonName = function () {\n            if (this.dvTranslatePrevious) {\n                return this.$translate.instant(this.dvTranslatePrevious);\n            }\n            else {\n                if (this.gesuchModelManager.isGesuchReadonly()) {\n                    return this.$translate.instant('ZURUECK_ONLY_UPPER');\n                }\n                else if (this.dvSave) {\n                    return this.$translate.instant('ZURUECK_UPPER');\n                }\n                else {\n                    return this.$translate.instant('ZURUECK_ONLY_UPPER');\n                }\n            }\n        };\n        /**\n         * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und zurueck. Sonst nur zurueck\n         * @returns {string}\n         */\n        NavigatorController.prototype.getNextButtonName = function () {\n            if (this.dvTranslateNext) {\n                return this.$translate.instant(this.dvTranslateNext);\n            }\n            else {\n                if (this.gesuchModelManager.isGesuchReadonly()) {\n                    return this.$translate.instant('WEITER_ONLY_UPPER');\n                }\n                else if (this.dvSave) {\n                    return this.$translate.instant('WEITER_UPPER');\n                }\n                else {\n                    return this.$translate.instant('WEITER_ONLY_UPPER');\n                }\n            }\n        };\n        /**\n         * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n         * als callback zum naechsten Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n         * wird dann direkt zum naechsten Step geleitet.\n         */\n        NavigatorController.prototype.nextStep = function () {\n            var _this = this;\n            if (!this.isRequestInProgress) {\n                this.isRequestInProgress = true;\n                if (this.isSavingEnabled() && this.dvSave) {\n                    var returnValue = this.dvSave(); //callback ausfuehren, could return promise\n                    if (returnValue !== undefined) {\n                        this.$q.when(returnValue).then(function () {\n                            _this.navigateToNextStep();\n                        }).finally(function () {\n                            _this.isRequestInProgress = false;\n                        });\n                    }\n                    else {\n                        this.isRequestInProgress = false;\n                    }\n                }\n                else {\n                    this.isRequestInProgress = false;\n                    this.navigateToNextStep();\n                }\n            }\n            else {\n                console.log('doubleclick suppressed'); //for testing\n            }\n        };\n        NavigatorController.prototype.isSavingEnabled = function () {\n            if (this.dvSavingPossible) {\n                return true;\n            }\n            else {\n                return !this.gesuchModelManager.isGesuchReadonly();\n            }\n        };\n        /**\n         * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n         * als callback zum vorherigen Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n         * wird dann direkt zum vorherigen Step geleitet.\n         */\n        NavigatorController.prototype.previousStep = function () {\n            var _this = this;\n            if (!this.isRequestInProgress) {\n                if (this.isSavingEnabled() && this.dvSave) {\n                    var returnValue = this.dvSave(); //callback ausfuehren, could return promise\n                    if (returnValue !== undefined) {\n                        this.$q.when(returnValue).then(function () {\n                            _this.navigateToPreviousStep();\n                        }).finally(function () {\n                            _this.isRequestInProgress = false;\n                        });\n                    }\n                    else {\n                        this.isRequestInProgress = false;\n                    }\n                }\n                else {\n                    this.isRequestInProgress = false;\n                    this.navigateToPreviousStep();\n                }\n            }\n        };\n        /**\n         * Diese Methode ist aehnlich wie previousStep() aber wird verwendet, um die Aenderungen NICHT zu speichern\n         */\n        NavigatorController.prototype.cancel = function () {\n            if (this.dvCancel) {\n                this.dvCancel();\n            }\n            this.navigateToPreviousStep();\n        };\n        /**\n         * Berechnet fuer den aktuellen Benutzer und Step, welcher der naechste Step ist und wechselt zu diesem.\n         * Bay default wird es zum nae\n         */\n        NavigatorController.prototype.navigateToNextStep = function () {\n            var _this = this;\n            this.errorService.clearAll();\n            // Improvement?: All diese Sonderregel koennten in getNextStep() vom wizardStepManager sein, damit die gleiche\n            // Funktionalität für isButtonDisable wie für die Navigation existiert.\n            if (TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n                && (this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER, '2');\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.KINDER);\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                // Diese Logik ist ziemlich kompliziert. Deswegen bleibt sie noch in betreuungView.ts -> Hier wird dann nichts gemacht\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName()) {\n                if (this.dvSubStep === 1) {\n                    this.errorService.clearAll();\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                }\n                else if (this.dvSubStep === 2) {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM);\n                }\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n                if (this.dvSubStep === 1) {\n                    if ((this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n                        this.navigateToStepFinanzielleSituation('2');\n                    }\n                    else {\n                        this.navigateToFinanziellSituationResultate();\n                    }\n                }\n                else if (this.dvSubStep === 2) {\n                    this.navigateToStepFinanzielleSituation('1');\n                }\n                else if (this.dvSubStep === 3) {\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                }\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n                if (this.dvSubStep === 1) {\n                    if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo() &&\n                        this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().einkommensverschlechterung) {\n                        if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                            if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                                this.navigateToStepEinkommensverschlechterungSteuern();\n                            }\n                            else {\n                                this.navigateToStepEinkommensverschlechterung('1', '2');\n                            }\n                        }\n                        else {\n                            if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                                this.navigateToStepEinkommensverschlechterung('1', undefined);\n                            }\n                            else {\n                                this.navigateToStepEinkommensverschlechterung('1', '2');\n                            }\n                        }\n                    }\n                    else {\n                        this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.OK).then(function () {\n                            _this.navigateToStep(_this.wizardStepManager.getNextStep(_this.gesuchModelManager.getGesuch()));\n                        });\n                    }\n                }\n                else if (this.dvSubStep === 2) {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '1');\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '2');\n                    }\n                }\n                else if (this.dvSubStep === 3) {\n                    this.navigateNextEVSubStep3();\n                }\n                else if (this.dvSubStep === 4) {\n                    this.navigateNextEVSubStep4();\n                }\n            }\n            else {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            }\n        };\n        /**\n         * Berechnet fuer den aktuellen Benutzer und Step, welcher der previous Step ist und wechselt zu diesem.\n         * wenn es kein Sonderfall ist wird der letzte else case ausgefuehrt\n         */\n        NavigatorController.prototype.navigateToPreviousStep = function () {\n            this.errorService.clearAll();\n            if (TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN === this.wizardStepManager.getCurrentStepName()) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN);\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n                && this.gesuchModelManager.getGesuchstellerNumber() === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER, '1');\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.KINDER);\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.BETREUUNG);\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM);\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n                if (this.dvSubStep === 1) {\n                    if ((this.gesuchModelManager.getGesuchstellerNumber() === 2)) {\n                        this.navigateToStepFinanzielleSituation('1');\n                    }\n                    else if (this.gesuchModelManager.getGesuchstellerNumber() === 1 && this.gesuchModelManager.isGesuchsteller2Required()) {\n                        this.navigateToStep(TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION);\n                    }\n                    else {\n                        this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                    }\n                }\n                else if (this.dvSubStep === 2) {\n                    this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                }\n                else if (this.dvSubStep === 3) {\n                    this.navigateToStepFinanzielleSituation(this.gesuchModelManager.getGesuchstellerNumber() === 2 ? '2' : '1');\n                }\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n                if (this.dvSubStep === 1) {\n                    this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                }\n                else if (this.dvSubStep === 2) {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n                else if (this.dvSubStep === 3) {\n                    this.navigatePreviousEVSubStep3();\n                }\n                else if (this.dvSubStep === 4) {\n                    this.navigatePreviousEVSubStep4();\n                }\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.VERFUEGEN === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.VERFUEGEN);\n            }\n            else {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            }\n        };\n        /**\n         * Diese Methode navigierte zum ersten substep jedes Steps. Fuer die navigation innerhalb eines Steps muss\n         * man eine extra Methode machen\n         * @param stepName\n         * @param gsNumber\n         */\n        NavigatorController.prototype.navigateToStep = function (stepName, gsNumber) {\n            var gesuchId = this.getGesuchId();\n            if (stepName === TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN) {\n                this.state.go('gesuch.fallcreation', {\n                    createNew: 'false',\n                    createMutation: 'false',\n                    eingangsart: this.gesuchModelManager.getGesuch().eingangsart,\n                    gesuchId: gesuchId,\n                    gesuchsperiodeId: this.gesuchModelManager.getGesuch().gesuchsperiode.id,\n                    fallId: this.gesuchModelManager.getGesuch().fall.id\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.FAMILIENSITUATION) {\n                this.state.go('gesuch.familiensituation', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER) {\n                this.state.go('gesuch.stammdaten', {\n                    gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.UMZUG) {\n                this.state.go('gesuch.umzug', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.KINDER) {\n                this.state.go('gesuch.kinder', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.BETREUUNG) {\n                this.state.go('gesuch.betreuungen', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.ABWESENHEIT) {\n                this.state.go('gesuch.abwesenheit', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM) {\n                this.state.go('gesuch.erwerbsPensen', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION) {\n                if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                    this.state.go('gesuch.finanzielleSituationStart', {\n                        gesuchId: this.getGesuchId()\n                    });\n                }\n                else {\n                    this.state.go('gesuch.finanzielleSituation', {\n                        gesuchstellerNumber: '1',\n                        gesuchId: this.getGesuchId()\n                    });\n                }\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG) {\n                this.state.go('gesuch.einkommensverschlechterungInfo', {\n                    gesuchId: this.getGesuchId()\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.DOKUMENTE) {\n                this.state.go('gesuch.dokumente', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.FREIGABE) {\n                this.state.go('gesuch.freigabe', {\n                    gesuchId: gesuchId\n                });\n            }\n            else if (stepName === TSWizardStepName_1.TSWizardStepName.VERFUEGEN) {\n                this.state.go('gesuch.verfuegen', {\n                    gesuchId: gesuchId\n                });\n            }\n        };\n        NavigatorController.prototype.navigateToStepEinkommensverschlechterung = function (gsNumber, basisjahrPlus) {\n            this.state.go('gesuch.einkommensverschlechterung', {\n                gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n                gesuchId: this.getGesuchId()\n            });\n        };\n        NavigatorController.prototype.navigateToFinanziellSituationResultate = function () {\n            this.state.go('gesuch.finanzielleSituationResultate', {\n                gesuchId: this.getGesuchId()\n            });\n        };\n        NavigatorController.prototype.navigateToStepEinkommensverschlechterungSteuern = function () {\n            this.state.go('gesuch.einkommensverschlechterungSteuern', {\n                gesuchId: this.getGesuchId()\n            });\n        };\n        NavigatorController.prototype.navigateToStepEinkommensverschlechterungResultate = function (basisjahrPlus) {\n            this.state.go('gesuch.einkommensverschlechterungResultate', {\n                basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n                gesuchId: this.getGesuchId()\n            });\n        };\n        NavigatorController.prototype.navigateToStepFinanzielleSituation = function (gsNumber) {\n            this.state.go('gesuch.finanzielleSituation', {\n                gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                gesuchId: this.getGesuchId()\n            });\n        };\n        NavigatorController.prototype.getGesuchId = function () {\n            if (this.gesuchModelManager && this.gesuchModelManager.getGesuch()) {\n                return this.gesuchModelManager.getGesuch().id;\n            }\n            return '';\n        };\n        /**\n         * Checks whether the button should be disable for the current conditions. By default (auch fuer Mutaionen) enabled\n         * @returns {boolean}\n         */\n        NavigatorController.prototype.isNextButtonDisabled = function () {\n            //if step is disabled in manager we can stop here\n            if (!this.wizardStepManager.isNextStepEnabled(this.gesuchModelManager.getGesuch())) {\n                return true;\n            }\n            // otherwise check specifics\n            if (this.gesuchModelManager.isGesuch()) {\n                if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return !this.gesuchModelManager.isThereAnyKindWithBetreuungsbedarf()\n                        && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n                }\n                if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return !this.gesuchModelManager.getGesuch().isThereAnyBetreuung()\n                        && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n                }\n                if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return this.dvNextDisabled() && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n                }\n            }\n            return false;\n        };\n        NavigatorController.prototype.getTooltip = function () {\n            if (this.isNextButtonDisabled()) {\n                if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return this.$translate.instant('KINDER_TOOLTIP_REQUIRED');\n                }\n                else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return this.$translate.instant('BETREUUNG_TOOLTIP_REQUIRED');\n                }\n                else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                    return this.$translate.instant('ERWERBSPENSUM_TOOLTIP_REQUIRED');\n                }\n            }\n            return undefined;\n        };\n        NavigatorController.prototype.navigateNextEVSubStep3 = function () {\n            if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n                if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('2', '1');\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '2');\n                    }\n                    else {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    }\n                }\n                else {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '2'); // gehe ekv 1/2\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('2', '2'); // gehe ekv 2/2\n                    }\n                    else {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    }\n                }\n            }\n            else {\n                if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('2', '2');\n                    }\n                    else {\n                        if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                            this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                        }\n                        else {\n                            this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                        }\n                    }\n                }\n                else {\n                    if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    }\n                    else {\n                        this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                    }\n                }\n            }\n        };\n        NavigatorController.prototype.navigatePreviousEVSubStep3 = function () {\n            if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n                if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                    if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                        this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                        this.navigateToStepEinkommensverschlechterungSteuern();\n                    }\n                    else {\n                        this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                    }\n                }\n                else {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                    }\n                    else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                        this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                        this.navigateToStepEinkommensverschlechterungSteuern();\n                    }\n                    else {\n                        this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                    }\n                }\n            }\n            else {\n                if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('2', '1');\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                    }\n                    else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                        this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                        this.navigateToStepEinkommensverschlechterungSteuern();\n                    }\n                    else {\n                        this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                    }\n                }\n                else {\n                    if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '2');\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('2', '1');\n                    }\n                    else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                        this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                    }\n                    else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                        this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                        this.navigateToStepEinkommensverschlechterungSteuern();\n                    }\n                    else {\n                        this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                    }\n                }\n            }\n        };\n        ;\n        NavigatorController.prototype.navigatePreviousEVSubStep4 = function () {\n            if (this.gesuchModelManager.getBasisJahrPlusNumber() === 2) {\n                // baisjahrPlus2\n                if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                }\n                else {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                }\n            }\n            else {\n                // baisjahrPlus1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                }\n                else {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                }\n            }\n        };\n        ;\n        NavigatorController.prototype.navigateNextEVSubStep4 = function () {\n            var _this = this;\n            if (this.gesuchModelManager.getBasisJahrPlusNumber() === 1\n                && this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus2 === true) {\n                this.navigateToStepEinkommensverschlechterungResultate('2');\n            }\n            else {\n                this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.OK).then(function () {\n                    _this.navigateToStep(_this.wizardStepManager.getNextStep(_this.gesuchModelManager.getGesuch()));\n                });\n            }\n        };\n        ;\n        NavigatorController.$inject = ['WizardStepManager', '$state', 'GesuchModelManager', '$translate', 'ErrorService', '$q'];\n        return NavigatorController;\n    }());\n    exports.NavigatorController = NavigatorController;\n});\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IDirective, IDirectiveFactory, IQService} from 'angular';\nimport {IStateService} from 'angular-ui-router';\nimport WizardStepManager from '../../../gesuch/service/wizardStepManager';\nimport {TSWizardStepName} from '../../../models/enums/TSWizardStepName';\nimport GesuchModelManager from '../../../gesuch/service/gesuchModelManager';\nimport ErrorService from '../../errors/service/ErrorService';\nimport {TSWizardStepStatus} from '../../../models/enums/TSWizardStepStatus';\nimport ITranslateService = angular.translate.ITranslateService;\nlet template = require('./dv-navigation.html');\nlet style = require('./dv-navigation.less');\n\n\n/**\n * Diese Direktive wird benutzt, um die Navigation Buttons darzustellen. Folgende Parameter koennen benutzt werden,\n * um die Funktionalitaet zu definieren:\n *\n * -- dvPrevious: function      Wenn true wird der Button \"previous\" angezeigt (nicht gleichzeitig mit dvCancel benutzen)\n * -- dvNext: function          Wenn true wird der Button \"next\" angezeigt\n * -- dvNextDisabled: function  Wenn man eine extra Pruefung braucht, um den Button Next zu disablen\n * -- dvSubStep: number         Manche Steps haben sog. SubSteps (z.B. finanzielle Situation). Dieses Parameter wird benutzt,\n *                              um zwischen SubSteps unterscheiden zu koennen\n * -- dvSave: function          Die callback Methode, die man aufrufen muss, wenn der Button geklickt wird. Verwenden nur um die Daten zu speichern\n * -- dvCancel: function        Die callback Methode, um alles zurueckzusetzen (nicht gleichzeitig mit dvPrevious benutzen)\n */\nexport class DVNavigation implements IDirective {\n    restrict = 'E';\n    scope = {\n        dvPrevious: '&?',\n        dvNext: '&?',\n        dvCancel: '&?',\n        dvNextDisabled: '&?',\n        dvSubStep: '<',\n        dvSave: '&?',\n        dvSavingPossible: '<?',\n        dvTranslateNext: '@',\n        dvTranslatePrevious: '@'\n    };\n    controller = NavigatorController;\n    controllerAs = 'vm';\n    bindToController = true;\n    template = template;\n\n    static factory(): IDirectiveFactory {\n        const directive = () => new DVNavigation();\n        directive.$inject = [];\n        return directive;\n    }\n}\n/**\n * Direktive  der initial die smart table nach dem aktuell eingeloggtem user filtert\n */\nexport class NavigatorController {\n\n    dvPrevious: () => any;\n    dvNext: () => any;\n    dvSave: () => any;\n    dvCancel: () => any;\n    dvNextDisabled: () => any;\n    dvSavingPossible: boolean;\n    dvSubStep: number;\n    dvTranslateNext: string;\n    dvTranslatePrevious: string;\n    isRequestInProgress: boolean = false; // this semaphore will prevent a navigation button to be called again until the prozess is not finished\n\n    performSave: boolean;\n\n    static $inject: string[] = ['WizardStepManager', '$state', 'GesuchModelManager', '$translate', 'ErrorService', '$q'];\n    /* @ngInject */\n    constructor(private wizardStepManager: WizardStepManager, private state: IStateService, private gesuchModelManager: GesuchModelManager,\n                private $translate: ITranslateService, private errorService: ErrorService, private $q: IQService) {\n    }\n\n    //wird von angular aufgerufen\n    $onInit() {\n        //initial nach aktuell eingeloggtem filtern\n        this.dvSavingPossible = this.dvSavingPossible || false;\n\n    }\n\n\n    public doesCancelExist(): boolean {\n        return this.dvCancel !== undefined && this.dvCancel !== null;\n    }\n\n    public doesdvTranslateNextExist(): boolean {\n        return this.dvTranslateNext !== undefined && this.dvTranslateNext !== null;\n    }\n\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und weiter. Sonst nur weiter\n     * @returns {string}\n     */\n    public getPreviousButtonName(): string {\n        if (this.dvTranslatePrevious) {\n            return this.$translate.instant(this.dvTranslatePrevious);\n        } else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            } else if (this.dvSave) {\n                return this.$translate.instant('ZURUECK_UPPER');\n            } else {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            }\n        }\n    }\n\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und zurueck. Sonst nur zurueck\n     * @returns {string}\n     */\n    public getNextButtonName(): string {\n        if (this.dvTranslateNext) {\n            return this.$translate.instant(this.dvTranslateNext);\n        } else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            } else if (this.dvSave) {\n                return this.$translate.instant('WEITER_UPPER');\n            } else {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            }\n        }\n    }\n\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum naechsten Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum naechsten Step geleitet.\n     */\n    public nextStep(): void {\n        if (!this.isRequestInProgress) { //do nothing if we are already saving\n            this.isRequestInProgress = true;\n            if (this.isSavingEnabled() && this.dvSave) {\n                let returnValue: any = this.dvSave();  //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(() => {\n                        this.navigateToNextStep();\n                    }).finally(() => {\n                        this.isRequestInProgress = false;\n                    });\n                } else {\n                    this.isRequestInProgress = false;\n                }\n            } else {\n                this.isRequestInProgress = false;\n                this.navigateToNextStep();\n            }\n        } else {\n            console.log('doubleclick suppressed'); //for testing\n        }\n    }\n\n    private isSavingEnabled(): boolean {\n        if (this.dvSavingPossible) {\n            return true;\n        } else {\n            return !this.gesuchModelManager.isGesuchReadonly();\n        }\n    }\n\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum vorherigen Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum vorherigen Step geleitet.\n     */\n    public previousStep(): void {\n        if (!this.isRequestInProgress) { //do nothing if we are already saving\n            if (this.isSavingEnabled() && this.dvSave) {\n                let returnValue: any = this.dvSave();  //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(() => {\n                        this.navigateToPreviousStep();\n                    }).finally(() => {\n                        this.isRequestInProgress = false;\n                    });\n                } else {\n                    this.isRequestInProgress = false;\n                }\n            } else {\n                this.isRequestInProgress = false;\n                this.navigateToPreviousStep();\n            }\n        }\n    }\n\n    /**\n     * Diese Methode ist aehnlich wie previousStep() aber wird verwendet, um die Aenderungen NICHT zu speichern\n     */\n    public cancel(): void {\n        if (this.dvCancel) {\n            this.dvCancel();\n        }\n        this.navigateToPreviousStep();\n    }\n\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der naechste Step ist und wechselt zu diesem.\n     * Bay default wird es zum nae\n     */\n    private navigateToNextStep() {\n\n        this.errorService.clearAll();\n\n        // Improvement?: All diese Sonderregel koennten in getNextStep() vom wizardStepManager sein, damit die gleiche\n        // Funktionalität für isButtonDisable wie für die Navigation existiert.\n        if (TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && (this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n            this.navigateToStep(TSWizardStepName.GESUCHSTELLER, '2');\n\n        } else if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.KINDER);\n\n        } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            // Diese Logik ist ziemlich kompliziert. Deswegen bleibt sie noch in betreuungView.ts -> Hier wird dann nichts gemacht\n\n        } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.errorService.clearAll();\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName.ERWERBSPENSUM);\n            }\n\n        } else if (TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if ((this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n                    this.navigateToStepFinanzielleSituation('2');\n                } else {\n                    this.navigateToFinanziellSituationResultate();\n                }\n\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStepFinanzielleSituation('1');\n\n            } else if (this.dvSubStep === 3) {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            }\n\n        } else if (TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().einkommensverschlechterung) { // was muss hier sein?\n                    if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterungSteuern();\n                        } else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    } else {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterung('1', undefined);\n                        } else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    }\n                } else {\n                    this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.OK).then(() => {\n                        this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                    });\n                }\n\n            } else if (this.dvSubStep === 2) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n            } else if (this.dvSubStep === 3) {\n                this.navigateNextEVSubStep3();\n\n            } else if (this.dvSubStep === 4) {\n                this.navigateNextEVSubStep4();\n            }\n\n        } else { //by default navigieren wir zum naechsten erlaubten Step\n            this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n        }\n    }\n\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der previous Step ist und wechselt zu diesem.\n     * wenn es kein Sonderfall ist wird der letzte else case ausgefuehrt\n     */\n    private navigateToPreviousStep() {\n\n        this.errorService.clearAll();\n        if (TSWizardStepName.GESUCH_ERSTELLEN === this.wizardStepManager.getCurrentStepName()) {\n            this.navigateToStep(TSWizardStepName.GESUCH_ERSTELLEN);\n\n        } else if (TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && this.gesuchModelManager.getGesuchstellerNumber() === 2) {\n\n            this.navigateToStep(TSWizardStepName.GESUCHSTELLER, '1');\n\n        } else if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.KINDER);\n\n        } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.BETREUUNG);\n\n        } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.ERWERBSPENSUM);\n\n        } else if (TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if ((this.gesuchModelManager.getGesuchstellerNumber() === 2)) {\n                    this.navigateToStepFinanzielleSituation('1');\n\n                } else if (this.gesuchModelManager.getGesuchstellerNumber() === 1 && this.gesuchModelManager.isGesuchsteller2Required()) {\n                    this.navigateToStep(TSWizardStepName.FINANZIELLE_SITUATION);\n                } else {\n                    this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                }\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            } else if (this.dvSubStep === 3) {\n                this.navigateToStepFinanzielleSituation(this.gesuchModelManager.getGesuchstellerNumber() === 2 ? '2' : '1');\n            }\n\n        } else if (TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n            } else if (this.dvSubStep === 3) {\n                this.navigatePreviousEVSubStep3();\n            } else if (this.dvSubStep === 4) {\n                this.navigatePreviousEVSubStep4();\n            }\n\n        } else if (TSWizardStepName.VERFUEGEN === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.VERFUEGEN);\n\n        } else {\n            this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n        }\n    }\n\n    /**\n     * Diese Methode navigierte zum ersten substep jedes Steps. Fuer die navigation innerhalb eines Steps muss\n     * man eine extra Methode machen\n     * @param stepName\n     * @param gsNumber\n     */\n    private navigateToStep(stepName: TSWizardStepName, gsNumber?: string) {\n        let gesuchId = this.getGesuchId();\n\n        if (stepName === TSWizardStepName.GESUCH_ERSTELLEN) {\n            this.state.go('gesuch.fallcreation', {\n                createNew: 'false',\n                createMutation: 'false',\n                eingangsart: this.gesuchModelManager.getGesuch().eingangsart,\n                gesuchId: gesuchId,\n                gesuchsperiodeId: this.gesuchModelManager.getGesuch().gesuchsperiode.id,\n                fallId: this.gesuchModelManager.getGesuch().fall.id\n            });\n\n        } else if (stepName === TSWizardStepName.FAMILIENSITUATION) {\n            this.state.go('gesuch.familiensituation', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.GESUCHSTELLER) {\n            this.state.go('gesuch.stammdaten', {\n                gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.UMZUG) {\n            this.state.go('gesuch.umzug', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.KINDER) {\n            this.state.go('gesuch.kinder', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.BETREUUNG) {\n            this.state.go('gesuch.betreuungen', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.ABWESENHEIT) {\n            this.state.go('gesuch.abwesenheit', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.ERWERBSPENSUM) {\n            this.state.go('gesuch.erwerbsPensen', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.FINANZIELLE_SITUATION) {\n            if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                this.state.go('gesuch.finanzielleSituationStart', {\n                    gesuchId: this.getGesuchId()\n                });\n            } else {\n                this.state.go('gesuch.finanzielleSituation', {\n                    gesuchstellerNumber: '1',\n                    gesuchId: this.getGesuchId()\n                });\n            }\n\n        } else if (stepName === TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG) {\n            this.state.go('gesuch.einkommensverschlechterungInfo', {\n                gesuchId: this.getGesuchId()\n            });\n\n        } else if (stepName === TSWizardStepName.DOKUMENTE) {\n            this.state.go('gesuch.dokumente', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.FREIGABE) {\n            this.state.go('gesuch.freigabe', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.VERFUEGEN) {\n            this.state.go('gesuch.verfuegen', {\n                gesuchId: gesuchId\n            });\n\n        }\n    }\n\n    private navigateToStepEinkommensverschlechterung(gsNumber: string, basisjahrPlus: string) {\n        this.state.go('gesuch.einkommensverschlechterung', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToFinanziellSituationResultate() {\n        this.state.go('gesuch.finanzielleSituationResultate', {\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepEinkommensverschlechterungSteuern() {\n        this.state.go('gesuch.einkommensverschlechterungSteuern', {\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepEinkommensverschlechterungResultate(basisjahrPlus: string) {\n        this.state.go('gesuch.einkommensverschlechterungResultate', {\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepFinanzielleSituation(gsNumber: string) {\n        this.state.go('gesuch.finanzielleSituation', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private getGesuchId(): string {\n        if (this.gesuchModelManager && this.gesuchModelManager.getGesuch()) {\n            return this.gesuchModelManager.getGesuch().id;\n        }\n        return '';\n    }\n\n    /**\n     * Checks whether the button should be disable for the current conditions. By default (auch fuer Mutaionen) enabled\n     * @returns {boolean}\n     */\n    public isNextButtonDisabled(): boolean {\n        //if step is disabled in manager we can stop here\n        if (!this.wizardStepManager.isNextStepEnabled(this.gesuchModelManager.getGesuch())) {\n            return true;\n        }\n        // otherwise check specifics\n        if (this.gesuchModelManager.isGesuch()) {\n            if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.isThereAnyKindWithBetreuungsbedarf()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.getGesuch().isThereAnyBetreuung()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.dvNextDisabled() && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n        }\n\n        return false;\n    }\n\n    public getTooltip(): string {\n        if (this.isNextButtonDisabled()) {\n            if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('KINDER_TOOLTIP_REQUIRED');\n\n            } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('BETREUUNG_TOOLTIP_REQUIRED');\n\n            } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('ERWERBSPENSUM_TOOLTIP_REQUIRED');\n            }\n        }\n        return undefined;\n    }\n\n    private navigateNextEVSubStep3(): void {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            } else { // ist Zustand 2/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2'); // gehe ekv 1/2\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2'); // gehe ekv 2/2\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            }\n        } else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '2');\n                } else {\n                    if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    } else {\n                        this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                    }\n                }\n            } else { // ist Zustand 2/2\n                if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                }\n            }\n        }\n    }\n\n\n    private navigatePreviousEVSubStep3(): void {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/1\n                if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            } else { // ist Zustand 2/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        } else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            } else { // ist Zustand 2/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        }\n    };\n\n    private navigatePreviousEVSubStep4(): void {\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 2) {\n            // baisjahrPlus2\n            if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            } else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        } else {\n            // baisjahrPlus1\n            if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            } else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        }\n    };\n\n    private navigateNextEVSubStep4(): void {\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 1\n            && this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus2 === true) {\n            this.navigateToStepEinkommensverschlechterungResultate('2');\n        } else {\n            this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.OK).then(() => {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            });\n        }\n    };\n\n}\n"]}]}