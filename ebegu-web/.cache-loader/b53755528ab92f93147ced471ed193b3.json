{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","mtime":1518612532790},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TSWizardStepName_1 = require(\"../../../models/enums/TSWizardStepName\");\nvar TSWizardStepStatus_1 = require(\"../../../models/enums/TSWizardStepStatus\");\nvar template = require('./dv-navigation.html');\nvar style = require('./dv-navigation.less');\n/**\n * Diese Direktive wird benutzt, um die Navigation Buttons darzustellen. Folgende Parameter koennen benutzt werden,\n * um die Funktionalitaet zu definieren:\n *\n * -- dvPrevious: function      Wenn true wird der Button \"previous\" angezeigt (nicht gleichzeitig mit dvCancel benutzen)\n * -- dvNext: function          Wenn true wird der Button \"next\" angezeigt\n * -- dvNextDisabled: function  Wenn man eine extra Pruefung braucht, um den Button Next zu disablen\n * -- dvSubStep: number         Manche Steps haben sog. SubSteps (z.B. finanzielle Situation). Dieses Parameter wird benutzt,\n *                              um zwischen SubSteps unterscheiden zu koennen\n * -- dvSave: function          Die callback Methode, die man aufrufen muss, wenn der Button geklickt wird. Verwenden nur um die Daten zu speichern\n * -- dvCancel: function        Die callback Methode, um alles zurueckzusetzen (nicht gleichzeitig mit dvPrevious benutzen)\n */\nvar DVNavigation = /** @class */ (function () {\n    function DVNavigation() {\n        this.restrict = 'E';\n        this.scope = {\n            dvPrevious: '&?',\n            dvNext: '&?',\n            dvCancel: '&?',\n            dvNextDisabled: '&?',\n            dvSubStep: '<',\n            dvSave: '&?',\n            dvSavingPossible: '<?',\n            dvTranslateNext: '@',\n            dvTranslatePrevious: '@'\n        };\n        this.controller = NavigatorController;\n        this.controllerAs = 'vm';\n        this.bindToController = true;\n        this.template = template;\n    }\n    DVNavigation.factory = function () {\n        var directive = function () { return new DVNavigation(); };\n        directive.$inject = [];\n        return directive;\n    };\n    return DVNavigation;\n}());\nexports.DVNavigation = DVNavigation;\n/**\n * Direktive  der initial die smart table nach dem aktuell eingeloggtem user filtert\n */\nvar NavigatorController = /** @class */ (function () {\n    /* @ngInject */\n    function NavigatorController(wizardStepManager, state, gesuchModelManager, $translate, errorService, $q) {\n        this.wizardStepManager = wizardStepManager;\n        this.state = state;\n        this.gesuchModelManager = gesuchModelManager;\n        this.$translate = $translate;\n        this.errorService = errorService;\n        this.$q = $q;\n        this.isRequestInProgress = false; // this semaphore will prevent a navigation button to be called again until the prozess is not finished\n    }\n    //wird von angular aufgerufen\n    NavigatorController.prototype.$onInit = function () {\n        //initial nach aktuell eingeloggtem filtern\n        this.dvSavingPossible = this.dvSavingPossible || false;\n    };\n    NavigatorController.prototype.doesCancelExist = function () {\n        return this.dvCancel !== undefined && this.dvCancel !== null;\n    };\n    NavigatorController.prototype.doesdvTranslateNextExist = function () {\n        return this.dvTranslateNext !== undefined && this.dvTranslateNext !== null;\n    };\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und weiter. Sonst nur weiter\n     * @returns {string}\n     */\n    NavigatorController.prototype.getPreviousButtonName = function () {\n        if (this.dvTranslatePrevious) {\n            return this.$translate.instant(this.dvTranslatePrevious);\n        }\n        else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            }\n            else if (this.dvSave) {\n                return this.$translate.instant('ZURUECK_UPPER');\n            }\n            else {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            }\n        }\n    };\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und zurueck. Sonst nur zurueck\n     * @returns {string}\n     */\n    NavigatorController.prototype.getNextButtonName = function () {\n        if (this.dvTranslateNext) {\n            return this.$translate.instant(this.dvTranslateNext);\n        }\n        else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            }\n            else if (this.dvSave) {\n                return this.$translate.instant('WEITER_UPPER');\n            }\n            else {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            }\n        }\n    };\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum naechsten Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum naechsten Step geleitet.\n     */\n    NavigatorController.prototype.nextStep = function () {\n        var _this = this;\n        if (!this.isRequestInProgress) {\n            this.isRequestInProgress = true;\n            if (this.isSavingEnabled() && this.dvSave) {\n                var returnValue = this.dvSave(); //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(function () {\n                        _this.navigateToNextStep();\n                    }).finally(function () {\n                        _this.isRequestInProgress = false;\n                    });\n                }\n                else {\n                    this.isRequestInProgress = false;\n                }\n            }\n            else {\n                this.isRequestInProgress = false;\n                this.navigateToNextStep();\n            }\n        }\n        else {\n            console.log('doubleclick suppressed'); //for testing\n        }\n    };\n    NavigatorController.prototype.isSavingEnabled = function () {\n        if (this.dvSavingPossible) {\n            return true;\n        }\n        else {\n            return !this.gesuchModelManager.isGesuchReadonly();\n        }\n    };\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum vorherigen Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum vorherigen Step geleitet.\n     */\n    NavigatorController.prototype.previousStep = function () {\n        var _this = this;\n        if (!this.isRequestInProgress) {\n            if (this.isSavingEnabled() && this.dvSave) {\n                var returnValue = this.dvSave(); //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(function () {\n                        _this.navigateToPreviousStep();\n                    }).finally(function () {\n                        _this.isRequestInProgress = false;\n                    });\n                }\n                else {\n                    this.isRequestInProgress = false;\n                }\n            }\n            else {\n                this.isRequestInProgress = false;\n                this.navigateToPreviousStep();\n            }\n        }\n    };\n    /**\n     * Diese Methode ist aehnlich wie previousStep() aber wird verwendet, um die Aenderungen NICHT zu speichern\n     */\n    NavigatorController.prototype.cancel = function () {\n        if (this.dvCancel) {\n            this.dvCancel();\n        }\n        this.navigateToPreviousStep();\n    };\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der naechste Step ist und wechselt zu diesem.\n     * Bay default wird es zum nae\n     */\n    NavigatorController.prototype.navigateToNextStep = function () {\n        var _this = this;\n        this.errorService.clearAll();\n        // Improvement?: All diese Sonderregel koennten in getNextStep() vom wizardStepManager sein, damit die gleiche\n        // Funktionalität für isButtonDisable wie für die Navigation existiert.\n        if (TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && (this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER, '2');\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.KINDER);\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            // Diese Logik ist ziemlich kompliziert. Deswegen bleibt sie noch in betreuungView.ts -> Hier wird dann nichts gemacht\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.errorService.clearAll();\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            }\n            else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM);\n            }\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                // noinspection NegatedIfStatementJS - the other way makes no sense\n                if (!this.gesuchModelManager.isFinanzielleSituationDesired()) {\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                }\n                else if ((this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n                    this.navigateToStepFinanzielleSituation('2');\n                }\n                else {\n                    this.navigateToFinanziellSituationResultate();\n                }\n            }\n            else if (this.dvSubStep === 2) {\n                // noinspection NegatedIfStatementJS - the other way makes no sense\n                if (!this.gesuchModelManager.isFinanzielleSituationEnabled() || !this.gesuchModelManager.isFinanzielleSituationDesired()) {\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                }\n                else {\n                    this.navigateToStepFinanzielleSituation('1');\n                }\n            }\n            else if (this.dvSubStep === 3) {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            }\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().einkommensverschlechterung) {\n                    if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterungSteuern();\n                        }\n                        else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    }\n                    else {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterung('1', undefined);\n                        }\n                        else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    }\n                }\n                else {\n                    this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.OK).then(function () {\n                        _this.navigateToStep(_this.wizardStepManager.getNextStep(_this.gesuchModelManager.getGesuch()));\n                    });\n                }\n            }\n            else if (this.dvSubStep === 2) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n            }\n            else if (this.dvSubStep === 3) {\n                this.navigateNextEVSubStep3();\n            }\n            else if (this.dvSubStep === 4) {\n                this.navigateNextEVSubStep4();\n            }\n        }\n        else {\n            this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n        }\n    };\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der previous Step ist und wechselt zu diesem.\n     * wenn es kein Sonderfall ist wird der letzte else case ausgefuehrt\n     */\n    NavigatorController.prototype.navigateToPreviousStep = function () {\n        this.errorService.clearAll();\n        if (TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN === this.wizardStepManager.getCurrentStepName()) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN);\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && this.gesuchModelManager.getGesuchstellerNumber() === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER, '1');\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.KINDER);\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.BETREUUNG);\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM);\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if ((this.gesuchModelManager.getGesuchstellerNumber() === 2)) {\n                    this.navigateToStepFinanzielleSituation('1');\n                }\n                else if (this.gesuchModelManager.getGesuchstellerNumber() === 1 && (this.gesuchModelManager.isGesuchsteller2Required()\n                    || (this.gesuchModelManager.getGesuchsperiode().hasTagesschulenAnmeldung() && this.gesuchModelManager.areThereOnlySchulamtAngebote()))) {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION);\n                }\n                else {\n                    this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                }\n            }\n            else if (this.dvSubStep === 2) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            }\n            else if (this.dvSubStep === 3) {\n                this.navigateToStepFinanzielleSituation(this.gesuchModelManager.getGesuchstellerNumber() === 2 ? '2' : '1');\n            }\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            }\n            else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n            }\n            else if (this.dvSubStep === 3) {\n                this.navigatePreviousEVSubStep3();\n            }\n            else if (this.dvSubStep === 4) {\n                this.navigatePreviousEVSubStep4();\n            }\n        }\n        else if (TSWizardStepName_1.TSWizardStepName.VERFUEGEN === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName_1.TSWizardStepName.VERFUEGEN);\n        }\n        else {\n            this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n        }\n    };\n    /**\n     * Diese Methode navigierte zum ersten substep jedes Steps. Fuer die navigation innerhalb eines Steps muss\n     * man eine extra Methode machen\n     * @param stepName\n     * @param gsNumber\n     */\n    NavigatorController.prototype.navigateToStep = function (stepName, gsNumber) {\n        var gesuchId = this.getGesuchId();\n        if (stepName === TSWizardStepName_1.TSWizardStepName.GESUCH_ERSTELLEN) {\n            this.state.go('gesuch.fallcreation', {\n                createNew: 'false',\n                createMutation: 'false',\n                eingangsart: this.gesuchModelManager.getGesuch().eingangsart,\n                gesuchId: gesuchId,\n                gesuchsperiodeId: this.gesuchModelManager.getGesuch().gesuchsperiode.id,\n                fallId: this.gesuchModelManager.getGesuch().fall.id\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.FAMILIENSITUATION) {\n            this.state.go('gesuch.familiensituation', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.GESUCHSTELLER) {\n            this.state.go('gesuch.stammdaten', {\n                gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.UMZUG) {\n            this.state.go('gesuch.umzug', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.KINDER) {\n            this.state.go('gesuch.kinder', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.BETREUUNG) {\n            this.state.go('gesuch.betreuungen', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.ABWESENHEIT) {\n            this.state.go('gesuch.abwesenheit', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM) {\n            this.state.go('gesuch.erwerbsPensen', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.FINANZIELLE_SITUATION) {\n            if (this.gesuchModelManager.showFinanzielleSituationStart()) {\n                this.state.go('gesuch.finanzielleSituationStart', {\n                    gesuchId: this.getGesuchId()\n                });\n            }\n            else {\n                this.state.go('gesuch.finanzielleSituation', {\n                    gesuchstellerNumber: '1',\n                    gesuchId: this.getGesuchId()\n                });\n            }\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG) {\n            this.state.go('gesuch.einkommensverschlechterungInfo', {\n                gesuchId: this.getGesuchId()\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.DOKUMENTE) {\n            this.state.go('gesuch.dokumente', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.FREIGABE) {\n            this.state.go('gesuch.freigabe', {\n                gesuchId: gesuchId\n            });\n        }\n        else if (stepName === TSWizardStepName_1.TSWizardStepName.VERFUEGEN) {\n            this.state.go('gesuch.verfuegen', {\n                gesuchId: gesuchId\n            });\n        }\n    };\n    NavigatorController.prototype.navigateToStepEinkommensverschlechterung = function (gsNumber, basisjahrPlus) {\n        this.state.go('gesuch.einkommensverschlechterung', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    };\n    NavigatorController.prototype.navigateToFinanziellSituationResultate = function () {\n        this.state.go('gesuch.finanzielleSituationResultate', {\n            gesuchId: this.getGesuchId()\n        });\n    };\n    NavigatorController.prototype.navigateToStepEinkommensverschlechterungSteuern = function () {\n        this.state.go('gesuch.einkommensverschlechterungSteuern', {\n            gesuchId: this.getGesuchId()\n        });\n    };\n    NavigatorController.prototype.navigateToStepEinkommensverschlechterungResultate = function (basisjahrPlus) {\n        this.state.go('gesuch.einkommensverschlechterungResultate', {\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    };\n    NavigatorController.prototype.navigateToStepFinanzielleSituation = function (gsNumber) {\n        this.state.go('gesuch.finanzielleSituation', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            gesuchId: this.getGesuchId()\n        });\n    };\n    NavigatorController.prototype.getGesuchId = function () {\n        if (this.gesuchModelManager && this.gesuchModelManager.getGesuch()) {\n            return this.gesuchModelManager.getGesuch().id;\n        }\n        return '';\n    };\n    /**\n     * Checks whether the button should be disable for the current conditions. By default (auch fuer Mutaionen) enabled\n     * @returns {boolean}\n     */\n    NavigatorController.prototype.isNextButtonDisabled = function () {\n        //if step is disabled in manager we can stop here\n        if (!this.wizardStepManager.isNextStepEnabled(this.gesuchModelManager.getGesuch())) {\n            return true;\n        }\n        // otherwise check specifics\n        if (this.gesuchModelManager.isGesuch()) {\n            if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.isThereAnyKindWithBetreuungsbedarf()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.getGesuch().isThereAnyBetreuung()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.dvNextDisabled() && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n        }\n        return false;\n    };\n    NavigatorController.prototype.getTooltip = function () {\n        if (this.isNextButtonDisabled()) {\n            if (TSWizardStepName_1.TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('KINDER_TOOLTIP_REQUIRED');\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('BETREUUNG_TOOLTIP_REQUIRED');\n            }\n            else if (TSWizardStepName_1.TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('ERWERBSPENSUM_TOOLTIP_REQUIRED');\n            }\n        }\n        return undefined;\n    };\n    NavigatorController.prototype.navigateNextEVSubStep3 = function () {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n                else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            }\n            else {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2'); // gehe ekv 1/2\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2'); // gehe ekv 2/2\n                }\n                else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            }\n        }\n        else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2');\n                }\n                else {\n                    if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    }\n                    else {\n                        this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                    }\n                }\n            }\n            else {\n                if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n                else {\n                    this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                }\n            }\n        }\n    };\n    NavigatorController.prototype.navigatePreviousEVSubStep3 = function () {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                }\n                else {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n            else {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                }\n                else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                }\n                else {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        }\n        else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                }\n                else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                }\n                else {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n            else {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                }\n                else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                }\n                else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                }\n                else {\n                    this.navigateToStep(TSWizardStepName_1.TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        }\n    };\n    NavigatorController.prototype.navigatePreviousEVSubStep4 = function () {\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 2) {\n            // baisjahrPlus2\n            if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n            }\n            else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            }\n            else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            }\n            else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            }\n            else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        }\n        else {\n            // baisjahrPlus1\n            if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            }\n            else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            }\n            else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) {\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            }\n            else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        }\n    };\n    NavigatorController.prototype.navigateNextEVSubStep4 = function () {\n        var _this = this;\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 1\n            && this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus2 === true) {\n            this.navigateToStepEinkommensverschlechterungResultate('2');\n        }\n        else {\n            this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus_1.TSWizardStepStatus.OK).then(function () {\n                _this.navigateToStep(_this.wizardStepManager.getNextStep(_this.gesuchModelManager.getGesuch()));\n            });\n        }\n    };\n    NavigatorController.$inject = ['WizardStepManager', '$state', 'GesuchModelManager', '$translate', 'ErrorService', '$q'];\n    return NavigatorController;\n}());\nexports.NavigatorController = NavigatorController;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-navigation/dv-navigation.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IDirective, IDirectiveFactory, IQService} from 'angular';\nimport {IStateService} from 'angular-ui-router';\nimport WizardStepManager from '../../../gesuch/service/wizardStepManager';\nimport {TSWizardStepName} from '../../../models/enums/TSWizardStepName';\nimport GesuchModelManager from '../../../gesuch/service/gesuchModelManager';\nimport ErrorService from '../../errors/service/ErrorService';\nimport {TSWizardStepStatus} from '../../../models/enums/TSWizardStepStatus';\nimport ITranslateService = angular.translate.ITranslateService;\ndeclare let require: any;\nlet template = require('./dv-navigation.html');\nlet style = require('./dv-navigation.less');\n\n\n/**\n * Diese Direktive wird benutzt, um die Navigation Buttons darzustellen. Folgende Parameter koennen benutzt werden,\n * um die Funktionalitaet zu definieren:\n *\n * -- dvPrevious: function      Wenn true wird der Button \"previous\" angezeigt (nicht gleichzeitig mit dvCancel benutzen)\n * -- dvNext: function          Wenn true wird der Button \"next\" angezeigt\n * -- dvNextDisabled: function  Wenn man eine extra Pruefung braucht, um den Button Next zu disablen\n * -- dvSubStep: number         Manche Steps haben sog. SubSteps (z.B. finanzielle Situation). Dieses Parameter wird benutzt,\n *                              um zwischen SubSteps unterscheiden zu koennen\n * -- dvSave: function          Die callback Methode, die man aufrufen muss, wenn der Button geklickt wird. Verwenden nur um die Daten zu speichern\n * -- dvCancel: function        Die callback Methode, um alles zurueckzusetzen (nicht gleichzeitig mit dvPrevious benutzen)\n */\nexport class DVNavigation implements IDirective {\n    restrict = 'E';\n    scope = {\n        dvPrevious: '&?',\n        dvNext: '&?',\n        dvCancel: '&?',\n        dvNextDisabled: '&?',\n        dvSubStep: '<',\n        dvSave: '&?',\n        dvSavingPossible: '<?',\n        dvTranslateNext: '@',\n        dvTranslatePrevious: '@'\n    };\n    controller = NavigatorController;\n    controllerAs = 'vm';\n    bindToController = true;\n    template = template;\n\n    static factory(): IDirectiveFactory {\n        const directive = () => new DVNavigation();\n        directive.$inject = [];\n        return directive;\n    }\n}\n/**\n * Direktive  der initial die smart table nach dem aktuell eingeloggtem user filtert\n */\nexport class NavigatorController {\n\n    dvPrevious: () => any;\n    dvNext: () => any;\n    dvSave: () => any;\n    dvCancel: () => any;\n    dvNextDisabled: () => any;\n    dvSavingPossible: boolean;\n    dvSubStep: number;\n    dvTranslateNext: string;\n    dvTranslatePrevious: string;\n    isRequestInProgress: boolean = false; // this semaphore will prevent a navigation button to be called again until the prozess is not finished\n\n    performSave: boolean;\n\n    static $inject: string[] = ['WizardStepManager', '$state', 'GesuchModelManager', '$translate', 'ErrorService', '$q'];\n    /* @ngInject */\n    constructor(private wizardStepManager: WizardStepManager, private state: IStateService, private gesuchModelManager: GesuchModelManager,\n                private $translate: ITranslateService, private errorService: ErrorService, private $q: IQService) {\n    }\n\n    //wird von angular aufgerufen\n    $onInit() {\n        //initial nach aktuell eingeloggtem filtern\n        this.dvSavingPossible = this.dvSavingPossible || false;\n\n    }\n\n\n    public doesCancelExist(): boolean {\n        return this.dvCancel !== undefined && this.dvCancel !== null;\n    }\n\n    public doesdvTranslateNextExist(): boolean {\n        return this.dvTranslateNext !== undefined && this.dvTranslateNext !== null;\n    }\n\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und weiter. Sonst nur weiter\n     * @returns {string}\n     */\n    public getPreviousButtonName(): string {\n        if (this.dvTranslatePrevious) {\n            return this.$translate.instant(this.dvTranslatePrevious);\n        } else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            } else if (this.dvSave) {\n                return this.$translate.instant('ZURUECK_UPPER');\n            } else {\n                return this.$translate.instant('ZURUECK_ONLY_UPPER');\n            }\n        }\n    }\n\n    /**\n     * Wenn die function save uebergeben wurde, dann heisst der Button Speichern und zurueck. Sonst nur zurueck\n     * @returns {string}\n     */\n    public getNextButtonName(): string {\n        if (this.dvTranslateNext) {\n            return this.$translate.instant(this.dvTranslateNext);\n        } else {\n            if (this.gesuchModelManager.isGesuchReadonly()) {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            } else if (this.dvSave) {\n                return this.$translate.instant('WEITER_UPPER');\n            } else {\n                return this.$translate.instant('WEITER_ONLY_UPPER');\n            }\n        }\n    }\n\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum naechsten Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum naechsten Step geleitet.\n     */\n    public nextStep(): void {\n        if (!this.isRequestInProgress) { //do nothing if we are already saving\n            this.isRequestInProgress = true;\n            if (this.isSavingEnabled() && this.dvSave) {\n                let returnValue: any = this.dvSave();  //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(() => {\n                        this.navigateToNextStep();\n                    }).finally(() => {\n                        this.isRequestInProgress = false;\n                    });\n                } else {\n                    this.isRequestInProgress = false;\n                }\n            } else {\n                this.isRequestInProgress = false;\n                this.navigateToNextStep();\n            }\n        } else {\n            console.log('doubleclick suppressed'); //for testing\n        }\n    }\n\n    private isSavingEnabled(): boolean {\n        if (this.dvSavingPossible) {\n            return true;\n        } else {\n            return !this.gesuchModelManager.isGesuchReadonly();\n        }\n    }\n\n    /**\n     * Diese Methode prueft zuerst ob eine Function in dvSave uebergeben wurde. In diesem Fall wird diese Methode aufgerufen und erst\n     * als callback zum vorherigen Step gefuehrt. Wenn dvSave keine gueltige Function enthaelt und deshalb keine Promise zurueckgibt,\n     * wird dann direkt zum vorherigen Step geleitet.\n     */\n    public previousStep(): void {\n        if (!this.isRequestInProgress) { //do nothing if we are already saving\n            if (this.isSavingEnabled() && this.dvSave) {\n                let returnValue: any = this.dvSave();  //callback ausfuehren, could return promise\n                if (returnValue !== undefined) {\n                    this.$q.when(returnValue).then(() => {\n                        this.navigateToPreviousStep();\n                    }).finally(() => {\n                        this.isRequestInProgress = false;\n                    });\n                } else {\n                    this.isRequestInProgress = false;\n                }\n            } else {\n                this.isRequestInProgress = false;\n                this.navigateToPreviousStep();\n            }\n        }\n    }\n\n    /**\n     * Diese Methode ist aehnlich wie previousStep() aber wird verwendet, um die Aenderungen NICHT zu speichern\n     */\n    public cancel(): void {\n        if (this.dvCancel) {\n            this.dvCancel();\n        }\n        this.navigateToPreviousStep();\n    }\n\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der naechste Step ist und wechselt zu diesem.\n     * Bay default wird es zum nae\n     */\n    private navigateToNextStep() {\n\n        this.errorService.clearAll();\n\n        // Improvement?: All diese Sonderregel koennten in getNextStep() vom wizardStepManager sein, damit die gleiche\n        // Funktionalität für isButtonDisable wie für die Navigation existiert.\n        if (TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && (this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n            this.navigateToStep(TSWizardStepName.GESUCHSTELLER, '2');\n\n        } else if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.KINDER);\n\n        } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            // Diese Logik ist ziemlich kompliziert. Deswegen bleibt sie noch in betreuungView.ts -> Hier wird dann nichts gemacht\n\n        } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.errorService.clearAll();\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName.ERWERBSPENSUM);\n            }\n\n        } else if (TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                // noinspection NegatedIfStatementJS - the other way makes no sense\n                if (!this.gesuchModelManager.isFinanzielleSituationDesired()) {\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                } else if ((this.gesuchModelManager.getGesuchstellerNumber() === 1) && this.gesuchModelManager.isGesuchsteller2Required()) {\n                    this.navigateToStepFinanzielleSituation('2');\n                } else {\n                    this.navigateToFinanziellSituationResultate();\n                }\n\n            } else if (this.dvSubStep === 2) {\n                // noinspection NegatedIfStatementJS - the other way makes no sense\n                if (!this.gesuchModelManager.isFinanzielleSituationEnabled() || !this.gesuchModelManager.isFinanzielleSituationDesired()) {\n                    this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                } else {\n                    this.navigateToStepFinanzielleSituation('1');\n                }\n\n            } else if (this.dvSubStep === 3) {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            }\n\n        } else if (TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().einkommensverschlechterung) { // was muss hier sein?\n                    if (this.gesuchModelManager.isGesuchsteller2Required()) {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterungSteuern();\n                        } else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    } else {\n                        if (this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                            this.navigateToStepEinkommensverschlechterung('1', undefined);\n                        } else {\n                            this.navigateToStepEinkommensverschlechterung('1', '2');\n                        }\n                    }\n                } else {\n                    this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.OK).then(() => {\n                        this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n                    });\n                }\n\n            } else if (this.dvSubStep === 2) {\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                }\n            } else if (this.dvSubStep === 3) {\n                this.navigateNextEVSubStep3();\n\n            } else if (this.dvSubStep === 4) {\n                this.navigateNextEVSubStep4();\n            }\n\n        } else { //by default navigieren wir zum naechsten erlaubten Step\n            this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n        }\n    }\n\n    /**\n     * Berechnet fuer den aktuellen Benutzer und Step, welcher der previous Step ist und wechselt zu diesem.\n     * wenn es kein Sonderfall ist wird der letzte else case ausgefuehrt\n     */\n    private navigateToPreviousStep() {\n\n        this.errorService.clearAll();\n        if (TSWizardStepName.GESUCH_ERSTELLEN === this.wizardStepManager.getCurrentStepName()) {\n            this.navigateToStep(TSWizardStepName.GESUCH_ERSTELLEN);\n\n        } else if (TSWizardStepName.GESUCHSTELLER === this.wizardStepManager.getCurrentStepName()\n            && this.gesuchModelManager.getGesuchstellerNumber() === 2) {\n\n            this.navigateToStep(TSWizardStepName.GESUCHSTELLER, '1');\n\n        } else if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.KINDER);\n\n        } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.BETREUUNG);\n\n        } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.ERWERBSPENSUM);\n\n        } else if (TSWizardStepName.FINANZIELLE_SITUATION === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                if ((this.gesuchModelManager.getGesuchstellerNumber() === 2)) {\n                    this.navigateToStepFinanzielleSituation('1');\n\n                } else if (this.gesuchModelManager.getGesuchstellerNumber() === 1 && (this.gesuchModelManager.isGesuchsteller2Required()\n                    || (this.gesuchModelManager.getGesuchsperiode().hasTagesschulenAnmeldung() && this.gesuchModelManager.areThereOnlySchulamtAngebote()))) {\n                    this.navigateToStep(TSWizardStepName.FINANZIELLE_SITUATION);\n                } else {\n                    this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n                }\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            } else if (this.dvSubStep === 3) {\n                this.navigateToStepFinanzielleSituation(this.gesuchModelManager.getGesuchstellerNumber() === 2 ? '2' : '1');\n            }\n\n        } else if (TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG === this.wizardStepManager.getCurrentStepName()) {\n            if (this.dvSubStep === 1) {\n                this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n            } else if (this.dvSubStep === 2) {\n                this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n            } else if (this.dvSubStep === 3) {\n                this.navigatePreviousEVSubStep3();\n            } else if (this.dvSubStep === 4) {\n                this.navigatePreviousEVSubStep4();\n            }\n\n        } else if (TSWizardStepName.VERFUEGEN === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 2) {\n            this.navigateToStep(TSWizardStepName.VERFUEGEN);\n\n        } else {\n            this.navigateToStep(this.wizardStepManager.getPreviousStep(this.gesuchModelManager.getGesuch()));\n        }\n    }\n\n    /**\n     * Diese Methode navigierte zum ersten substep jedes Steps. Fuer die navigation innerhalb eines Steps muss\n     * man eine extra Methode machen\n     * @param stepName\n     * @param gsNumber\n     */\n    private navigateToStep(stepName: TSWizardStepName, gsNumber?: string) {\n        let gesuchId = this.getGesuchId();\n\n        if (stepName === TSWizardStepName.GESUCH_ERSTELLEN) {\n            this.state.go('gesuch.fallcreation', {\n                createNew: 'false',\n                createMutation: 'false',\n                eingangsart: this.gesuchModelManager.getGesuch().eingangsart,\n                gesuchId: gesuchId,\n                gesuchsperiodeId: this.gesuchModelManager.getGesuch().gesuchsperiode.id,\n                fallId: this.gesuchModelManager.getGesuch().fall.id\n            });\n\n        } else if (stepName === TSWizardStepName.FAMILIENSITUATION) {\n            this.state.go('gesuch.familiensituation', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.GESUCHSTELLER) {\n            this.state.go('gesuch.stammdaten', {\n                gesuchstellerNumber: gsNumber ? gsNumber : '1',\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.UMZUG) {\n            this.state.go('gesuch.umzug', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.KINDER) {\n            this.state.go('gesuch.kinder', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.BETREUUNG) {\n            this.state.go('gesuch.betreuungen', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.ABWESENHEIT) {\n            this.state.go('gesuch.abwesenheit', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.ERWERBSPENSUM) {\n            this.state.go('gesuch.erwerbsPensen', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.FINANZIELLE_SITUATION) {\n            if (this.gesuchModelManager.showFinanzielleSituationStart()) {\n\n                this.state.go('gesuch.finanzielleSituationStart', {\n                    gesuchId: this.getGesuchId()\n                });\n\n            } else {\n                this.state.go('gesuch.finanzielleSituation', {\n                    gesuchstellerNumber: '1',\n                    gesuchId: this.getGesuchId()\n                });\n            }\n\n        } else if (stepName === TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG) {\n            this.state.go('gesuch.einkommensverschlechterungInfo', {\n                gesuchId: this.getGesuchId()\n            });\n\n        } else if (stepName === TSWizardStepName.DOKUMENTE) {\n            this.state.go('gesuch.dokumente', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.FREIGABE) {\n            this.state.go('gesuch.freigabe', {\n                gesuchId: gesuchId\n            });\n\n        } else if (stepName === TSWizardStepName.VERFUEGEN) {\n            this.state.go('gesuch.verfuegen', {\n                gesuchId: gesuchId\n            });\n\n        }\n    }\n\n    private navigateToStepEinkommensverschlechterung(gsNumber: string, basisjahrPlus: string) {\n        this.state.go('gesuch.einkommensverschlechterung', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToFinanziellSituationResultate() {\n        this.state.go('gesuch.finanzielleSituationResultate', {\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepEinkommensverschlechterungSteuern() {\n        this.state.go('gesuch.einkommensverschlechterungSteuern', {\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepEinkommensverschlechterungResultate(basisjahrPlus: string) {\n        this.state.go('gesuch.einkommensverschlechterungResultate', {\n            basisjahrPlus: basisjahrPlus ? basisjahrPlus : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private navigateToStepFinanzielleSituation(gsNumber: string) {\n        this.state.go('gesuch.finanzielleSituation', {\n            gesuchstellerNumber: gsNumber ? gsNumber : '1',\n            gesuchId: this.getGesuchId()\n        });\n    }\n\n    private getGesuchId(): string {\n        if (this.gesuchModelManager && this.gesuchModelManager.getGesuch()) {\n            return this.gesuchModelManager.getGesuch().id;\n        }\n        return '';\n    }\n\n    /**\n     * Checks whether the button should be disable for the current conditions. By default (auch fuer Mutaionen) enabled\n     * @returns {boolean}\n     */\n    public isNextButtonDisabled(): boolean {\n        //if step is disabled in manager we can stop here\n        if (!this.wizardStepManager.isNextStepEnabled(this.gesuchModelManager.getGesuch())) {\n            return true;\n        }\n        // otherwise check specifics\n        if (this.gesuchModelManager.isGesuch()) {\n            if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.isThereAnyKindWithBetreuungsbedarf()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return !this.gesuchModelManager.getGesuch().isThereAnyBetreuung()\n                    && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n            if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.dvNextDisabled() && !this.wizardStepManager.isNextStepBesucht(this.gesuchModelManager.getGesuch());\n            }\n        }\n\n        return false;\n    }\n\n    public getTooltip(): string {\n        if (this.isNextButtonDisabled()) {\n            if (TSWizardStepName.KINDER === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('KINDER_TOOLTIP_REQUIRED');\n\n            } else if (TSWizardStepName.BETREUUNG === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('BETREUUNG_TOOLTIP_REQUIRED');\n\n            } else if (TSWizardStepName.ERWERBSPENSUM === this.wizardStepManager.getCurrentStepName() && this.dvSubStep === 1) {\n                return this.$translate.instant('ERWERBSPENSUM_TOOLTIP_REQUIRED');\n            }\n        }\n        return undefined;\n    }\n\n    private navigateNextEVSubStep3(): void {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            } else { // ist Zustand 2/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '2'); // gehe ekv 1/2\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) {\n                    this.navigateToStepEinkommensverschlechterung('2', '2'); // gehe ekv 2/2\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                }\n            }\n        } else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '2');\n                } else {\n                    if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                        this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                    } else {\n                        this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                    }\n                }\n            } else { // ist Zustand 2/2\n                if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                    this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n                } else {\n                    this.navigateToStepEinkommensverschlechterungResultate('2'); // gehe Resultate Bj 2\n                }\n            }\n        }\n    }\n\n\n    private navigatePreviousEVSubStep3(): void {\n        if ((this.gesuchModelManager.getBasisJahrPlusNumber() === 1)) {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/1\n                if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            } else { // ist Zustand 2/1\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        } else {\n            if (this.gesuchModelManager.getGesuchstellerNumber() === 1) { // ist Zustand 1/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            } else { // ist Zustand 2/2\n                if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                    this.navigateToStepEinkommensverschlechterung('1', '2');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/2\n                    this.navigateToStepEinkommensverschlechterung('2', '1');\n                } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 1)) {\n                    this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n                } else if (this.gesuchModelManager.isGesuchsteller2Required() &&\n                    this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus1) {\n                    this.navigateToStepEinkommensverschlechterungSteuern();\n                } else {\n                    this.navigateToStep(TSWizardStepName.EINKOMMENSVERSCHLECHTERUNG);\n                }\n            }\n        }\n    }\n\n    private navigatePreviousEVSubStep4(): void {\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 2) {\n            // baisjahrPlus2\n            if (this.gesuchModelManager.getEkvFuerBasisJahrPlus(1)) {\n                this.navigateToStepEinkommensverschlechterungResultate('1'); // gehe Resultate Bj 1\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            } else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        } else {\n            // baisjahrPlus1\n            if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 2)) { // gehe ekv 2/2\n                this.navigateToStepEinkommensverschlechterung('2', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(1, 2)) { // gehe ekv 1/2\n                this.navigateToStepEinkommensverschlechterung('1', '2');\n            } else if (this.gesuchModelManager.isRequiredEKV_GS_BJ(2, 1)) { // gehe ekv 2/1\n                this.navigateToStepEinkommensverschlechterung('2', '1');\n            } else {\n                this.navigateToStepEinkommensverschlechterung('1', '1'); // gehe ekv 1/1\n            }\n        }\n    }\n\n    private navigateNextEVSubStep4(): void {\n        if (this.gesuchModelManager.getBasisJahrPlusNumber() === 1\n            && this.gesuchModelManager.getGesuch().extractEinkommensverschlechterungInfo().ekvFuerBasisJahrPlus2 === true) {\n            this.navigateToStepEinkommensverschlechterungResultate('2');\n        } else {\n            this.wizardStepManager.updateCurrentWizardStepStatus(TSWizardStepStatus.OK).then(() => {\n                this.navigateToStep(this.wizardStepManager.getNextStep(this.gesuchModelManager.getGesuch()));\n            });\n        }\n    }\n\n}\n"]}]}