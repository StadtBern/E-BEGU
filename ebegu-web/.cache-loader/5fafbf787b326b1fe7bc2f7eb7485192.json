{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","mtime":1518612532814},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TSAbstractAntragEntity_1 = require(\"./TSAbstractAntragEntity\");\nvar TSAntragTyp_1 = require(\"./enums/TSAntragTyp\");\nvar TSEingangsart_1 = require(\"./enums/TSEingangsart\");\nvar TSBetreuungsangebotTyp_1 = require(\"./enums/TSBetreuungsangebotTyp\");\nvar TSBetreuungsstatus_1 = require(\"./enums/TSBetreuungsstatus\");\nvar TSAntragStatus_1 = require(\"./enums/TSAntragStatus\");\nvar TSGesuch = /** @class */ (function (_super) {\n    __extends(TSGesuch, _super);\n    function TSGesuch() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._geprueftSTV = false;\n        _this._hasFSDokument = true;\n        _this._gesperrtWegenBeschwerde = false;\n        _this._dokumenteHochgeladen = false;\n        // Wir müssen uns merken, dass dies nicht das originalGesuch ist sondern eine Mutations- oder Erneuerungskopie\n        // (Wichtig für laden des Gesuchs bei Navigation)\n        _this._emptyCopy = false;\n        return _this;\n    }\n    Object.defineProperty(TSGesuch.prototype, \"gesuchsteller1\", {\n        get: function () {\n            return this._gesuchsteller1;\n        },\n        set: function (value) {\n            this._gesuchsteller1 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"gesuchsteller2\", {\n        get: function () {\n            return this._gesuchsteller2;\n        },\n        set: function (value) {\n            this._gesuchsteller2 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"kindContainers\", {\n        get: function () {\n            return this._kindContainers;\n        },\n        set: function (value) {\n            this._kindContainers = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"familiensituationContainer\", {\n        get: function () {\n            return this._familiensituationContainer;\n        },\n        set: function (value) {\n            this._familiensituationContainer = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"einkommensverschlechterungInfoContainer\", {\n        get: function () {\n            return this._einkommensverschlechterungInfoContainer;\n        },\n        set: function (value) {\n            this._einkommensverschlechterungInfoContainer = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"bemerkungen\", {\n        get: function () {\n            return this._bemerkungen;\n        },\n        set: function (value) {\n            this._bemerkungen = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"bemerkungenSTV\", {\n        get: function () {\n            return this._bemerkungenSTV;\n        },\n        set: function (value) {\n            this._bemerkungenSTV = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"bemerkungenPruefungSTV\", {\n        get: function () {\n            return this._bemerkungenPruefungSTV;\n        },\n        set: function (value) {\n            this._bemerkungenPruefungSTV = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"laufnummer\", {\n        get: function () {\n            return this._laufnummer;\n        },\n        set: function (value) {\n            this._laufnummer = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"geprueftSTV\", {\n        get: function () {\n            return this._geprueftSTV;\n        },\n        set: function (value) {\n            this._geprueftSTV = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"hasFSDokument\", {\n        get: function () {\n            return this._hasFSDokument;\n        },\n        set: function (value) {\n            this._hasFSDokument = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"gesperrtWegenBeschwerde\", {\n        get: function () {\n            return this._gesperrtWegenBeschwerde;\n        },\n        set: function (value) {\n            this._gesperrtWegenBeschwerde = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"emptyCopy\", {\n        get: function () {\n            return this._emptyCopy;\n        },\n        set: function (value) {\n            this._emptyCopy = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"datumGewarntNichtFreigegeben\", {\n        get: function () {\n            return this._datumGewarntNichtFreigegeben;\n        },\n        set: function (value) {\n            this._datumGewarntNichtFreigegeben = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"datumGewarntFehlendeQuittung\", {\n        get: function () {\n            return this._datumGewarntFehlendeQuittung;\n        },\n        set: function (value) {\n            this._datumGewarntFehlendeQuittung = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"timestampVerfuegt\", {\n        get: function () {\n            return this._timestampVerfuegt;\n        },\n        set: function (value) {\n            this._timestampVerfuegt = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"gueltig\", {\n        get: function () {\n            return this._gueltig;\n        },\n        set: function (value) {\n            this._gueltig = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"gesuchBetreuungenStatus\", {\n        get: function () {\n            return this._gesuchBetreuungenStatus;\n        },\n        set: function (value) {\n            this._gesuchBetreuungenStatus = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSGesuch.prototype, \"dokumenteHochgeladen\", {\n        get: function () {\n            return this._dokumenteHochgeladen;\n        },\n        set: function (value) {\n            this._dokumenteHochgeladen = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TSGesuch.prototype.isMutation = function () {\n        return this.typ === TSAntragTyp_1.TSAntragTyp.MUTATION;\n    };\n    TSGesuch.prototype.isFolgegesuch = function () {\n        return this.typ === TSAntragTyp_1.TSAntragTyp.ERNEUERUNGSGESUCH;\n    };\n    TSGesuch.prototype.isOnlineGesuch = function () {\n        return TSEingangsart_1.TSEingangsart.ONLINE === this.eingangsart;\n    };\n    Object.defineProperty(TSGesuch.prototype, \"finSitStatus\", {\n        get: function () {\n            return this._finSitStatus;\n        },\n        set: function (value) {\n            this._finSitStatus = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Schaut ob der GS1 oder der GS2 mindestens eine umzugsadresse hat\n     */\n    TSGesuch.prototype.isThereAnyUmzug = function () {\n        if (this.gesuchsteller1 && this.gesuchsteller1.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        if (this.gesuchsteller2 && this.gesuchsteller2.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     *\n     * @returns {any} Alle KindContainer in denen das Kind Betreuung benoetigt\n     */\n    TSGesuch.prototype.getKinderWithBetreuungList = function () {\n        var listResult = [];\n        if (this.kindContainers) {\n            this.kindContainers.forEach(function (kind) {\n                if (kind.kindJA.familienErgaenzendeBetreuung) {\n                    listResult.push(kind);\n                }\n            });\n        }\n        return listResult;\n    };\n    /**\n     * Returns true when all Betreuungen are of one of the given types\n     */\n    TSGesuch.prototype.areThereOnlyAngeboteOfType = function (types) {\n        var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (var _i = 0, kinderWithBetreuungList_1 = kinderWithBetreuungList; _i < kinderWithBetreuungList_1.length; _i++) {\n            var kind = kinderWithBetreuungList_1[_i];\n            for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                var betreuung = _b[_a];\n                if (!TSBetreuungsangebotTyp_1.isOfAnyBetreuungsangebotTyp(betreuung.institutionStammdaten.betreuungsangebotTyp, types)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    /**\n     * Returns true when all Betreuungen are of kind SCHULAMT.\n     * Returns false also if there are no Kinder with betreuungsbedarf\n     */\n    TSGesuch.prototype.areThereOnlySchulamtAngebote = function () {\n        return this.areThereOnlyAngeboteOfType(TSBetreuungsangebotTyp_1.getSchulamtBetreuungsangebotTypValues());\n    };\n    /**\n     * Returns true when all Betreuungen are of kind FERIENINSEL.\n     * Returns false also if there are no Kinder with betreuungsbedarf\n     */\n    TSGesuch.prototype.areThereOnlyFerieninsel = function () {\n        return this.areThereOnlyAngeboteOfType([TSBetreuungsangebotTyp_1.TSBetreuungsangebotTyp.FERIENINSEL]);\n    };\n    /**\n     * Returns true when all Betreuungen are geschlossen ohne verfuegung\n     */\n    TSGesuch.prototype.areThereOnlyGeschlossenOhneVerfuegung = function () {\n        var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (var _i = 0, kinderWithBetreuungList_2 = kinderWithBetreuungList; _i < kinderWithBetreuungList_2.length; _i++) {\n            var kind = kinderWithBetreuungList_2[_i];\n            for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                var betreuung = _b[_a];\n                if (betreuung.betreuungsstatus !== TSBetreuungsstatus_1.TSBetreuungsstatus.GESCHLOSSEN_OHNE_VERFUEGUNG) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    TSGesuch.prototype.hasBetreuungInStatusWarten = function () {\n        var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n        for (var _i = 0, kinderWithBetreuungList_3 = kinderWithBetreuungList; _i < kinderWithBetreuungList_3.length; _i++) {\n            var kind = kinderWithBetreuungList_3[_i];\n            for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                var betreuung = _b[_a];\n                if (betreuung.betreuungsstatus === TSBetreuungsstatus_1.TSBetreuungsstatus.WARTEN) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    TSGesuch.prototype.extractFamiliensituation = function () {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationJA;\n        }\n        return undefined;\n    };\n    TSGesuch.prototype.extractFamiliensituationErstgesuch = function () {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationErstgesuch;\n        }\n        return undefined;\n    };\n    TSGesuch.prototype.extractEinkommensverschlechterungInfo = function () {\n        if (this.einkommensverschlechterungInfoContainer) {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA;\n        }\n        return undefined;\n    };\n    TSGesuch.prototype.canBeFreigegeben = function () {\n        return this.status === TSAntragStatus_1.TSAntragStatus.FREIGABEQUITTUNG;\n    };\n    /**\n     * Schaut dass mindestens eine Betreuung erfasst wurde.\n     * @returns {boolean}\n     */\n    TSGesuch.prototype.isThereAnyBetreuung = function () {\n        var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n        for (var _i = 0, kinderWithBetreuungList_4 = kinderWithBetreuungList; _i < kinderWithBetreuungList_4.length; _i++) {\n            var kind = kinderWithBetreuungList_4[_i];\n            if (kind.betreuungen && kind.betreuungen.length > 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TSGesuch.prototype.extractKindFromKindNumber = function (kindNumber) {\n        if (this.kindContainers && kindNumber > 0) {\n            for (var i = 0; i < this.kindContainers.length; i++) {\n                if (this.kindContainers[i].kindNummer === kindNumber) {\n                    return this.kindContainers[i];\n                }\n            }\n        }\n        return undefined;\n    };\n    return TSGesuch;\n}(TSAbstractAntragEntity_1.default));\nexports.default = TSGesuch;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TSKindContainer from './TSKindContainer';\nimport TSAbstractAntragEntity from './TSAbstractAntragEntity';\nimport TSFamiliensituation from './TSFamiliensituation';\nimport TSEinkommensverschlechterungInfo from './TSEinkommensverschlechterungInfo';\nimport {TSAntragTyp} from './enums/TSAntragTyp';\nimport TSGesuchstellerContainer from './TSGesuchstellerContainer';\nimport TSEinkommensverschlechterungInfoContainer from './TSEinkommensverschlechterungInfoContainer';\nimport TSFamiliensituationContainer from './TSFamiliensituationContainer';\nimport {TSEingangsart} from './enums/TSEingangsart';\nimport {getSchulamtBetreuungsangebotTypValues, isOfAnyBetreuungsangebotTyp, TSBetreuungsangebotTyp} from './enums/TSBetreuungsangebotTyp';\nimport {TSBetreuungsstatus} from './enums/TSBetreuungsstatus';\nimport {TSAntragStatus} from './enums/TSAntragStatus';\nimport * as moment from 'moment';\nimport {TSGesuchBetreuungenStatus} from './enums/TSGesuchBetreuungenStatus';\nimport {TSFinSitStatus} from './enums/TSFinSitStatus';\n\nexport default class TSGesuch extends TSAbstractAntragEntity {\n\n    private _gesuchsteller1: TSGesuchstellerContainer;\n    private _gesuchsteller2: TSGesuchstellerContainer;\n    private _kindContainers: Array<TSKindContainer>;\n    private _familiensituationContainer: TSFamiliensituationContainer;\n    private _einkommensverschlechterungInfoContainer: TSEinkommensverschlechterungInfoContainer;\n    private _bemerkungen: string;\n    private _bemerkungenSTV: string;\n    private _bemerkungenPruefungSTV: string;\n    private _laufnummer: number;\n    private _geprueftSTV: boolean = false;\n    private _hasFSDokument: boolean = true;\n    private _finSitStatus: TSFinSitStatus;\n    private _gesperrtWegenBeschwerde: boolean = false;\n    private _datumGewarntNichtFreigegeben: moment.Moment;\n    private _datumGewarntFehlendeQuittung: moment.Moment;\n    private _gesuchBetreuungenStatus: TSGesuchBetreuungenStatus;\n    private _dokumenteHochgeladen: boolean = false;\n\n    private _timestampVerfuegt: moment.Moment;\n    private _gueltig: boolean;\n\n    // Wir müssen uns merken, dass dies nicht das originalGesuch ist sondern eine Mutations- oder Erneuerungskopie\n    // (Wichtig für laden des Gesuchs bei Navigation)\n    private _emptyCopy: boolean = false;\n\n    public get gesuchsteller1(): TSGesuchstellerContainer {\n        return this._gesuchsteller1;\n    }\n\n    public set gesuchsteller1(value: TSGesuchstellerContainer) {\n        this._gesuchsteller1 = value;\n    }\n\n    public get gesuchsteller2(): TSGesuchstellerContainer {\n        return this._gesuchsteller2;\n    }\n\n    public set gesuchsteller2(value: TSGesuchstellerContainer) {\n        this._gesuchsteller2 = value;\n    }\n\n    get kindContainers(): Array<TSKindContainer> {\n        return this._kindContainers;\n    }\n\n    set kindContainers(value: Array<TSKindContainer>) {\n        this._kindContainers = value;\n    }\n\n    get familiensituationContainer(): TSFamiliensituationContainer {\n        return this._familiensituationContainer;\n    }\n\n    set familiensituationContainer(value: TSFamiliensituationContainer) {\n        this._familiensituationContainer = value;\n    }\n\n    get einkommensverschlechterungInfoContainer(): TSEinkommensverschlechterungInfoContainer {\n        return this._einkommensverschlechterungInfoContainer;\n    }\n\n    set einkommensverschlechterungInfoContainer(value: TSEinkommensverschlechterungInfoContainer) {\n        this._einkommensverschlechterungInfoContainer = value;\n    }\n\n    get bemerkungen(): string {\n        return this._bemerkungen;\n    }\n\n    set bemerkungen(value: string) {\n        this._bemerkungen = value;\n    }\n\n    get bemerkungenSTV(): string {\n        return this._bemerkungenSTV;\n    }\n\n    set bemerkungenSTV(value: string) {\n        this._bemerkungenSTV = value;\n    }\n\n    get bemerkungenPruefungSTV(): string {\n        return this._bemerkungenPruefungSTV;\n    }\n\n    set bemerkungenPruefungSTV(value: string) {\n        this._bemerkungenPruefungSTV = value;\n    }\n\n    get laufnummer(): number {\n        return this._laufnummer;\n    }\n\n    set laufnummer(value: number) {\n        this._laufnummer = value;\n    }\n\n    get geprueftSTV(): boolean {\n        return this._geprueftSTV;\n    }\n\n    set geprueftSTV(value: boolean) {\n        this._geprueftSTV = value;\n    }\n\n    get hasFSDokument(): boolean {\n        return this._hasFSDokument;\n    }\n\n    set hasFSDokument(value: boolean) {\n        this._hasFSDokument = value;\n    }\n\n    get gesperrtWegenBeschwerde(): boolean {\n        return this._gesperrtWegenBeschwerde;\n    }\n\n    set gesperrtWegenBeschwerde(value: boolean) {\n        this._gesperrtWegenBeschwerde = value;\n    }\n\n    get emptyCopy(): boolean {\n        return this._emptyCopy;\n    }\n\n    set emptyCopy(value: boolean) {\n        this._emptyCopy = value;\n    }\n\n    get datumGewarntNichtFreigegeben(): moment.Moment {\n        return this._datumGewarntNichtFreigegeben;\n    }\n\n    set datumGewarntNichtFreigegeben(value: moment.Moment) {\n        this._datumGewarntNichtFreigegeben = value;\n    }\n\n    get datumGewarntFehlendeQuittung(): moment.Moment {\n        return this._datumGewarntFehlendeQuittung;\n    }\n\n    set datumGewarntFehlendeQuittung(value: moment.Moment) {\n        this._datumGewarntFehlendeQuittung = value;\n    }\n\n    get timestampVerfuegt(): moment.Moment {\n        return this._timestampVerfuegt;\n    }\n\n    set timestampVerfuegt(value: moment.Moment) {\n        this._timestampVerfuegt = value;\n    }\n\n    get gueltig(): boolean {\n        return this._gueltig;\n    }\n\n    set gueltig(value: boolean) {\n        this._gueltig = value;\n    }\n\n    get gesuchBetreuungenStatus(): TSGesuchBetreuungenStatus {\n        return this._gesuchBetreuungenStatus;\n    }\n\n    set gesuchBetreuungenStatus(value: TSGesuchBetreuungenStatus) {\n        this._gesuchBetreuungenStatus = value;\n    }\n\n    get dokumenteHochgeladen(): boolean {\n        return this._dokumenteHochgeladen;\n    }\n\n    set dokumenteHochgeladen(value: boolean) {\n        this._dokumenteHochgeladen = value;\n    }\n\n    public isMutation(): boolean {\n        return this.typ === TSAntragTyp.MUTATION;\n    }\n\n    public isFolgegesuch(): boolean {\n        return this.typ === TSAntragTyp.ERNEUERUNGSGESUCH;\n    }\n\n    public isOnlineGesuch(): boolean {\n        return TSEingangsart.ONLINE === this.eingangsart;\n    }\n\n    public get finSitStatus(): TSFinSitStatus {\n        return this._finSitStatus;\n    }\n\n    public set finSitStatus(value: TSFinSitStatus) {\n        this._finSitStatus = value;\n    }\n\n    /**\n     * Schaut ob der GS1 oder der GS2 mindestens eine umzugsadresse hat\n     */\n    public isThereAnyUmzug(): boolean {\n        if (this.gesuchsteller1 && this.gesuchsteller1.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        if (this.gesuchsteller2 && this.gesuchsteller2.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     *\n     * @returns {any} Alle KindContainer in denen das Kind Betreuung benoetigt\n     */\n    public getKinderWithBetreuungList(): Array<TSKindContainer> {\n        let listResult: Array<TSKindContainer> = [];\n        if (this.kindContainers) {\n            this.kindContainers.forEach((kind) => {\n                if (kind.kindJA.familienErgaenzendeBetreuung) {\n                    listResult.push(kind);\n                }\n            });\n        }\n        return listResult;\n    }\n\n    /**\n     * Returns true when all Betreuungen are of one of the given types\n     */\n    private areThereOnlyAngeboteOfType(types: TSBetreuungsangebotTyp[]): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (!isOfAnyBetreuungsangebotTyp(betreuung.institutionStammdaten.betreuungsangebotTyp, types)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Returns true when all Betreuungen are of kind SCHULAMT.\n     * Returns false also if there are no Kinder with betreuungsbedarf\n     */\n    public areThereOnlySchulamtAngebote(): boolean {\n        return this.areThereOnlyAngeboteOfType(getSchulamtBetreuungsangebotTypValues());\n    }\n\n    /**\n     * Returns true when all Betreuungen are of kind FERIENINSEL.\n     * Returns false also if there are no Kinder with betreuungsbedarf\n     */\n    public areThereOnlyFerieninsel(): boolean {\n        return this.areThereOnlyAngeboteOfType([TSBetreuungsangebotTyp.FERIENINSEL]);\n    }\n\n    /**\n     * Returns true when all Betreuungen are geschlossen ohne verfuegung\n     */\n    public areThereOnlyGeschlossenOhneVerfuegung(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (betreuung.betreuungsstatus !== TSBetreuungsstatus.GESCHLOSSEN_OHNE_VERFUEGUNG) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    public hasBetreuungInStatusWarten(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (betreuung.betreuungsstatus === TSBetreuungsstatus.WARTEN) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public extractFamiliensituation(): TSFamiliensituation {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationJA;\n        }\n        return undefined;\n    }\n\n    public extractFamiliensituationErstgesuch(): TSFamiliensituation {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationErstgesuch;\n        }\n        return undefined;\n    }\n\n    public extractEinkommensverschlechterungInfo(): TSEinkommensverschlechterungInfo {\n        if (this.einkommensverschlechterungInfoContainer) {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA;\n        }\n        return undefined;\n    }\n\n    public canBeFreigegeben(): boolean {\n        return this.status === TSAntragStatus.FREIGABEQUITTUNG;\n    }\n\n    /**\n     * Schaut dass mindestens eine Betreuung erfasst wurde.\n     * @returns {boolean}\n     */\n    public isThereAnyBetreuung(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        for (let kind of kinderWithBetreuungList) {\n            if (kind.betreuungen && kind.betreuungen.length > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public extractKindFromKindNumber(kindNumber: number): TSKindContainer {\n        if (this.kindContainers && kindNumber > 0) {\n            for (let i = 0; i < this.kindContainers.length; i++) {\n                if (this.kindContainers[i].kindNummer === kindNumber) {\n                    return this.kindContainers[i];\n                }\n            }\n        }\n        return undefined;\n    }\n}\n"]}]}