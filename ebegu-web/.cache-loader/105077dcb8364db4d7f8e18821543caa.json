{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-display-element/dv-display-element.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-display-element/dv-display-element.ts","mtime":1512484412003},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DVRoleElementController_1 = require(\"../../controller/DVRoleElementController\");\n/**\n * Attribute Directive um Elementen aus- und einblenden. Erweitert ng-show\n * Die Direktive muss folgendermasse benutzt werden:\n *     dv-display-element - diese Attribute muss in jedem Element gesetzt werden, das die Direktive braucht\n *     dv-display-allowed-roles=\"[vm.TSRole.X, vm.TSRole.Y, ...]\" - Array mit allen Rollen, für die das Element eingeblendet werden muss. Um diese Syntax\n *                                                          zu verwenden, muss der Kontroller eine Subklasse von AbstractGesuchViewController sein.\n *                                                          Diese Attribute ist pflicht, darf aber auch auch ein leeres Array sein. Man kann auch eine\n *                                                          Methode oder eine Variable uebergeben\n *     dv-display-expression - optionale Attribute, mit der man einen extra boolean Wert uebergeben kann. Man kann auch eine\n *                          Methode oder eine Variable uebergeben\n *\n * ACHTUNG! Diese Direktive darf nicht mit ng-show zusammen benutzt werden\n */\nvar DVDisplayElement = /** @class */ (function () {\n    /* @ngInject */\n    function DVDisplayElement(ngShowDirective) {\n        var _this = this;\n        this.ngShowDirective = ngShowDirective;\n        this.restrict = 'A';\n        this.controller = DVRoleElementController_1.DVRoleElementController;\n        this.replace = true;\n        this.link = function (scope, element, attributes, controller, $transclude) {\n            // Copy arguments to new array to avoid: The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5.\n            // Consider using a standard function expression.\n            var arguments2 = [scope, element, attributes, controller, $transclude];\n            _this.callNgShowThrough(attributes, controller, arguments2);\n            // Die Version mit attributes.$observe funktioniert nicht. Als Wert bekommen wir immer ein string mit dem Namen der Variable, den wir\n            // danach evaluieren muessen. Da dieser String sich nie aendert (sondern eher seine evaluation), wird das observe nie aufgerufen. Mit scope.$watch\n            // funktioniert es weil die Variable immer transcluded wird und somit der Wert aendert sich.\n            scope.$watch(attributes['dvDisplayAllowedRoles'], function (newValue, oldValue, scope) {\n                controller.dvAllowedRoles = newValue;\n            }, true);\n            scope.$watch(attributes['dvDisplayExpression'], function (newValue, oldValue) {\n                controller.dvExpression = newValue;\n            }, true);\n        };\n        this.ngShow = ngShowDirective[0];\n        this.multiElement = this.ngShow.multiElement;\n    }\n    /**\n     * Diese Methode darf nur einmal aufgerufen werden.\n     * VORSICHT. Sollte diese Methode X-Mal aufgerufen werden, wird das Element dann X-Mall angezeigt\n     * @param attributes\n     * @param controller\n     * @param arguments2\n     */\n    DVDisplayElement.prototype.callNgShowThrough = function (attributes, controller, arguments2) {\n        attributes.ngShow = function () {\n            return (controller.checkValidity());\n        };\n        this.ngShow.link.apply(this.ngShow, arguments2);\n    };\n    DVDisplayElement.factory = function () {\n        var directive = function (ngShowDirective) { return new DVDisplayElement(ngShowDirective); };\n        directive.$inject = ['ngShowDirective'];\n        return directive;\n    };\n    DVDisplayElement.$inject = ['ngShowDirective'];\n    return DVDisplayElement;\n}());\nexports.DVDisplayElement = DVDisplayElement;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-display-element/dv-display-element.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-display-element/dv-display-element.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;GAaG;;AAGH,oFAAiF;AAEjF;;;;;;;;;;;;GAYG;AACH;IAWI,eAAe;IACf,0BAAoB,eAAoB;QAAxC,iBAGC;QAHmB,oBAAe,GAAf,eAAe,CAAK;QAXxC,aAAQ,GAAG,GAAG,CAAC;QACf,eAAU,GAAG,iDAAuB,CAAC;QAIrC,YAAO,GAAG,IAAI,CAAC;QAWf,SAAI,GAAG,UAAC,KAAa,EAAE,OAAyB,EAAE,UAAuB,EAAE,UAAmC,EAAE,WAAgB;YAC5H,yHAAyH;YACzH,iDAAiD;YACjD,IAAI,UAAU,GAAe,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC;YACnF,KAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;YAE3D,qIAAqI;YACrI,kJAAkJ;YAClJ,4FAA4F;YAC5F,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,UAAC,QAAa,EAAE,QAAa,EAAE,KAAU;gBACvF,UAAU,CAAC,cAAc,GAAG,QAAQ,CAAC;YACzC,CAAC,EAAE,IAAI,CAAC,CAAC;YACT,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,qBAAqB,CAAC,EAAE,UAAC,QAAa,EAAE,QAAa;gBACzE,UAAU,CAAC,YAAY,GAAG,QAAQ,CAAC;YACvC,CAAC,EAAE,IAAI,CAAC,CAAC;QACb,CAAC,CAAA;QAnBG,IAAI,CAAC,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;IACjD,CAAC;IAmBD;;;;;;OAMG;IACK,4CAAiB,GAAzB,UAA0B,UAAe,EAAE,UAAmC,EAAE,UAAsB;QAClG,UAAU,CAAC,MAAM,GAAG;YAChB,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC,CAAC;QACxC,CAAC,CAAC;QACF,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IACpD,CAAC;IAEM,wBAAO,GAAd;QACI,IAAM,SAAS,GAAG,UAAC,eAAoB,IAAK,OAAA,IAAI,gBAAgB,CAAC,eAAe,CAAC,EAArC,CAAqC,CAAC;QAClF,SAAS,CAAC,OAAO,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACxC,MAAM,CAAC,SAAS,CAAC;IACrB,CAAC;IA3CM,wBAAO,GAAa,CAAC,iBAAiB,CAAC,CAAC;IA4CnD,uBAAC;CAAA,AArDD,IAqDC;AArDY,4CAAgB","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IAttributes, IAugmentedJQuery, IDirective, IDirectiveFactory, IScope} from 'angular';\nimport {DVRoleElementController} from '../../controller/DVRoleElementController';\n\n/**\n * Attribute Directive um Elementen aus- und einblenden. Erweitert ng-show\n * Die Direktive muss folgendermasse benutzt werden:\n *     dv-display-element - diese Attribute muss in jedem Element gesetzt werden, das die Direktive braucht\n *     dv-display-allowed-roles=\"[vm.TSRole.X, vm.TSRole.Y, ...]\" - Array mit allen Rollen, für die das Element eingeblendet werden muss. Um diese Syntax\n *                                                          zu verwenden, muss der Kontroller eine Subklasse von AbstractGesuchViewController sein.\n *                                                          Diese Attribute ist pflicht, darf aber auch auch ein leeres Array sein. Man kann auch eine\n *                                                          Methode oder eine Variable uebergeben\n *     dv-display-expression - optionale Attribute, mit der man einen extra boolean Wert uebergeben kann. Man kann auch eine\n *                          Methode oder eine Variable uebergeben\n *\n * ACHTUNG! Diese Direktive darf nicht mit ng-show zusammen benutzt werden\n */\nexport class DVDisplayElement implements IDirective {\n    restrict = 'A';\n    controller = DVRoleElementController;\n    // kind bindToController und kein controllerAs weil sonst wird der scope ueberschrieben, da wir mit attribute Direktiven arbeiten\n\n    multiElement: any;\n    replace = true;\n    ngShow: any;\n\n    static $inject: string[] = ['ngShowDirective'];\n\n    /* @ngInject */\n    constructor(private ngShowDirective: any) {\n        this.ngShow = ngShowDirective[0];\n        this.multiElement = this.ngShow.multiElement;\n    }\n\n    link = (scope: IScope, element: IAugmentedJQuery, attributes: IAttributes, controller: DVRoleElementController, $transclude: any) => {\n        // Copy arguments to new array to avoid: The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5.\n        // Consider using a standard function expression.\n        let arguments2: Array<any> = [scope, element, attributes, controller, $transclude];\n        this.callNgShowThrough(attributes, controller, arguments2);\n\n        // Die Version mit attributes.$observe funktioniert nicht. Als Wert bekommen wir immer ein string mit dem Namen der Variable, den wir\n        // danach evaluieren muessen. Da dieser String sich nie aendert (sondern eher seine evaluation), wird das observe nie aufgerufen. Mit scope.$watch\n        // funktioniert es weil die Variable immer transcluded wird und somit der Wert aendert sich.\n        scope.$watch(attributes['dvDisplayAllowedRoles'], (newValue: any, oldValue: any, scope: any) => {\n            controller.dvAllowedRoles = newValue;\n        }, true);\n        scope.$watch(attributes['dvDisplayExpression'], (newValue: any, oldValue: any) => {\n            controller.dvExpression = newValue;\n        }, true);\n    }\n\n    /**\n     * Diese Methode darf nur einmal aufgerufen werden.\n     * VORSICHT. Sollte diese Methode X-Mal aufgerufen werden, wird das Element dann X-Mall angezeigt\n     * @param attributes\n     * @param controller\n     * @param arguments2\n     */\n    private callNgShowThrough(attributes: any, controller: DVRoleElementController, arguments2: Array<any>) {\n        attributes.ngShow = () => {\n            return (controller.checkValidity());\n        };\n        this.ngShow.link.apply(this.ngShow, arguments2);\n    }\n\n    static factory(): IDirectiveFactory {\n        const directive = (ngShowDirective: any) => new DVDisplayElement(ngShowDirective);\n        directive.$inject = ['ngShowDirective'];\n        return directive;\n    }\n}\n"]}]}