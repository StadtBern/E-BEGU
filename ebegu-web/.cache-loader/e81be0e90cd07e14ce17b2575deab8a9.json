{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","mtime":1518612532806},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gesuch_1 = require(\"./gesuch\");\nvar TSRoleUtil_1 = require(\"../utils/TSRoleUtil\");\nvar gesuchTpl = require('./gesuch.html');\ngesuchRun.$inject = ['RouterHelper'];\n/* @ngInject */\nfunction gesuchRun(routerHelper) {\n    routerHelper.configureStates(getStates(), '/start');\n}\nexports.gesuchRun = gesuchRun;\n//array mit allen States\nfunction getStates() {\n    return [\n        new EbeguGesuchState(),\n        new EbeguFamiliensituationState(),\n        new EbeguStammdatenState(),\n        new EbeguUmzugState(),\n        new EbeguKinderListState(),\n        new EbeguFinanzielleSituationStartState(),\n        new EbeguFinanzielleSituationState(),\n        new EbeguFinanzielleSituationResultateState(),\n        new EbeguKindState(),\n        new EbeguErwerbspensenListState(),\n        new EbeguErwerbspensumState(),\n        new EbeguBetreuungListState(),\n        new EbeguBetreuungState(),\n        new EbeguAbwesenheitState(),\n        new EbeguNewFallState(),\n        new EbeguMutationState(),\n        new EbeguErneuerungsgesuchState(),\n        new EbeguVerfuegenListState(),\n        new EbeguVerfuegenState(),\n        new EbeguEinkommensverschlechterungInfoState(),\n        new EbeguEinkommensverschlechterungSteuernState(),\n        new EbeguEinkommensverschlechterungState(),\n        new EbeguEinkommensverschlechterungResultateState(),\n        new EbeguDokumenteState(),\n        new EbeguFreigabeState(),\n        new EbeguBetreuungMitteilungState()\n    ];\n}\n//STATES\nvar EbeguGesuchState = /** @class */ (function () {\n    function EbeguGesuchState() {\n        this.name = 'gesuch';\n        this.template = gesuchTpl;\n        this.url = '/gesuch';\n        this.abstract = true;\n        this.controller = gesuch_1.GesuchRouteController;\n        this.controllerAs = 'vm';\n    }\n    return EbeguGesuchState;\n}());\nexports.EbeguGesuchState = EbeguGesuchState;\nvar EbeguNewFallState = /** @class */ (function () {\n    function EbeguNewFallState() {\n        this.name = 'gesuch.fallcreation';\n        this.url = '/fall/:createNew/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<fall-creation-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: reloadGesuchModelManager\n        };\n    }\n    return EbeguNewFallState;\n}());\nexports.EbeguNewFallState = EbeguNewFallState;\nvar EbeguMutationState = /** @class */ (function () {\n    function EbeguMutationState() {\n        this.name = 'gesuch.mutation';\n        this.url = '/mutation/:createMutation/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<fall-creation-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: createEmptyMutation\n        };\n    }\n    return EbeguMutationState;\n}());\nexports.EbeguMutationState = EbeguMutationState;\nvar EbeguErneuerungsgesuchState = /** @class */ (function () {\n    function EbeguErneuerungsgesuchState() {\n        this.name = 'gesuch.erneuerung';\n        this.url = '/erneuerung/:createErneuerung/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<fall-creation-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: createEmptyErneuerungsgesuch\n        };\n    }\n    return EbeguErneuerungsgesuchState;\n}());\nexports.EbeguErneuerungsgesuchState = EbeguErneuerungsgesuchState;\nvar EbeguFamiliensituationState = /** @class */ (function () {\n    function EbeguFamiliensituationState() {\n        this.name = 'gesuch.familiensituation';\n        this.url = '/familiensituation/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<familiensituation-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguFamiliensituationState;\n}());\nexports.EbeguFamiliensituationState = EbeguFamiliensituationState;\nvar EbeguStammdatenState = /** @class */ (function () {\n    function EbeguStammdatenState() {\n        this.name = 'gesuch.stammdaten';\n        this.url = '/stammdaten/:gesuchId/:gesuchstellerNumber';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<stammdaten-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguStammdatenState;\n}());\nexports.EbeguStammdatenState = EbeguStammdatenState;\nvar EbeguUmzugState = /** @class */ (function () {\n    function EbeguUmzugState() {\n        this.name = 'gesuch.umzug';\n        this.url = '/umzug/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<umzug-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguUmzugState;\n}());\nexports.EbeguUmzugState = EbeguUmzugState;\nvar EbeguKinderListState = /** @class */ (function () {\n    function EbeguKinderListState() {\n        this.name = 'gesuch.kinder';\n        this.url = '/kinder/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<kinder-list-view kinder-dubletten=\"$resolve.kinderDubletten\">'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager,\n            kinderDubletten: getKinderDubletten\n        };\n    }\n    return EbeguKinderListState;\n}());\nexports.EbeguKinderListState = EbeguKinderListState;\nvar EbeguKindState = /** @class */ (function () {\n    function EbeguKindState() {\n        this.name = 'gesuch.kind';\n        this.url = '/kinder/kind/:gesuchId/:kindNumber';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<kind-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguKindState;\n}());\nexports.EbeguKindState = EbeguKindState;\nvar EbeguBetreuungListState = /** @class */ (function () {\n    function EbeguBetreuungListState() {\n        this.name = 'gesuch.betreuungen';\n        this.url = '/betreuungen/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<betreuung-list-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguBetreuungListState;\n}());\nexports.EbeguBetreuungListState = EbeguBetreuungListState;\nvar EbeguBetreuungState = /** @class */ (function () {\n    function EbeguBetreuungState() {\n        this.name = 'gesuch.betreuung';\n        this.url = '/betreuungen/betreuung/:gesuchId/:kindNumber/:betreuungNumber/:betreuungsangebotTyp';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<betreuung-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguBetreuungState;\n}());\nexports.EbeguBetreuungState = EbeguBetreuungState;\nvar EbeguAbwesenheitState = /** @class */ (function () {\n    function EbeguAbwesenheitState() {\n        this.name = 'gesuch.abwesenheit';\n        this.url = '/abwesenheit/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<abwesenheit-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguAbwesenheitState;\n}());\nexports.EbeguAbwesenheitState = EbeguAbwesenheitState;\nvar EbeguErwerbspensenListState = /** @class */ (function () {\n    function EbeguErwerbspensenListState() {\n        this.name = 'gesuch.erwerbsPensen';\n        this.url = '/erwerbspensen/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<erwerbspensum-list-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguErwerbspensenListState;\n}());\nexports.EbeguErwerbspensenListState = EbeguErwerbspensenListState;\nvar EbeguErwerbspensumState = /** @class */ (function () {\n    function EbeguErwerbspensumState() {\n        this.name = 'gesuch.erwerbsPensum';\n        this.url = '/erwerbspensen/erwerbspensum/:gesuchId/:gesuchstellerNumber/:erwerbspensumNum';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<erwerbspensum-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguErwerbspensumState;\n}());\nexports.EbeguErwerbspensumState = EbeguErwerbspensumState;\nvar EbeguFinanzielleSituationState = /** @class */ (function () {\n    function EbeguFinanzielleSituationState() {\n        this.name = 'gesuch.finanzielleSituation';\n        this.url = '/finanzielleSituation/:gesuchId/:gesuchstellerNumber';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<finanzielle-situation-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguFinanzielleSituationState;\n}());\nexports.EbeguFinanzielleSituationState = EbeguFinanzielleSituationState;\nvar EbeguFinanzielleSituationStartState = /** @class */ (function () {\n    function EbeguFinanzielleSituationStartState() {\n        this.name = 'gesuch.finanzielleSituationStart';\n        this.url = '/finanzielleSituationStart/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<finanzielle-situation-start-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguFinanzielleSituationStartState;\n}());\nexports.EbeguFinanzielleSituationStartState = EbeguFinanzielleSituationStartState;\nvar EbeguFinanzielleSituationResultateState = /** @class */ (function () {\n    function EbeguFinanzielleSituationResultateState() {\n        this.name = 'gesuch.finanzielleSituationResultate';\n        this.url = '/finanzielleSituationResultate/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<finanzielle-situation-resultate-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguFinanzielleSituationResultateState;\n}());\nexports.EbeguFinanzielleSituationResultateState = EbeguFinanzielleSituationResultateState;\nvar EbeguVerfuegenListState = /** @class */ (function () {\n    function EbeguVerfuegenListState() {\n        this.name = 'gesuch.verfuegen';\n        this.url = '/verfuegen/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<verfuegen-list-view mahnung-list=\"$resolve.mahnungList\">'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager,\n            mahnungList: getMahnungen\n        };\n    }\n    return EbeguVerfuegenListState;\n}());\nexports.EbeguVerfuegenListState = EbeguVerfuegenListState;\nvar EbeguVerfuegenState = /** @class */ (function () {\n    function EbeguVerfuegenState() {\n        this.name = 'gesuch.verfuegenView';\n        this.url = '/verfuegenView/:gesuchId/:betreuungNumber/:kindNumber';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<verfuegen-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguVerfuegenState;\n}());\nexports.EbeguVerfuegenState = EbeguVerfuegenState;\nvar EbeguEinkommensverschlechterungInfoState = /** @class */ (function () {\n    function EbeguEinkommensverschlechterungInfoState() {\n        this.name = 'gesuch.einkommensverschlechterungInfo';\n        this.url = '/einkommensverschlechterungInfo/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<einkommensverschlechterung-info-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguEinkommensverschlechterungInfoState;\n}());\nexports.EbeguEinkommensverschlechterungInfoState = EbeguEinkommensverschlechterungInfoState;\nvar EbeguEinkommensverschlechterungSteuernState = /** @class */ (function () {\n    function EbeguEinkommensverschlechterungSteuernState() {\n        this.name = 'gesuch.einkommensverschlechterungSteuern';\n        this.url = '/einkommensverschlechterungSteuern/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<einkommensverschlechterung-steuern-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguEinkommensverschlechterungSteuernState;\n}());\nexports.EbeguEinkommensverschlechterungSteuernState = EbeguEinkommensverschlechterungSteuernState;\nvar EbeguEinkommensverschlechterungState = /** @class */ (function () {\n    function EbeguEinkommensverschlechterungState() {\n        this.name = 'gesuch.einkommensverschlechterung';\n        this.url = '/einkommensverschlechterung/:gesuchId/:gesuchstellerNumber/:basisjahrPlus';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<einkommensverschlechterung-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguEinkommensverschlechterungState;\n}());\nexports.EbeguEinkommensverschlechterungState = EbeguEinkommensverschlechterungState;\nvar EbeguEinkommensverschlechterungResultateState = /** @class */ (function () {\n    function EbeguEinkommensverschlechterungResultateState() {\n        this.name = 'gesuch.einkommensverschlechterungResultate';\n        this.url = '/einkommensverschlechterungResultate/:gesuchId/:basisjahrPlus';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<einkommensverschlechterung-resultate-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguEinkommensverschlechterungResultateState;\n}());\nexports.EbeguEinkommensverschlechterungResultateState = EbeguEinkommensverschlechterungResultateState;\nvar EbeguDokumenteState = /** @class */ (function () {\n    function EbeguDokumenteState() {\n        this.name = 'gesuch.dokumente';\n        this.url = '/dokumente/:gesuchId/:gesuchstellerNumber';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<dokumente-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguDokumenteState;\n}());\nexports.EbeguDokumenteState = EbeguDokumenteState;\nvar EbeguFreigabeState = /** @class */ (function () {\n    function EbeguFreigabeState() {\n        this.name = 'gesuch.freigabe';\n        this.url = '/freigabe/:gesuchId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<freigabe-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguFreigabeState;\n}());\nexports.EbeguFreigabeState = EbeguFreigabeState;\nvar EbeguBetreuungMitteilungState = /** @class */ (function () {\n    function EbeguBetreuungMitteilungState() {\n        this.name = 'gesuch.mitteilung';\n        this.url = '/mitteilung/:fallId/:gesuchId/:betreuungId/:mitteilungId';\n        this.views = {\n            'gesuchViewPort': {\n                template: '<betreuung-mitteilung-view>'\n            },\n            'kommentarViewPort': {\n                template: '<kommentar-view>'\n            }\n        };\n        this.resolve = {\n            gesuch: getGesuchModelManager\n        };\n    }\n    return EbeguBetreuungMitteilungState;\n}());\nexports.EbeguBetreuungMitteilungState = EbeguBetreuungMitteilungState;\n//PARAMS\nvar IGesuchStateParams = /** @class */ (function () {\n    function IGesuchStateParams() {\n    }\n    return IGesuchStateParams;\n}());\nexports.IGesuchStateParams = IGesuchStateParams;\nvar IStammdatenStateParams = /** @class */ (function () {\n    function IStammdatenStateParams() {\n    }\n    return IStammdatenStateParams;\n}());\nexports.IStammdatenStateParams = IStammdatenStateParams;\nvar IKindStateParams = /** @class */ (function () {\n    function IKindStateParams() {\n    }\n    return IKindStateParams;\n}());\nexports.IKindStateParams = IKindStateParams;\nvar IBetreuungStateParams = /** @class */ (function () {\n    function IBetreuungStateParams() {\n    }\n    return IBetreuungStateParams;\n}());\nexports.IBetreuungStateParams = IBetreuungStateParams;\nvar INewFallStateParams = /** @class */ (function () {\n    function INewFallStateParams() {\n    }\n    return INewFallStateParams;\n}());\nexports.INewFallStateParams = INewFallStateParams;\nvar IErwerbspensumStateParams = /** @class */ (function () {\n    function IErwerbspensumStateParams() {\n    }\n    return IErwerbspensumStateParams;\n}());\nexports.IErwerbspensumStateParams = IErwerbspensumStateParams;\nvar IEinkommensverschlechterungStateParams = /** @class */ (function () {\n    function IEinkommensverschlechterungStateParams() {\n    }\n    return IEinkommensverschlechterungStateParams;\n}());\nexports.IEinkommensverschlechterungStateParams = IEinkommensverschlechterungStateParams;\nvar IEinkommensverschlechterungResultateStateParams = /** @class */ (function () {\n    function IEinkommensverschlechterungResultateStateParams() {\n    }\n    return IEinkommensverschlechterungResultateStateParams;\n}());\nexports.IEinkommensverschlechterungResultateStateParams = IEinkommensverschlechterungResultateStateParams;\n// FIXME dieses $inject wird ignoriert, d.h, der Parameter der Funktion muss exact dem Namen des Services entsprechen (Grossbuchstaben am Anfang). Warum?\ngetMahnungen.$inject = ['MahnungRS', '$stateParams', '$q', '$log'];\n/* @ngInject */\nfunction getMahnungen(MahnungRS, $stateParams, $q, $log) {\n    // return [];\n    if ($stateParams) {\n        var gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            return MahnungRS.findMahnungen(gesuchIdParam);\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    var deferred = $q.defer();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\nexports.getMahnungen = getMahnungen;\ngetGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n/* @ngInject */\nfunction getGesuchModelManager(gesuchModelManager, berechnungsManager, wizardStepManager, $stateParams, $q, $log) {\n    if ($stateParams) {\n        var gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            if (!gesuchModelManager.getGesuch() || gesuchModelManager.getGesuch() && gesuchModelManager.getGesuch().id !== gesuchIdParam\n                || gesuchModelManager.getGesuch().emptyCopy) {\n                // Wenn die antrags id im GescuchModelManager nicht mit der GesuchId ueberreinstimmt wird das gesuch neu geladen\n                // Ebenfalls soll das Gesuch immer neu geladen werden, wenn es sich beim Gesuch im Gesuchmodelmanager um eine leere Mutation handelt\n                // oder um ein leeres Erneuerungsgesuch\n                berechnungsManager.clear();\n                return gesuchModelManager.openGesuch(gesuchIdParam);\n            }\n            else {\n                var deferred_1 = $q.defer();\n                deferred_1.resolve(gesuchModelManager.getGesuch());\n                return deferred_1.promise;\n            }\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    var deferred = $q.defer();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\nexports.getGesuchModelManager = getGesuchModelManager;\nreloadGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n/* @ngInject */\nfunction reloadGesuchModelManager(gesuchModelManager, berechnungsManager, wizardStepManager, $stateParams, $q, $log) {\n    if ($stateParams) {\n        if ($stateParams.createNew !== 'true') {\n            var gesuchIdParam = $stateParams.gesuchId;\n            if (!gesuchIdParam) {\n                $log.error('opened fallCreation without gesuchId parameter in edit mode', $stateParams);\n            }\n            berechnungsManager.clear();\n            return gesuchModelManager.openGesuch(gesuchIdParam);\n        }\n        else {\n            var eingangsart = $stateParams.eingangsart;\n            var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n            var fallId = $stateParams.fallId;\n            //initialize gesuch\n            return gesuchModelManager.initGesuchWithEingangsart(true, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    $log.warn('no state params available fo page fallCreation, this is probably a bug');\n    return $q.defer(gesuchModelManager.getGesuch());\n}\nexports.reloadGesuchModelManager = reloadGesuchModelManager;\ngetKinderDubletten.$inject = ['$stateParams', '$q', '$log', 'KindRS', 'AuthServiceRS'];\n/* @ngInject */\n// Die Kinderdubletten werden nur für SCH-Mitarbeiter oder JA-Mitarbeiter (inkl. Revisor und Jurist) angezeigt\nfunction getKinderDubletten($stateParams, $q, $log, KindRS, authService) {\n    var isUserAllowed = authService.isOneOfRoles(TSRoleUtil_1.TSRoleUtil.getJugendamtAndSchulamtRole());\n    if (isUserAllowed && $stateParams && $stateParams.gesuchId) {\n        var gesuchIdParam = $stateParams.gesuchId;\n        return KindRS.getKindDubletten(gesuchIdParam);\n    }\n    var deferred = $q.defer();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\nexports.getKinderDubletten = getKinderDubletten;\ncreateEmptyMutation.$inject = ['GesuchModelManager', '$stateParams', '$q'];\nfunction createEmptyMutation(gesuchModelManager, $stateParams, $q) {\n    if ($stateParams) {\n        var gesuchId = $stateParams.gesuchId;\n        var eingangsart = $stateParams.eingangsart;\n        var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        var fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initMutation(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\nexports.createEmptyMutation = createEmptyMutation;\ncreateEmptyErneuerungsgesuch.$inject = ['GesuchModelManager', '$stateParams', '$q'];\nfunction createEmptyErneuerungsgesuch(gesuchModelManager, $stateParams, $q) {\n    if ($stateParams) {\n        var gesuchId = $stateParams.gesuchId;\n        var eingangsart = $stateParams.eingangsart;\n        var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        var fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initErneuerungsgesuch(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\nexports.createEmptyErneuerungsgesuch = createEmptyErneuerungsgesuch;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {RouterHelper} from '../dvbModules/router/route-helper-provider';\nimport {IState, IStateParamsService} from 'angular-ui-router';\nimport {GesuchRouteController} from './gesuch';\nimport GesuchModelManager from './service/gesuchModelManager';\nimport TSGesuch from '../models/TSGesuch';\nimport BerechnungsManager from './service/berechnungsManager';\nimport WizardStepManager from './service/wizardStepManager';\nimport MahnungRS from './service/mahnungRS.rest';\nimport {TSEingangsart} from '../models/enums/TSEingangsart';\nimport KindRS from '../core/service/kindRS.rest';\nimport AuthServiceRS from '../authentication/service/AuthServiceRS.rest';\nimport {TSRoleUtil} from '../utils/TSRoleUtil';\nimport TSMahnung from '../models/TSMahnung';\nimport TSKindDublette from '../models/TSKindDublette';\nimport IPromise = angular.IPromise;\nimport IQService = angular.IQService;\nimport ILogService = angular.ILogService;\n\nlet gesuchTpl = require('./gesuch.html');\n\ngesuchRun.$inject = ['RouterHelper'];\n\n/* @ngInject */\nexport function gesuchRun(routerHelper: RouterHelper) {\n    routerHelper.configureStates(getStates(), '/start');\n}\n\n//array mit allen States\nfunction getStates(): IState[] {\n    return [\n        new EbeguGesuchState(),\n        new EbeguFamiliensituationState(),\n        new EbeguStammdatenState(),\n        new EbeguUmzugState(),\n        new EbeguKinderListState(),\n        new EbeguFinanzielleSituationStartState(),\n        new EbeguFinanzielleSituationState(),\n        new EbeguFinanzielleSituationResultateState(),\n        new EbeguKindState(),\n        new EbeguErwerbspensenListState(),\n        new EbeguErwerbspensumState(),\n        new EbeguBetreuungListState(),\n        new EbeguBetreuungState(),\n        new EbeguAbwesenheitState(),\n        new EbeguNewFallState(),\n        new EbeguMutationState(),\n        new EbeguErneuerungsgesuchState(),\n        new EbeguVerfuegenListState(),\n        new EbeguVerfuegenState(),\n        new EbeguEinkommensverschlechterungInfoState(),\n        new EbeguEinkommensverschlechterungSteuernState(),\n        new EbeguEinkommensverschlechterungState(),\n        new EbeguEinkommensverschlechterungResultateState(),\n        new EbeguDokumenteState(),\n        new EbeguFreigabeState(),\n        new EbeguBetreuungMitteilungState()\n    ];\n}\n\n//STATES\n\nexport class EbeguGesuchState implements IState {\n    name = 'gesuch';\n    template = gesuchTpl;\n    url = '/gesuch';\n    abstract = true;\n    controller = GesuchRouteController;\n    controllerAs = 'vm';\n}\n\nexport class EbeguNewFallState implements IState {\n    name = 'gesuch.fallcreation';\n    url = '/fall/:createNew/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: reloadGesuchModelManager\n    };\n}\n\nexport class EbeguMutationState implements IState {\n    name = 'gesuch.mutation';\n    url = '/mutation/:createMutation/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: createEmptyMutation\n    };\n}\n\nexport class EbeguErneuerungsgesuchState implements IState {\n    name = 'gesuch.erneuerung';\n    url = '/erneuerung/:createErneuerung/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: createEmptyErneuerungsgesuch\n    };\n}\n\nexport class EbeguFamiliensituationState implements IState {\n    name = 'gesuch.familiensituation';\n    url = '/familiensituation/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<familiensituation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguStammdatenState implements IState {\n    name = 'gesuch.stammdaten';\n    url = '/stammdaten/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<stammdaten-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguUmzugState implements IState {\n    name = 'gesuch.umzug';\n    url = '/umzug/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<umzug-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguKinderListState implements IState {\n    name = 'gesuch.kinder';\n    url = '/kinder/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<kinder-list-view kinder-dubletten=\"$resolve.kinderDubletten\">'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager,\n        kinderDubletten: getKinderDubletten\n    };\n}\n\nexport class EbeguKindState implements IState {\n    name = 'gesuch.kind';\n    url = '/kinder/kind/:gesuchId/:kindNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<kind-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungListState implements IState {\n    name = 'gesuch.betreuungen';\n    url = '/betreuungen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-list-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungState implements IState {\n    name = 'gesuch.betreuung';\n    url = '/betreuungen/betreuung/:gesuchId/:kindNumber/:betreuungNumber/:betreuungsangebotTyp';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguAbwesenheitState implements IState {\n    name = 'gesuch.abwesenheit';\n    url = '/abwesenheit/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<abwesenheit-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguErwerbspensenListState implements IState {\n    name = 'gesuch.erwerbsPensen';\n    url = '/erwerbspensen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<erwerbspensum-list-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguErwerbspensumState implements IState {\n    name = 'gesuch.erwerbsPensum';\n    url = '/erwerbspensen/erwerbspensum/:gesuchId/:gesuchstellerNumber/:erwerbspensumNum';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<erwerbspensum-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationState implements IState {\n    name = 'gesuch.finanzielleSituation';\n    url = '/finanzielleSituation/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationStartState implements IState {\n    name = 'gesuch.finanzielleSituationStart';\n    url = '/finanzielleSituationStart/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-start-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationResultateState implements IState {\n    name = 'gesuch.finanzielleSituationResultate';\n    url = '/finanzielleSituationResultate/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-resultate-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguVerfuegenListState implements IState {\n    name = 'gesuch.verfuegen';\n    url = '/verfuegen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<verfuegen-list-view mahnung-list=\"$resolve.mahnungList\">'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager,\n        mahnungList: getMahnungen\n    };\n}\n\nexport class EbeguVerfuegenState implements IState {\n    name = 'gesuch.verfuegenView';\n    url = '/verfuegenView/:gesuchId/:betreuungNumber/:kindNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<verfuegen-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungInfoState implements IState {\n    name = 'gesuch.einkommensverschlechterungInfo';\n    url = '/einkommensverschlechterungInfo/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-info-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungSteuernState implements IState {\n    name = 'gesuch.einkommensverschlechterungSteuern';\n    url = '/einkommensverschlechterungSteuern/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-steuern-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungState implements IState {\n    name = 'gesuch.einkommensverschlechterung';\n    url = '/einkommensverschlechterung/:gesuchId/:gesuchstellerNumber/:basisjahrPlus';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungResultateState implements IState {\n    name = 'gesuch.einkommensverschlechterungResultate';\n    url = '/einkommensverschlechterungResultate/:gesuchId/:basisjahrPlus';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-resultate-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguDokumenteState implements IState {\n    name = 'gesuch.dokumente';\n    url = '/dokumente/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<dokumente-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFreigabeState implements IState {\n    name = 'gesuch.freigabe';\n    url = '/freigabe/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<freigabe-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungMitteilungState implements IState {\n    name = 'gesuch.mitteilung';\n    url = '/mitteilung/:fallId/:gesuchId/:betreuungId/:mitteilungId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-mitteilung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\n//PARAMS\n\nexport class IGesuchStateParams implements IStateParamsService {\n    gesuchId: string;\n}\n\nexport class IStammdatenStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n}\n\nexport class IKindStateParams implements IStateParamsService {\n    kindNumber: string;\n}\n\nexport class IBetreuungStateParams implements IStateParamsService {\n    betreuungNumber: string;\n    kindNumber: string;\n    betreuungsangebotTyp: string;\n}\n\nexport class INewFallStateParams implements IStateParamsService {\n    createNew: string;\n    createMutation: string;\n    eingangsart: TSEingangsart;\n    gesuchsperiodeId: string;\n    gesuchId: string;\n    fallId: string;\n}\n\nexport class IErwerbspensumStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n    erwerbspensumNum: string;\n}\n\nexport class IEinkommensverschlechterungStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n    basisjahrPlus: string;\n}\n\nexport class IEinkommensverschlechterungResultateStateParams implements IStateParamsService {\n    basisjahrPlus: string;\n}\n\n// FIXME dieses $inject wird ignoriert, d.h, der Parameter der Funktion muss exact dem Namen des Services entsprechen (Grossbuchstaben am Anfang). Warum?\ngetMahnungen.$inject = ['MahnungRS', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function getMahnungen(MahnungRS: MahnungRS, $stateParams: IGesuchStateParams, $q: IQService, $log: ILogService) {\n    // return [];\n    if ($stateParams) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            return MahnungRS.findMahnungen(gesuchIdParam);\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    let deferred = $q.defer<TSMahnung[]>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\ngetGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function getGesuchModelManager(gesuchModelManager: GesuchModelManager, berechnungsManager: BerechnungsManager,\n                                      wizardStepManager: WizardStepManager, $stateParams: IGesuchStateParams, $q: IQService,\n                                      $log: ILogService): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            if (!gesuchModelManager.getGesuch() || gesuchModelManager.getGesuch() && gesuchModelManager.getGesuch().id !== gesuchIdParam\n                || gesuchModelManager.getGesuch().emptyCopy) {\n                // Wenn die antrags id im GescuchModelManager nicht mit der GesuchId ueberreinstimmt wird das gesuch neu geladen\n                // Ebenfalls soll das Gesuch immer neu geladen werden, wenn es sich beim Gesuch im Gesuchmodelmanager um eine leere Mutation handelt\n                // oder um ein leeres Erneuerungsgesuch\n                berechnungsManager.clear();\n                return gesuchModelManager.openGesuch(gesuchIdParam);\n            } else {\n                let deferred = $q.defer<TSGesuch>();\n                deferred.resolve(gesuchModelManager.getGesuch());\n                return deferred.promise;\n            }\n\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    let deferred = $q.defer<TSGesuch>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\nreloadGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function reloadGesuchModelManager(gesuchModelManager: GesuchModelManager, berechnungsManager: BerechnungsManager,\n                                         wizardStepManager: WizardStepManager, $stateParams: INewFallStateParams, $q: any,\n                                         $log: ILogService): IPromise<TSGesuch> {\n    if ($stateParams) {\n        if ($stateParams.createNew !== 'true') {\n            let gesuchIdParam = $stateParams.gesuchId;\n            if (!gesuchIdParam) {\n                $log.error('opened fallCreation without gesuchId parameter in edit mode', $stateParams);\n            }\n            berechnungsManager.clear();\n            return gesuchModelManager.openGesuch(gesuchIdParam);\n        } else {\n            let eingangsart = $stateParams.eingangsart;\n            let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n            let fallId = $stateParams.fallId;\n            //initialize gesuch\n            return gesuchModelManager.initGesuchWithEingangsart(true, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    $log.warn('no state params available fo page fallCreation, this is probably a bug');\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n\ngetKinderDubletten.$inject = ['$stateParams', '$q', '$log', 'KindRS', 'AuthServiceRS'];\n/* @ngInject */\n\n// Die Kinderdubletten werden nur für SCH-Mitarbeiter oder JA-Mitarbeiter (inkl. Revisor und Jurist) angezeigt\nexport function getKinderDubletten($stateParams: IGesuchStateParams, $q: IQService, $log: ILogService, KindRS: KindRS, authService: AuthServiceRS) {\n    let isUserAllowed: boolean = authService.isOneOfRoles(TSRoleUtil.getJugendamtAndSchulamtRole());\n    if (isUserAllowed && $stateParams && $stateParams.gesuchId) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        return KindRS.getKindDubletten(gesuchIdParam);\n    }\n    let deferred = $q.defer<TSKindDublette[]>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\ncreateEmptyMutation.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n\nexport function createEmptyMutation(gesuchModelManager: GesuchModelManager, $stateParams: INewFallStateParams, $q: any): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchId = $stateParams.gesuchId;\n        let eingangsart = $stateParams.eingangsart;\n        let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        let fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initMutation(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n\ncreateEmptyErneuerungsgesuch.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n\nexport function createEmptyErneuerungsgesuch(gesuchModelManager: GesuchModelManager, $stateParams: INewFallStateParams, $q: any): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchId = $stateParams.gesuchId;\n        let eingangsart = $stateParams.eingangsart;\n        let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        let fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initErneuerungsgesuch(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n"]}]}