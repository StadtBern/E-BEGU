{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-suppress-form-submit-on-enter/dv-suppress-form-submit-on-enter.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-suppress-form-submit-on-enter/dv-suppress-form-submit-on-enter.ts","mtime":1512484412007},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * This directive is a hack to suppress the enter handler that is defined by angular-material on the md-radio-group.\n * It is a problem because in our case we rely on angular behaving as described in\n * https://docs.angularjs.org/api/ng/directive/form where it specifically says if there are buttons with\n * type=submit in a form they should be triggered on enter.\n * Since the radio-group component does not do this and triggers a form submitt event instead we have to\n * work-around that prevents this. (Otherwise the unsavedChanges plugin sets the form back to pristine which is wrong since no save\n * was triggered).\n *\n * See also https://github.com/angular/material/issues/577\n *\n * @see EBEGU-897\n */\nvar DVSuppressFormSubmitOnEnter = /** @class */ (function () {\n    /* @ngInject */\n    function DVSuppressFormSubmitOnEnter() {\n        this.restrict = 'A';\n        this.priority = -400;\n        this.controller = DVSuppressFormSubmitOnEnterController;\n        this.require = { mdRadioGroupCtrl: 'mdRadioGroup', myCtrl: 'dvSuppressFormSubmitOnEnter' };\n        this.link = function (scope, element, attrs, controllers) {\n            controllers['myCtrl'].mdRadioGroupCtrl = controllers.mdRadioGroupCtrl;\n            element.off('keydown'); //alle keydown listener auf dem element abhaengen\n            element.bind('keydown', function (event) {\n                controllers.myCtrl.keydownListener(event, element);\n            });\n        };\n    }\n    DVSuppressFormSubmitOnEnter.factory = function () {\n        var directive = function () { return new DVSuppressFormSubmitOnEnter(); };\n        return directive;\n    };\n    DVSuppressFormSubmitOnEnter.$inject = [];\n    return DVSuppressFormSubmitOnEnter;\n}());\nexports.default = DVSuppressFormSubmitOnEnter;\n/**\n * Direktive  die verhindert dass das form submitted wird wenn man enter drueckt auf einem radio-button\n */\nvar DVSuppressFormSubmitOnEnterController = /** @class */ (function () {\n    /* @ngInject */\n    function DVSuppressFormSubmitOnEnterController($mdConstant, $mdUtil, $log) {\n        this.$mdConstant = $mdConstant;\n        this.$mdUtil = $mdUtil;\n        this.$log = $log;\n    }\n    DVSuppressFormSubmitOnEnterController.prototype.keydownListener = function (ev, element) {\n        var keyCode = ev.which || ev.keyCode;\n        // Only listen to events that we originated ourselves\n        // so that we don't trigger on things like arrow keys in\n        // inputs.\n        // tslint:disable\n        if (keyCode != this.$mdConstant.KEY_CODE.ENTER &&\n            ev.currentTarget != ev.target) {\n            return;\n        }\n        // tslint:enable\n        switch (keyCode) {\n            case this.$mdConstant.KEY_CODE.LEFT_ARROW:\n            case this.$mdConstant.KEY_CODE.UP_ARROW:\n                ev.preventDefault();\n                this.mdRadioGroupCtrl.selectPrevious();\n                this.setFocus(element);\n                break;\n            case this.$mdConstant.KEY_CODE.RIGHT_ARROW:\n            case this.$mdConstant.KEY_CODE.DOWN_ARROW:\n                ev.preventDefault();\n                this.mdRadioGroupCtrl.selectNext();\n                this.setFocus(element);\n                break;\n            case this.$mdConstant.KEY_CODE.ENTER:\n                // event.stopPropagation();    //we do not want to submit the form on enter\n                // event.preventDefault();\n                this.triggerNextButton(element);\n                break;\n        }\n    };\n    DVSuppressFormSubmitOnEnterController.prototype.setFocus = function (element) {\n        if (!element.hasClass('md-focused')) {\n            element.addClass('md-focused');\n        }\n    };\n    DVSuppressFormSubmitOnEnterController.prototype.triggerNextButton = function (element) {\n        var nextButtons;\n        var formElement = angular.element(this.$mdUtil.getClosest(element[0], 'form'));\n        if (formElement) {\n            nextButtons = formElement.children().find('input[type=\"submit\"], button[type=\"submit\"]');\n            if (nextButtons) {\n                nextButtons.first().click();\n            }\n            else {\n                this.$log.debug('no \".next\" button found to click on enter');\n            }\n        }\n    };\n    DVSuppressFormSubmitOnEnterController.$inject = ['$mdConstant', '$mdUtil', '$log'];\n    return DVSuppressFormSubmitOnEnterController;\n}());\nexports.DVSuppressFormSubmitOnEnterController = DVSuppressFormSubmitOnEnterController;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-suppress-form-submit-on-enter/dv-suppress-form-submit-on-enter.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/core/directive/dv-suppress-form-submit-on-enter/dv-suppress-form-submit-on-enter.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IAttributes, IAugmentedJQuery, IDirective, IDirectiveFactory, IDirectiveLinkFn, ILogService, IScope} from 'angular';\n\n/**\n * This directive is a hack to suppress the enter handler that is defined by angular-material on the md-radio-group.\n * It is a problem because in our case we rely on angular behaving as described in\n * https://docs.angularjs.org/api/ng/directive/form where it specifically says if there are buttons with\n * type=submit in a form they should be triggered on enter.\n * Since the radio-group component does not do this and triggers a form submitt event instead we have to\n * work-around that prevents this. (Otherwise the unsavedChanges plugin sets the form back to pristine which is wrong since no save\n * was triggered).\n *\n * See also https://github.com/angular/material/issues/577\n *\n * @see EBEGU-897\n */\nexport default class DVSuppressFormSubmitOnEnter implements IDirective {\n    static $inject: string[] = [];\n\n    restrict = 'A';\n    link: IDirectiveLinkFn;\n    priority = -400;\n    controller = DVSuppressFormSubmitOnEnterController;\n    require: any = {mdRadioGroupCtrl: 'mdRadioGroup', myCtrl: 'dvSuppressFormSubmitOnEnter'};\n\n    /* @ngInject */\n    constructor() {\n        this.link = (scope: IScope, element: IAugmentedJQuery, attrs: IAttributes, controllers: any) => {\n            controllers['myCtrl'].mdRadioGroupCtrl = controllers.mdRadioGroupCtrl;\n            element.off('keydown'); //alle keydown listener auf dem element abhaengen\n            element.bind('keydown', (event) => { //unseren eigenen listener definieren\n                controllers.myCtrl.keydownListener(event, element);\n\n            });\n        };\n    }\n\n    static factory(): IDirectiveFactory {\n        const directive = () => new DVSuppressFormSubmitOnEnter();\n        return directive;\n    }\n}\n\n/**\n * Direktive  die verhindert dass das form submitted wird wenn man enter drueckt auf einem radio-button\n */\nexport class DVSuppressFormSubmitOnEnterController {\n\n    mdRadioGroupCtrl: any; //see radioButton.js of angular material: mdRadioGroup\n\n    static $inject: string[] = ['$mdConstant', '$mdUtil', '$log'];\n    /* @ngInject */\n    constructor(private $mdConstant: any, private $mdUtil: any, private $log: ILogService) {\n\n    }\n\n    keydownListener(ev: any, element: IAugmentedJQuery) {\n        let keyCode = ev.which || ev.keyCode;\n\n        // Only listen to events that we originated ourselves\n        // so that we don't trigger on things like arrow keys in\n        // inputs.\n\n        // tslint:disable\n        if (keyCode != this.$mdConstant.KEY_CODE.ENTER &&\n            ev.currentTarget != ev.target) {\n            return;\n        }\n        // tslint:enable\n\n        switch (keyCode) {\n            case this.$mdConstant.KEY_CODE.LEFT_ARROW:\n            case this.$mdConstant.KEY_CODE.UP_ARROW:\n                ev.preventDefault();\n                this.mdRadioGroupCtrl.selectPrevious();\n                this.setFocus(element);\n                break;\n\n            case this.$mdConstant.KEY_CODE.RIGHT_ARROW:\n            case this.$mdConstant.KEY_CODE.DOWN_ARROW:\n                ev.preventDefault();\n                this.mdRadioGroupCtrl.selectNext();\n                this.setFocus(element);\n                break;\n            case this.$mdConstant.KEY_CODE.ENTER:\n                // event.stopPropagation();    //we do not want to submit the form on enter\n                // event.preventDefault();\n                this.triggerNextButton(element);\n                break;\n        }\n    }\n\n    private setFocus(element: IAugmentedJQuery) {\n        if (!element.hasClass('md-focused')) {\n            element.addClass('md-focused');\n        }\n    }\n\n    private triggerNextButton(element: IAugmentedJQuery) {\n        let nextButtons: IAugmentedJQuery;\n        let formElement: IAugmentedJQuery = angular.element(this.$mdUtil.getClosest(element[0], 'form'));\n        if (formElement) {\n            nextButtons = formElement.children().find('input[type=\"submit\"], button[type=\"submit\"]');\n            if (nextButtons) {\n                nextButtons.first().click();\n            } else {\n                this.$log.debug('no \".next\" button found to click on enter');\n            }\n        }\n\n    }\n}\n\n"]}]}