{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/authentication/schulung.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/authentication/schulung.ts","mtime":1512484411995},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TSUser_1 = require(\"../models/TSUser\");\nvar TSRole_1 = require(\"../models/enums/TSRole\");\nvar TSMandant_1 = require(\"../models/TSMandant\");\nvar TSInstitution_1 = require(\"../models/TSInstitution\");\nvar TSTraegerschaft_1 = require(\"../models/TSTraegerschaft\");\nvar AuthenticationUtil_1 = require(\"../utils/AuthenticationUtil\");\nvar template = require('./schulung.html');\nrequire('./schulung.less');\nvar SchulungComponentConfig = /** @class */ (function () {\n    function SchulungComponentConfig() {\n        this.transclude = false;\n        this.template = template;\n        this.controller = SchulungViewController;\n        this.controllerAs = 'vm';\n    }\n    return SchulungComponentConfig;\n}());\nexports.SchulungComponentConfig = SchulungComponentConfig;\nvar SchulungViewController = /** @class */ (function () {\n    function SchulungViewController($state, authServiceRS, $timeout, testFaelleRS) {\n        var _this = this;\n        this.$state = $state;\n        this.authServiceRS = authServiceRS;\n        this.$timeout = $timeout;\n        this.testFaelleRS = testFaelleRS;\n        this.usersList = Array();\n        this.institutionsuserList = Array();\n        this.mandant = this.getMandant();\n        this.traegerschaftFisch = this.getTraegerschaftFisch();\n        this.institutionForelle = this.getInstitutionForelle();\n        this.testFaelleRS.getSchulungBenutzer().then(function (response) {\n            _this.gesuchstellerList = response;\n            for (var i = 0; i < _this.gesuchstellerList.length; i++) {\n                var name = _this.gesuchstellerList[i];\n                var username = 'sch' + (((i + 1) < 10) ? '0' + (i + 1).toString() : (i + 1).toString());\n                _this.usersList.push(new TSUser_1.default('Sandra', name, username, 'password1', 'sandra.' + name.toLocaleLowerCase() + '@mailinator.com', _this.mandant, TSRole_1.TSRole.GESUCHSTELLER));\n            }\n            _this.institutionsuserList.push(new TSUser_1.default('Fritz', 'Fisch', 'sch20', 'password1', 'fritz.fisch@mailinator.com', _this.mandant, TSRole_1.TSRole.SACHBEARBEITER_TRAEGERSCHAFT, _this.traegerschaftFisch, undefined));\n            _this.institutionsuserList.push(new TSUser_1.default('Franz', 'Forelle', 'sch21', 'password1', 'franz.forelle@mailinator.com', _this.mandant, TSRole_1.TSRole.SACHBEARBEITER_INSTITUTION, undefined, _this.institutionForelle));\n        });\n    }\n    /**\n     * Der Mandant wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     * @returns {TSMandant}\n     */\n    SchulungViewController.prototype.getMandant = function () {\n        var mandant = new TSMandant_1.TSMandant();\n        mandant.name = 'TestMandant';\n        mandant.id = 'e3736eb8-6eef-40ef-9e52-96ab48d8f220';\n        return mandant;\n    };\n    /**\n     * Die Traegerschaft wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     */\n    SchulungViewController.prototype.getTraegerschaftFisch = function () {\n        var traegerschaft = new TSTraegerschaft_1.TSTraegerschaft();\n        traegerschaft.name = 'Fisch';\n        traegerschaft.mail = 'fisch@mailinator.com';\n        traegerschaft.id = '11111111-1111-1111-1111-111111111111';\n        return traegerschaft;\n    };\n    /**\n     * Die Institution wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     */\n    SchulungViewController.prototype.getInstitutionForelle = function () {\n        var institution = new TSInstitution_1.default();\n        institution.name = 'Forelle';\n        institution.id = '22222222-1111-1111-1111-111111111111';\n        institution.mail = 'forelle@mailinator.com';\n        institution.traegerschaft = this.traegerschaftFisch;\n        institution.mandant = this.mandant;\n        return institution;\n    };\n    SchulungViewController.prototype.logIn = function (user) {\n        var _this = this;\n        this.authServiceRS.loginRequest(user).then(function () {\n            AuthenticationUtil_1.default.navigateToStartPageForRole(user, _this.$state);\n        });\n    };\n    SchulungViewController.$inject = ['$state', 'AuthServiceRS', '$timeout', 'TestFaelleRS'];\n    return SchulungViewController;\n}());\nexports.SchulungViewController = SchulungViewController;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/authentication/schulung.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/authentication/schulung.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {IComponentOptions} from 'angular';\nimport TSUser from '../models/TSUser';\nimport {TSRole} from '../models/enums/TSRole';\nimport {IStateService} from 'angular-ui-router';\nimport AuthServiceRS from './service/AuthServiceRS.rest';\nimport {TSMandant} from '../models/TSMandant';\nimport TSInstitution from '../models/TSInstitution';\nimport {TSTraegerschaft} from '../models/TSTraegerschaft';\nimport AuthenticationUtil from '../utils/AuthenticationUtil';\nimport {TestFaelleRS} from '../admin/service/testFaelleRS.rest';\nimport ITimeoutService = angular.ITimeoutService;\n\nlet template = require('./schulung.html');\nrequire('./schulung.less');\n\nexport class SchulungComponentConfig implements IComponentOptions {\n    transclude = false;\n    template = template;\n    controller = SchulungViewController;\n    controllerAs = 'vm';\n}\n\nexport class SchulungViewController {\n\n    public usersList: Array<TSUser> = Array<TSUser>();\n    private gesuchstellerList: string[];\n    private institutionsuserList: Array<TSUser> = Array<TSUser>();\n    private mandant: TSMandant;\n    private institutionForelle: TSInstitution;\n    private traegerschaftFisch: TSTraegerschaft;\n\n    static $inject: string[] = ['$state', 'AuthServiceRS', '$timeout', 'TestFaelleRS'];\n\n    constructor(private $state: IStateService, private authServiceRS: AuthServiceRS,\n                private $timeout: ITimeoutService,\n                private testFaelleRS: TestFaelleRS) {\n\n        this.mandant = this.getMandant();\n        this.traegerschaftFisch = this.getTraegerschaftFisch();\n        this.institutionForelle = this.getInstitutionForelle();\n        this.testFaelleRS.getSchulungBenutzer().then((response: any) => {\n            this.gesuchstellerList = response;\n            for (let i = 0; i < this.gesuchstellerList.length; i++) {\n                let name = this.gesuchstellerList[i];\n                let username = 'sch' + (((i + 1) < 10) ? '0' + (i + 1).toString() : (i + 1).toString());\n                this.usersList.push(new TSUser('Sandra', name, username, 'password1', 'sandra.' + name.toLocaleLowerCase() + '@mailinator.com', this.mandant, TSRole.GESUCHSTELLER));\n            }\n\n            this.institutionsuserList.push(new TSUser('Fritz', 'Fisch', 'sch20', 'password1', 'fritz.fisch@mailinator.com',\n                this.mandant, TSRole.SACHBEARBEITER_TRAEGERSCHAFT, this.traegerschaftFisch, undefined));\n            this.institutionsuserList.push(new TSUser('Franz', 'Forelle', 'sch21', 'password1', 'franz.forelle@mailinator.com',\n                this.mandant, TSRole.SACHBEARBEITER_INSTITUTION, undefined, this.institutionForelle));\n        });\n    }\n\n    /**\n     * Der Mandant wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     * @returns {TSMandant}\n     */\n    private getMandant(): TSMandant {\n        let mandant = new TSMandant();\n        mandant.name = 'TestMandant';\n        mandant.id = 'e3736eb8-6eef-40ef-9e52-96ab48d8f220';\n        return mandant;\n    }\n\n    /**\n     * Die Traegerschaft wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     */\n    private getTraegerschaftFisch(): TSTraegerschaft {\n        let traegerschaft = new TSTraegerschaft();\n        traegerschaft.name = 'Fisch';\n        traegerschaft.mail = 'fisch@mailinator.com';\n        traegerschaft.id = '11111111-1111-1111-1111-111111111111';\n        return traegerschaft;\n    }\n\n    /**\n     * Die Institution wird direkt gegeben. Diese Daten und die Daten der DB muessen uebereinstimmen\n     */\n    private getInstitutionForelle(): TSInstitution {\n        let institution = new TSInstitution();\n        institution.name = 'Forelle';\n        institution.id = '22222222-1111-1111-1111-111111111111';\n        institution.mail = 'forelle@mailinator.com';\n        institution.traegerschaft = this.traegerschaftFisch;\n        institution.mandant = this.mandant;\n        return institution;\n    }\n\n    public logIn(user: TSUser): void {\n        this.authServiceRS.loginRequest(user).then(() => {\n            AuthenticationUtil.navigateToStartPageForRole(user, this.$state);\n        });\n    }\n}\n"]}]}