{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/models/TSFinanzModel.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSFinanzModel.ts","mtime":1518612532814},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["\"use strict\";\n/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TSFinanzielleSituationContainer_1 = require(\"./TSFinanzielleSituationContainer\");\nvar TSFinanzielleSituation_1 = require(\"./TSFinanzielleSituation\");\nvar TSEinkommensverschlechterungContainer_1 = require(\"./TSEinkommensverschlechterungContainer\");\nvar TSEinkommensverschlechterung_1 = require(\"./TSEinkommensverschlechterung\");\nvar TSEinkommensverschlechterungInfoContainer_1 = require(\"./TSEinkommensverschlechterungInfoContainer\");\nvar TSFinanzModel = /** @class */ (function () {\n    function TSFinanzModel(basisjahr, gesuchsteller2Required, gesuchstellerNumber, basisjahrPlus) {\n        this.basisjahr = basisjahr;\n        this.basisjahrPlus = basisjahrPlus;\n        this.gesuchsteller2Required = gesuchsteller2Required;\n        this.gesuchstellerNumber = gesuchstellerNumber;\n    }\n    Object.defineProperty(TSFinanzModel.prototype, \"gemeinsameSteuererklaerung\", {\n        get: function () {\n            return this._gemeinsameSteuererklaerung;\n        },\n        set: function (value) {\n            this._gemeinsameSteuererklaerung = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"sozialhilfeBezueger\", {\n        get: function () {\n            return this._sozialhilfeBezueger;\n        },\n        set: function (value) {\n            this._sozialhilfeBezueger = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"verguenstigungGewuenscht\", {\n        get: function () {\n            return this._verguenstigungGewuenscht;\n        },\n        set: function (value) {\n            this._verguenstigungGewuenscht = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"finanzielleSituationContainerGS1\", {\n        get: function () {\n            return this._finanzielleSituationContainerGS1;\n        },\n        set: function (value) {\n            this._finanzielleSituationContainerGS1 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"finanzielleSituationContainerGS2\", {\n        get: function () {\n            return this._finanzielleSituationContainerGS2;\n        },\n        set: function (value) {\n            this._finanzielleSituationContainerGS2 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TSFinanzModel.prototype.copyFinSitDataFromGesuch = function (gesuch) {\n        this.gemeinsameSteuererklaerung = this.getCopiedValueOrFalse(gesuch.extractFamiliensituation().gemeinsameSteuererklaerung);\n        this.sozialhilfeBezueger = this.getCopiedValueOrUndefined(gesuch.extractFamiliensituation().sozialhilfeBezueger);\n        this.verguenstigungGewuenscht = this.getCopiedValueOrUndefined(gesuch.extractFamiliensituation().verguenstigungGewuenscht);\n        this.finanzielleSituationContainerGS1 = angular.copy(gesuch.gesuchsteller1.finanzielleSituationContainer);\n        if (gesuch.gesuchsteller2) {\n            this.finanzielleSituationContainerGS2 = angular.copy(gesuch.gesuchsteller2.finanzielleSituationContainer);\n        }\n        this.initFinSit();\n    };\n    TSFinanzModel.prototype.getCopiedValueOrFalse = function (value) {\n        if (value) {\n            return angular.copy(value);\n        }\n        else {\n            return false;\n        }\n    };\n    TSFinanzModel.prototype.getCopiedValueOrUndefined = function (value) {\n        if (value === true || value === false) {\n            return angular.copy(value);\n        }\n        else {\n            return undefined;\n        }\n    };\n    TSFinanzModel.prototype.copyEkvDataFromGesuch = function (gesuch) {\n        if (gesuch.einkommensverschlechterungInfoContainer) {\n            this.einkommensverschlechterungInfoContainer = angular.copy(gesuch.einkommensverschlechterungInfoContainer);\n        }\n        else {\n            this.einkommensverschlechterungInfoContainer = new TSEinkommensverschlechterungInfoContainer_1.default;\n        }\n        //geesuchstelelr1 nullsave?\n        this.einkommensverschlechterungContainerGS1 = angular.copy(gesuch.gesuchsteller1.einkommensverschlechterungContainer);\n        if (gesuch.gesuchsteller2) {\n            this.einkommensverschlechterungContainerGS2 = angular.copy(gesuch.gesuchsteller2.einkommensverschlechterungContainer);\n        }\n    };\n    TSFinanzModel.prototype.initFinSit = function () {\n        if (!this.finanzielleSituationContainerGS1) {\n            this.finanzielleSituationContainerGS1 = new TSFinanzielleSituationContainer_1.default();\n            this.finanzielleSituationContainerGS1.jahr = this.basisjahr;\n            this.finanzielleSituationContainerGS1.finanzielleSituationJA = new TSFinanzielleSituation_1.default();\n        }\n        if (this.gesuchsteller2Required && !this.finanzielleSituationContainerGS2) {\n            this.finanzielleSituationContainerGS2 = new TSFinanzielleSituationContainer_1.default();\n            this.finanzielleSituationContainerGS2.jahr = this.basisjahr;\n            this.finanzielleSituationContainerGS2.finanzielleSituationJA = new TSFinanzielleSituation_1.default();\n        }\n    };\n    TSFinanzModel.prototype.copyFinSitDataToGesuch = function (gesuch) {\n        gesuch.extractFamiliensituation().gemeinsameSteuererklaerung = this.gemeinsameSteuererklaerung;\n        gesuch.extractFamiliensituation().sozialhilfeBezueger = this.sozialhilfeBezueger;\n        gesuch.extractFamiliensituation().verguenstigungGewuenscht = this.verguenstigungGewuenscht;\n        gesuch.gesuchsteller1.finanzielleSituationContainer = this.finanzielleSituationContainerGS1;\n        if (gesuch.gesuchsteller2) {\n            gesuch.gesuchsteller2.finanzielleSituationContainer = this.finanzielleSituationContainerGS2;\n        }\n        else {\n            if (this.finanzielleSituationContainerGS2) {\n                //wenn wir keinen gs2 haben sollten wir auch gar keinen solchen container haben\n                console.log('illegal state: finanzielleSituationContainerGS2 exists but no gs2 is available');\n            }\n        }\n        this.resetSteuerveranlagungErhalten(gesuch);\n        return gesuch;\n    };\n    /**\n     * if gemeinsameSteuererklaerung has been set to true and steuerveranlagungErhalten ist set to true for the GS1\n     * as well, then we need to set steuerveranlagungErhalten to true for the GS2 too, if it exists.\n     */\n    TSFinanzModel.prototype.resetSteuerveranlagungErhalten = function (gesuch) {\n        if (gesuch.extractFamiliensituation().gemeinsameSteuererklaerung === true\n            && gesuch.gesuchsteller1 && gesuch.gesuchsteller2\n            && gesuch.gesuchsteller1.finanzielleSituationContainer.finanzielleSituationJA.steuerveranlagungErhalten === true) {\n            gesuch.gesuchsteller2.finanzielleSituationContainer.finanzielleSituationJA.steuerveranlagungErhalten = true;\n        }\n    };\n    TSFinanzModel.prototype.copyEkvSitDataToGesuch = function (gesuch) {\n        gesuch.einkommensverschlechterungInfoContainer = this.einkommensverschlechterungInfoContainer;\n        gesuch.gesuchsteller1.einkommensverschlechterungContainer = this.einkommensverschlechterungContainerGS1;\n        if (gesuch.gesuchsteller2) {\n            gesuch.gesuchsteller2.einkommensverschlechterungContainer = this.einkommensverschlechterungContainerGS2;\n        }\n        else {\n            if (this.einkommensverschlechterungContainerGS2) {\n                //wenn wir keinen gs2 haben sollten wir auch gar keinen solchen container haben\n                console.log('illegal state: einkommensverschlechterungContainerGS2 exists but no gs2 is available');\n            }\n        }\n        return gesuch;\n    };\n    TSFinanzModel.prototype.getFiSiConToWorkWith = function () {\n        if (this.gesuchstellerNumber === 2) {\n            return this.finanzielleSituationContainerGS2;\n        }\n        else {\n            return this.finanzielleSituationContainerGS1;\n        }\n    };\n    TSFinanzModel.prototype.getEkvContToWorkWith = function () {\n        if (this.gesuchstellerNumber === 2) {\n            return this.einkommensverschlechterungContainerGS2;\n        }\n        else {\n            return this.einkommensverschlechterungContainerGS1;\n        }\n    };\n    TSFinanzModel.prototype.getEkvToWorkWith = function () {\n        if (this.gesuchstellerNumber === 2) {\n            return this.getEkvOfBsj_JA(this.einkommensverschlechterungContainerGS2);\n        }\n        else {\n            return this.getEkvOfBsj_JA(this.einkommensverschlechterungContainerGS1);\n        }\n    };\n    TSFinanzModel.prototype.getEkvOfBsj_JA = function (einkommensverschlechterungContainer) {\n        if (this.basisjahrPlus === 2) {\n            return einkommensverschlechterungContainer.ekvJABasisJahrPlus2;\n        }\n        else {\n            return einkommensverschlechterungContainer.ekvJABasisJahrPlus1;\n        }\n    };\n    TSFinanzModel.prototype.getEkvToWorkWith_GS = function () {\n        if (this.gesuchstellerNumber === 2) {\n            return this.getEkvOfBsj_GS(this.einkommensverschlechterungContainerGS2);\n        }\n        else {\n            return this.getEkvOfBsj_GS(this.einkommensverschlechterungContainerGS1);\n        }\n    };\n    TSFinanzModel.prototype.getEkvOfBsj_GS = function (einkommensverschlechterungContainer) {\n        if (this.basisjahrPlus === 2) {\n            return einkommensverschlechterungContainer.ekvGSBasisJahrPlus2;\n        }\n        else {\n            return einkommensverschlechterungContainer.ekvGSBasisJahrPlus1;\n        }\n    };\n    TSFinanzModel.prototype.getGesuchstellerNumber = function () {\n        return this.gesuchstellerNumber;\n    };\n    TSFinanzModel.prototype.isGesuchsteller2Required = function () {\n        return this.gesuchsteller2Required;\n    };\n    Object.defineProperty(TSFinanzModel.prototype, \"einkommensverschlechterungContainerGS1\", {\n        get: function () {\n            return this._einkommensverschlechterungContainerGS1;\n        },\n        set: function (value) {\n            this._einkommensverschlechterungContainerGS1 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"einkommensverschlechterungContainerGS2\", {\n        get: function () {\n            return this._einkommensverschlechterungContainerGS2;\n        },\n        set: function (value) {\n            this._einkommensverschlechterungContainerGS2 = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TSFinanzModel.prototype, \"einkommensverschlechterungInfoContainer\", {\n        get: function () {\n            return this._einkommensverschlechterungInfoContainer;\n        },\n        set: function (value) {\n            this._einkommensverschlechterungInfoContainer = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TSFinanzModel.prototype.initEinkommensverschlechterungContainer = function (basisjahrPlus, gesuchstellerNumber) {\n        if (gesuchstellerNumber === 1) {\n            if (!this.einkommensverschlechterungContainerGS1) {\n                this.einkommensverschlechterungContainerGS1 = new TSEinkommensverschlechterungContainer_1.default();\n            }\n            if (basisjahrPlus === 1) {\n                if (!this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus1) {\n                    this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus1 = new TSEinkommensverschlechterung_1.default();\n                }\n            }\n            if (basisjahrPlus === 2) {\n                if (!this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2) {\n                    this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2 = new TSEinkommensverschlechterung_1.default();\n                }\n                // Wenn z.B. in der Periode 2016/2017 eine Einkommensverschlechterung für 2017 geltend gemacht wird,\n                // ist es unmöglich, dass die Steuerveranlagung und Steuererklärung für 2017 schon dem Gesuchsteller vorliegt\n                this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2 = false;\n                this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2.steuerveranlagungErhalten = false;\n                this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2.steuererklaerungAusgefuellt = false;\n            }\n        }\n        if (gesuchstellerNumber === 2) {\n            if (!this.einkommensverschlechterungContainerGS2) {\n                this.einkommensverschlechterungContainerGS2 = new TSEinkommensverschlechterungContainer_1.default();\n            }\n            if (basisjahrPlus === 1) {\n                if (!this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus1) {\n                    this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus1 = new TSEinkommensverschlechterung_1.default();\n                }\n            }\n            if (basisjahrPlus === 2) {\n                if (!this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2) {\n                    this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2 = new TSEinkommensverschlechterung_1.default();\n                }\n                // Wenn z.B. in der Periode 2016/2017 eine Einkommensverschlechterung für 2017 geltend gemacht wird,\n                // ist es unmöglich, dass die Steuerveranlagung und Steuererklärung für 2017 schon dem Gesuchsteller vorliegt\n                this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2 = false;\n                this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2.steuerveranlagungErhalten = false;\n                this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2.steuererklaerungAusgefuellt = false;\n            }\n        }\n    };\n    TSFinanzModel.prototype.getGemeinsameSteuererklaerungToWorkWith = function () {\n        if (this.basisjahrPlus === 2) {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2;\n        }\n        else {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP1;\n        }\n    };\n    TSFinanzModel.prototype.getBasisJahrPlus = function () {\n        return this.basisjahrPlus;\n    };\n    /**\n     * Indicates whether FinSit must be filled out or not. It supposes that it is enabled.\n     */\n    TSFinanzModel.prototype.isFinanzielleSituationDesired = function () {\n        return this.verguenstigungGewuenscht && !this.sozialhilfeBezueger;\n    };\n    return TSFinanzModel;\n}());\nexports.default = TSFinanzModel;\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSFinanzModel.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/models/TSFinanzModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TSFinanzielleSituationContainer from './TSFinanzielleSituationContainer';\nimport TSGesuch from './TSGesuch';\nimport TSFinanzielleSituation from './TSFinanzielleSituation';\nimport TSEinkommensverschlechterungContainer from './TSEinkommensverschlechterungContainer';\nimport TSEinkommensverschlechterung from './TSEinkommensverschlechterung';\nimport TSEinkommensverschlechterungInfoContainer from './TSEinkommensverschlechterungInfoContainer';\n\nexport default class TSFinanzModel {\n\n    private _gemeinsameSteuererklaerung: boolean;\n    private _sozialhilfeBezueger: boolean;\n    private _verguenstigungGewuenscht: boolean;\n    private _finanzielleSituationContainerGS1: TSFinanzielleSituationContainer;\n    private _finanzielleSituationContainerGS2: TSFinanzielleSituationContainer;\n    private _einkommensverschlechterungContainerGS1: TSEinkommensverschlechterungContainer;\n    private _einkommensverschlechterungContainerGS2: TSEinkommensverschlechterungContainer;\n    private _einkommensverschlechterungInfoContainer: TSEinkommensverschlechterungInfoContainer;\n\n    private basisjahr: number;\n    private basisjahrPlus: number;\n    private gesuchsteller2Required: boolean;\n    private gesuchstellerNumber: number;\n\n    constructor(basisjahr: number, gesuchsteller2Required: boolean, gesuchstellerNumber: number, basisjahrPlus?: number) {\n        this.basisjahr = basisjahr;\n        this.basisjahrPlus = basisjahrPlus;\n        this.gesuchsteller2Required = gesuchsteller2Required;\n        this.gesuchstellerNumber = gesuchstellerNumber;\n    }\n\n    get gemeinsameSteuererklaerung(): boolean {\n        return this._gemeinsameSteuererklaerung;\n    }\n\n    set gemeinsameSteuererklaerung(value: boolean) {\n        this._gemeinsameSteuererklaerung = value;\n    }\n\n    public get sozialhilfeBezueger(): boolean {\n        return this._sozialhilfeBezueger;\n    }\n\n    public set sozialhilfeBezueger(value: boolean) {\n        this._sozialhilfeBezueger = value;\n    }\n\n    public get verguenstigungGewuenscht(): boolean {\n        return this._verguenstigungGewuenscht;\n    }\n\n    public set verguenstigungGewuenscht(value: boolean) {\n        this._verguenstigungGewuenscht = value;\n    }\n\n    get finanzielleSituationContainerGS1(): TSFinanzielleSituationContainer {\n        return this._finanzielleSituationContainerGS1;\n    }\n\n    set finanzielleSituationContainerGS1(value: TSFinanzielleSituationContainer) {\n        this._finanzielleSituationContainerGS1 = value;\n    }\n\n    get finanzielleSituationContainerGS2(): TSFinanzielleSituationContainer {\n        return this._finanzielleSituationContainerGS2;\n    }\n\n    set finanzielleSituationContainerGS2(value: TSFinanzielleSituationContainer) {\n        this._finanzielleSituationContainerGS2 = value;\n    }\n\n    public copyFinSitDataFromGesuch(gesuch: TSGesuch) {\n\n        this.gemeinsameSteuererklaerung = this.getCopiedValueOrFalse(gesuch.extractFamiliensituation().gemeinsameSteuererklaerung);\n        this.sozialhilfeBezueger = this.getCopiedValueOrUndefined(gesuch.extractFamiliensituation().sozialhilfeBezueger);\n        this.verguenstigungGewuenscht = this.getCopiedValueOrUndefined(gesuch.extractFamiliensituation().verguenstigungGewuenscht);\n        this.finanzielleSituationContainerGS1 = angular.copy(gesuch.gesuchsteller1.finanzielleSituationContainer);\n        if (gesuch.gesuchsteller2) {\n            this.finanzielleSituationContainerGS2 = angular.copy(gesuch.gesuchsteller2.finanzielleSituationContainer);\n        }\n        this.initFinSit();\n    }\n\n    private getCopiedValueOrFalse(value: boolean): boolean {\n        if (value) {\n            return angular.copy(value);\n        } else {\n            return false;\n        }\n    }\n\n    private getCopiedValueOrUndefined(value: boolean): boolean {\n        if (value === true || value === false) {\n            return angular.copy(value);\n        } else {\n            return undefined;\n        }\n    }\n\n    copyEkvDataFromGesuch(gesuch: TSGesuch) {\n        if (gesuch.einkommensverschlechterungInfoContainer) {\n            this.einkommensverschlechterungInfoContainer = angular.copy(gesuch.einkommensverschlechterungInfoContainer);\n        } else {\n            this.einkommensverschlechterungInfoContainer = new TSEinkommensverschlechterungInfoContainer;\n        }\n        //geesuchstelelr1 nullsave?\n        this.einkommensverschlechterungContainerGS1 = angular.copy(gesuch.gesuchsteller1.einkommensverschlechterungContainer);\n        if (gesuch.gesuchsteller2) {\n            this.einkommensverschlechterungContainerGS2 = angular.copy(gesuch.gesuchsteller2.einkommensverschlechterungContainer);\n        }\n\n    }\n\n    public initFinSit() {\n        if (!this.finanzielleSituationContainerGS1) {\n            this.finanzielleSituationContainerGS1 = new TSFinanzielleSituationContainer();\n            this.finanzielleSituationContainerGS1.jahr = this.basisjahr;\n            this.finanzielleSituationContainerGS1.finanzielleSituationJA = new TSFinanzielleSituation();\n        }\n\n        if (this.gesuchsteller2Required && !this.finanzielleSituationContainerGS2) {\n            this.finanzielleSituationContainerGS2 = new TSFinanzielleSituationContainer();\n            this.finanzielleSituationContainerGS2.jahr = this.basisjahr;\n            this.finanzielleSituationContainerGS2.finanzielleSituationJA = new TSFinanzielleSituation();\n        }\n    }\n\n    copyFinSitDataToGesuch(gesuch: TSGesuch): TSGesuch {\n        gesuch.extractFamiliensituation().gemeinsameSteuererklaerung = this.gemeinsameSteuererklaerung;\n        gesuch.extractFamiliensituation().sozialhilfeBezueger = this.sozialhilfeBezueger;\n        gesuch.extractFamiliensituation().verguenstigungGewuenscht = this.verguenstigungGewuenscht;\n        gesuch.gesuchsteller1.finanzielleSituationContainer = this.finanzielleSituationContainerGS1;\n        if (gesuch.gesuchsteller2) {\n            gesuch.gesuchsteller2.finanzielleSituationContainer = this.finanzielleSituationContainerGS2;\n        } else {\n            if (this.finanzielleSituationContainerGS2) {\n                //wenn wir keinen gs2 haben sollten wir auch gar keinen solchen container haben\n                console.log('illegal state: finanzielleSituationContainerGS2 exists but no gs2 is available');\n            }\n        }\n        this.resetSteuerveranlagungErhalten(gesuch);\n        return gesuch;\n    }\n\n    /**\n     * if gemeinsameSteuererklaerung has been set to true and steuerveranlagungErhalten ist set to true for the GS1\n     * as well, then we need to set steuerveranlagungErhalten to true for the GS2 too, if it exists.\n     */\n    private resetSteuerveranlagungErhalten(gesuch: TSGesuch) {\n        if (gesuch.extractFamiliensituation().gemeinsameSteuererklaerung === true\n            && gesuch.gesuchsteller1 && gesuch.gesuchsteller2\n            && gesuch.gesuchsteller1.finanzielleSituationContainer.finanzielleSituationJA.steuerveranlagungErhalten === true) {\n\n            gesuch.gesuchsteller2.finanzielleSituationContainer.finanzielleSituationJA.steuerveranlagungErhalten = true;\n        }\n    }\n\n    copyEkvSitDataToGesuch(gesuch: TSGesuch): TSGesuch {\n        gesuch.einkommensverschlechterungInfoContainer = this.einkommensverschlechterungInfoContainer;\n        gesuch.gesuchsteller1.einkommensverschlechterungContainer = this.einkommensverschlechterungContainerGS1;\n        if (gesuch.gesuchsteller2) {\n            gesuch.gesuchsteller2.einkommensverschlechterungContainer = this.einkommensverschlechterungContainerGS2;\n        } else {\n            if (this.einkommensverschlechterungContainerGS2) {\n                //wenn wir keinen gs2 haben sollten wir auch gar keinen solchen container haben\n                console.log('illegal state: einkommensverschlechterungContainerGS2 exists but no gs2 is available');\n            }\n        }\n        return gesuch;\n    }\n\n    public getFiSiConToWorkWith(): TSFinanzielleSituationContainer {\n        if (this.gesuchstellerNumber === 2) {\n            return this.finanzielleSituationContainerGS2;\n        } else {\n            return this.finanzielleSituationContainerGS1;\n        }\n    }\n\n    public getEkvContToWorkWith(): TSEinkommensverschlechterungContainer {\n        if (this.gesuchstellerNumber === 2) {\n            return this.einkommensverschlechterungContainerGS2;\n        } else {\n            return this.einkommensverschlechterungContainerGS1;\n        }\n    }\n\n    public getEkvToWorkWith(): TSEinkommensverschlechterung {\n        if (this.gesuchstellerNumber === 2) {\n            return this.getEkvOfBsj_JA(this.einkommensverschlechterungContainerGS2);\n        } else {\n            return this.getEkvOfBsj_JA(this.einkommensverschlechterungContainerGS1);\n        }\n    }\n\n    private getEkvOfBsj_JA(einkommensverschlechterungContainer: TSEinkommensverschlechterungContainer): TSEinkommensverschlechterung {\n        if (this.basisjahrPlus === 2) {\n            return einkommensverschlechterungContainer.ekvJABasisJahrPlus2;\n        } else {\n            return einkommensverschlechterungContainer.ekvJABasisJahrPlus1;\n        }\n    }\n\n    public getEkvToWorkWith_GS(): TSEinkommensverschlechterung {\n        if (this.gesuchstellerNumber === 2) {\n            return this.getEkvOfBsj_GS(this.einkommensverschlechterungContainerGS2);\n        } else {\n            return this.getEkvOfBsj_GS(this.einkommensverschlechterungContainerGS1);\n        }\n    }\n\n    private getEkvOfBsj_GS(einkommensverschlechterungContainer: TSEinkommensverschlechterungContainer): TSEinkommensverschlechterung {\n        if (this.basisjahrPlus === 2) {\n            return einkommensverschlechterungContainer.ekvGSBasisJahrPlus2;\n        } else {\n            return einkommensverschlechterungContainer.ekvGSBasisJahrPlus1;\n        }\n    }\n\n    public getGesuchstellerNumber(): number {\n        return this.gesuchstellerNumber;\n    }\n\n    public isGesuchsteller2Required(): boolean {\n        return this.gesuchsteller2Required;\n    }\n\n    get einkommensverschlechterungContainerGS1(): TSEinkommensverschlechterungContainer {\n        return this._einkommensverschlechterungContainerGS1;\n    }\n\n    set einkommensverschlechterungContainerGS1(value: TSEinkommensverschlechterungContainer) {\n        this._einkommensverschlechterungContainerGS1 = value;\n    }\n\n    get einkommensverschlechterungContainerGS2(): TSEinkommensverschlechterungContainer {\n        return this._einkommensverschlechterungContainerGS2;\n    }\n\n    set einkommensverschlechterungContainerGS2(value: TSEinkommensverschlechterungContainer) {\n        this._einkommensverschlechterungContainerGS2 = value;\n    }\n\n    get einkommensverschlechterungInfoContainer(): TSEinkommensverschlechterungInfoContainer {\n        return this._einkommensverschlechterungInfoContainer;\n    }\n\n    set einkommensverschlechterungInfoContainer(value: TSEinkommensverschlechterungInfoContainer) {\n        this._einkommensverschlechterungInfoContainer = value;\n    }\n\n    public initEinkommensverschlechterungContainer(basisjahrPlus: number, gesuchstellerNumber: number): void {\n\n        if (gesuchstellerNumber === 1) {\n            if (!this.einkommensverschlechterungContainerGS1) {\n                this.einkommensverschlechterungContainerGS1 = new TSEinkommensverschlechterungContainer();\n            }\n\n            if (basisjahrPlus === 1) {\n                if (!this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus1) {\n                    this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus1 = new TSEinkommensverschlechterung();\n                }\n            }\n\n            if (basisjahrPlus === 2) {\n                if (!this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2) {\n                    this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2 = new TSEinkommensverschlechterung();\n                }\n                // Wenn z.B. in der Periode 2016/2017 eine Einkommensverschlechterung für 2017 geltend gemacht wird,\n                // ist es unmöglich, dass die Steuerveranlagung und Steuererklärung für 2017 schon dem Gesuchsteller vorliegt\n                this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2 = false;\n                this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2.steuerveranlagungErhalten = false;\n                this.einkommensverschlechterungContainerGS1.ekvJABasisJahrPlus2.steuererklaerungAusgefuellt = false;\n            }\n        }\n\n        if (gesuchstellerNumber === 2) {\n            if (!this.einkommensverschlechterungContainerGS2) {\n                this.einkommensverschlechterungContainerGS2 = new TSEinkommensverschlechterungContainer();\n            }\n\n            if (basisjahrPlus === 1) {\n                if (!this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus1) {\n                    this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus1 = new TSEinkommensverschlechterung();\n                }\n            }\n\n            if (basisjahrPlus === 2) {\n                if (!this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2) {\n                    this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2 = new TSEinkommensverschlechterung();\n                }\n                // Wenn z.B. in der Periode 2016/2017 eine Einkommensverschlechterung für 2017 geltend gemacht wird,\n                // ist es unmöglich, dass die Steuerveranlagung und Steuererklärung für 2017 schon dem Gesuchsteller vorliegt\n                this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2 = false;\n                this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2.steuerveranlagungErhalten = false;\n                this.einkommensverschlechterungContainerGS2.ekvJABasisJahrPlus2.steuererklaerungAusgefuellt = false;\n            }\n        }\n    }\n\n    public getGemeinsameSteuererklaerungToWorkWith(): boolean {\n        if (this.basisjahrPlus === 2) {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP2;\n        } else {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA.gemeinsameSteuererklaerung_BjP1;\n        }\n    }\n\n    getBasisJahrPlus() {\n        return this.basisjahrPlus;\n    }\n\n    /**\n     * Indicates whether FinSit must be filled out or not. It supposes that it is enabled.\n     */\n    public isFinanzielleSituationDesired(): boolean {\n        return this.verguenstigungGewuenscht && !this.sozialhilfeBezueger;\n    }\n}\n"]}]}