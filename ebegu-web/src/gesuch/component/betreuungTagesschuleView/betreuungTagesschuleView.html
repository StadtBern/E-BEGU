<!DOCTYPE html>
<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="betreuungFerieninselView">

    <fieldset ng-disabled="!vm.getBetreuungModel().isEnabled()">

        <div ng-if="vm.gesuchModelManager.gesuch.gesuchsperiode.hasTagesschulenAnmeldung()">

            <!-- Modulauswahl Tagesschule -->
            <div ng-if="vm.gesuchModelManager.gesuch.gesuchsperiode.isTageschulenAnmeldungAktiv()">

                <!-- Tagesschulen -->
                <div class="row">
                    <div class="col-sm-12 dv-input-container-medium form-group">
                        <label class="md-no-float required" data-translate="TAGESSCHULE" for="tagesschule"></label>
                        <div class="dv-select-style">
                            <select aria-describedby="tagesschule-error" name="tagesschule" id="tagesschule"
                                    ng-model="vm.instStammId"
                                    class="form-control"
                                    ng-options="institutionSD.id as institutionSD.institution.name for institutionSD in vm.tagesschuleList() | orderBy: 'institution.name'"
                                    ng-required="true" ng-change="vm.setSelectedInstitutionStammdaten()"
                                    ng-disabled="!vm.isEnabled()">
                            </select>
                            <dv-error-messages input-id="tagesschule" for="vm.form.tagesschule.$error"></dv-error-messages>
                        </div>
                    </div>
                </div>

                <!-- Eintrittsdatum -->
                <div class="row">
                    <div class="col-sm-12 dv-input-container-small form-group">
                        <label class="md-no-float required" data-translate="EINTRITTSDATUM" for="eintrittsdatum_ID"></label>
                        <dv-datepicker input-id="eintrittsdatum_ID" name="eintrittsdatum"
                                       ng-model="vm.getBetreuungModel().belegungTagesschule.eintrittsdatum"
                                       ng-required="true"
                                       class="input-element">
                        </dv-datepicker>
                        <dv-error-messages input-id="eintrittsdatum" for="vm.form.eintrittsdatum.$error"></dv-error-messages>
                    </div>
                </div>

                <table>
                    <tr>
                        <td></td>
                        <td ng-repeat="weekDay in vm.getWeekDays()">
                            <span ng-bind="weekDay | translate"></span>
                        </td>
                    </tr>
                    <!--todo eingentlich muss eine Tagesschule unbedingt Module haben-->
                    <tr ng-repeat="modulName in vm.getModulTagesschuleNameList()">
                        <td ng-bind="modulName | translate"></td>
                        <td ng-repeat="weekDay in vm.getWeekDays()">
                            <div class=" checkbox">
                                <md-checkbox ng-model="vm.getModel().diplomatenstatus" name="diplomatenstatus"
                                             aria-label="{{'GESUCHSTELLER_DIPLOMATENSTATUS'|translate}}">
                                </md-checkbox>
                            </div>
                        </td>
                    </tr>
                </table>

            </div>

            <!-- Hinweis, dass Tageschulanmeldung ncoh nicht freigeschaltet -->
            <div ng-if="!vm.gesuchModelManager.gesuch.gesuchsperiode.isTageschulenAnmeldungAktiv()">
                <div class="well well-status-warten">
                    <i class="fa fa-exclamation " aria-hidden="true"></i>
                    <span>{{vm.getTagesschuleAnmeldungNotYetReadyText()}}</span>
                </div>
            </div>

        </div>

    </fieldset>

</div>

