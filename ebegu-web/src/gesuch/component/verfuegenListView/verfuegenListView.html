<div class="verfuegenListView gesuchModul">
    <div class="row">
        <div class="col-md-12">
            <h1 data-translate="VERFUEGUNGEN_UPPER"></h1>
            <hr class="header"/>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12 table-responsive">

                <table st-table="displayedCollection" st-safe-src="vm.getKinderWithBetreuungList()"
                       class="table table-hover" st-delay="20">
                    <thead>
                    <tr>
                        <th data-translate="KIND_UPPER"></th>
                        <th data-translate="BETREUUNG_UPPER"></th>
                        <th data-translate="ID_UPPER"></th>
                        <th data-translate="STATUS_UPPER"></th>
                    </tr>
                    </thead>
                    <tbody ng-repeat="kindContainer in displayedCollection">
                    <tr ng-repeat="betreuung in kindContainer.betreuungen" st-select-row="betreuung"
                        st-select-mode="single"
                        ng-class="{'disabled-row': !vm.kannVerfuegungOeffnen(betreuung)}"
                        ng-click="vm.openVerfuegung(kindContainer, betreuung)">
                        <td ng-bind="kindContainer.kindJA.getFullName()"></td>
                        <td ng-bind="betreuung.institutionStammdaten.institution.name"></td>
                        <td ng-bind="vm.ebeguUtil.calculateBetreuungsId(vm.getGesuchsperiode(), vm.getFall(), kindContainer.kindNummer, betreuung.betreuungNummer)"></td>
                        <td class="betreuung-status ng-class:betreuung.betreuungsstatus;"
                            ng-bind="betreuung.betreuungsstatus | translate"></td>
                    </tr>
                    </tbody>
                    <tbody ng-if="vm.getKinderWithBetreuungList().length === 0">
                    <tr>
                        <td colspan="4" class="empty-table" data-translate="VERFUEGUNGEN_NOCH_KEINE"></td>
                    </tr>
                    </tbody>
                </table>

                </div>
            </div>


            <!--FinanzielleSituationPDF anzeigen-->
            <div class="row text-left" dv-show-element
                 dv-show-allowed-roles="vm.TSRoleUtil.getAllRolesButTraegerschaftInstitution()">
                <div class="col-md-12">
                    <i class="fa fa-file-text-o"></i>
                    <button type="button" class=" btn-link"
                            ng-click="vm.openFinanzielleSituationPDF()">
                        <span data-translate="PDF_FINSITUATION_ANZEIGEN"></span>
                    </button>
                </div>
            </div>
            <!--Begleitschreiben anzeigen-->
            <div class="row text-left">
                <div class="col-md-12">
                    <i class="fa fa-file-text-o"></i>
                    <button type="button" class=" btn-link"
                            ng-click="vm.openBegleitschreibenPDF()">
                        <span data-translate="PDF_BEGLEITSCHREIBEN_ANZEIGEN"></span>
                    </button>
                </div>
            </div>

            <br>

        <div class="row" dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAllRolesButTraegerschaftInstitution()">
            <div class="col-md-12 text-center row">
                <span class="col-md-4" ng-show="vm.showGeprueft()">
                    <dv-loading-button type="button" button-click="vm.setGesuchStatusGeprueft()"
                                       button-class="dv-btn-sm color-success" aria-label="{{GEPRUEFT_UPPER | translate}}">
                        <span data-translate="GEPRUEFT_UPPER"></span>
                    </dv-loading-button>
                </span>
                <span class="col-md-4" ng-show="vm.showVerfuegenStarten()">
                    <dv-loading-button button-click="vm.setGesuchStatusVerfuegen()"
                                       button-class="dv-btn-sm color-success"
                                       aria-label="{{VERFUEGUNG_STARTEN_UPPER | translate}}">
                        <span data-translate="VERFUEGUNG_STARTEN_UPPER"></span>
                    </dv-loading-button>
                </span>
                <span class="col-md-4" ng-show="vm.showGeprueft()">
                    <dv-loading-button button-class="dv-btn-sm"
                                       aria-label="{{ERSTE_MAHNUNG_UPPER | translate}}">
                        <span data-translate="ERSTE_MAHNUNG_UPPER"></span>
                    </dv-loading-button>
                </span>
                <span class="col-md-4" ng-show="vm.showGeprueft()">
                    <dv-loading-button button-class="dv-btn-sm"
                                       aria-label="{{ZURUECK_GESUCHSTELLER_UPPER | translate}}">
                        <span data-translate="ZURUECK_GESUCHSTELLER_UPPER"></span>
                    </dv-loading-button>
                </span>
            </div>
        </div>
    </div>
    </div>
    <div class="row marginTop20">
        <div class="col-md-12"><!--Buttons-->
            <dv-navigation dv-previous="true" dv-next="false" dv-sub-step="1">
            </dv-navigation>
        </div>
    </div>
</div>
