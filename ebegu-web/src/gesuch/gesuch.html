<gesuch-toolbar flex="nogrow" class="fixedToolba" gesuchid="{{vm.getGesuchId()}}"
                on-verantwortlicher-change="vm.setVerantwortlicher(user)"
                dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAllRolesButGesuchsteller()">
</gesuch-toolbar>

<gesuch-toolbar-gesuchsteller flex="nogrow" class="gesuch-toolbar-gesuchsteller" gesuchid="{{vm.getGesuchId()}}"
                              dv-show-element dv-show-allowed-roles="['GESUCHSTELLER']">
</gesuch-toolbar-gesuchsteller>

<div layout="row" flex="auto" class="overflow-auto">

    <div id="sidenavContainer">
        <div class="sidenav gesuch-status" ng-cloak>
            <span class="status" ng-bind="vm.getGesuchStatusTranslation()"></span>
            <br>
            <span class="zuletzt" data-translate="ZULETZT_BEARBEITER"
                  data-translate-value-username="{{vm.getUserFullname()}}"></span>
        </div>

        <ul class="sidenav gesuchMenu">

            <li ng-if="vm.isStepVisible('GESUCH_ERSTELLEN')"
                ui-sref-active="active" class="row"
                ng-class="{'active-element': vm.isElementActive('GESUCH_ERSTELLEN')}">

                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.fallcreation({createNew: false, gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('GESUCH_ERSTELLEN')">
                    <span ng-bind="vm.getGesuchErstellenStepTitle()"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('GESUCH_ERSTELLEN')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('FAMILIENSITUATION')"
                class="row" ng-class="{'active-element': vm.isElementActive('FAMILIENSITUATION')}"
                ui-sref-active="active" ng-disabled="vm.isWizardStepDisabled('FAMILIENSITUATION')">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.familiensituation({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('FAMILIENSITUATION')">
                    <span data-translate="MENU_FAMSITUATION"></span>
                </button>
                <span class="col-xs-2 fa ng-class:vm.getIcon('FAMILIENSITUATION')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('GESUCHSTELLER')"
                class="row" ng-class="{'active-element': vm.isElementActive('GESUCHSTELLER')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.stammdaten({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('GESUCHSTELLER')">
                    <span data-translate="MENU_GESUCHSTELLER"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('GESUCHSTELLER')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('UMZUG')"
                class="row" ng-class="{'active-element': vm.isElementActive('UMZUG')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.umzug({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('UMZUG')">
                    <span data-translate="MENU_UMZUG"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('UMZUG')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('KINDER')"
                class="row" ng-class="{'active-element': vm.isElementActive('KINDER')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.kinder({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('KINDER')">
                    <span data-translate="MENU_KINDER"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('KINDER')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('BETREUUNG')"
                class="row" ng-class="{'active-element': vm.isElementActive('BETREUUNG')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.betreuungen({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('BETREUUNG')">
                    <span data-translate="MENU_BETREUUNG"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('BETREUUNG')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('ABWESENHEIT') && !vm.gesuchModelManager.isErstgesuch()"
                class="row"
                ng-class="{'active-element': vm.isElementActive('ABWESENHEIT')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link" ui-sref="gesuch.abwesenheit({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('ABWESENHEIT')">
                    <span data-translate="MENU_ABWESENHEIT"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('ABWESENHEIT')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('ERWERBSPENSUM')"
                class="row" ng-class="{'active-element': vm.isElementActive('ERWERBSPENSUM')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.erwerbsPensen({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('ERWERBSPENSUM')">
                    <span data-translate="MENU_ERWERBSPENSUM"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('ERWERBSPENSUM')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('FINANZIELLE_SITUATION') && vm.showFinanzsituationStart()"
                class="row" ng-class="{'active-element': vm.isElementActive('FINANZIELLE_SITUATION')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.finanzielleSituationStart({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('FINANZIELLE_SITUATION')">
                    <span data-translate="MENU_FINANZIELLE_SITUATION"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('FINANZIELLE_SITUATION')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('FINANZIELLE_SITUATION') && !vm.showFinanzsituationStart()"
                class="row" ng-class="{'active-element': vm.isElementActive('FINANZIELLE_SITUATION')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.finanzielleSituation({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('FINANZIELLE_SITUATION')">
                    <span data-translate="MENU_FINANZIELLE_SITUATION"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('FINANZIELLE_SITUATION')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('EINKOMMENSVERSCHLECHTERUNG')"
                class="row" ng-class="{'active-element': vm.isElementActive('EINKOMMENSVERSCHLECHTERUNG')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.einkommensverschlechterungInfo({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('EINKOMMENSVERSCHLECHTERUNG')">
                    <span data-translate="MENU_EINKOMMENSVERSCHLECHTERUNG"></span>
                </button>
                <span class="col-xs-2 fa  ng-class:vm.getIcon('EINKOMMENSVERSCHLECHTERUNG')"
                      aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('DOKUMENTE')"
                class="row" ng-class="{'active-element': vm.isElementActive('DOKUMENTE')}" ui-sref-active="active">
                <button type="button" class="col-xs-10  btn-link"
                        ui-sref="gesuch.dokumente({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('DOKUMENTE')">
                    <span data-translate="MENU_DOKUMENTE"></span>
                </button>
                <span class="col-xs-2 fa ng-class:vm.getIcon('DOKUMENTE')" aria-hidden="true"></span>
            </li>

            <li ng-if="vm.isStepVisible('FREIGABEQUITTUNG')"
                class="row">
                <button type="button" class="col-xs-10  btn-link"
                        ng-disabled="true">
                    <span data-translate="MENU_FREIGABEQUITTUNG"></span>
                </button>
            </li>

            <li ng-if="vm.isStepVisible('VERFUEGEN')"
                class="row" ng-class="{'active-element': vm.isElementActive('VERFUEGEN')}" ui-sref-active="active">
                <button type="button" class="col-xs-10 col-md-10  btn-link"
                        ui-sref="gesuch.verfuegen({gesuchId: vm.getGesuchId()})"
                        ng-disabled="vm.isWizardStepDisabled('VERFUEGEN')">
                    <span data-translate="MENU_VERFUEGEN"></span>
                </button>
                <span class="col-xs-2 fa  col-md-2 ng-class:vm.getIcon('VERFUEGEN')" aria-hidden="true"></span>
            </li>

        </ul>

    </div>

    <div id="gesuchContainer">
            <!--linke Seite zum ausfÃ¼llen des Formulars-->
        <div ui-view="gesuchViewPort" autoscroll="true">
            </div>
    </div>
    <div id="kommentarContainer"
         dv-show-element
         dv-show-allowed-roles="[vm.TSRole.SACHBEARBEITER_JA, vm.TSRole.STEUERAMT ,vm.TSRole.SCHULAMT]" layout="column"
         layout-align="stretch center">
        <div ui-view="kommentarViewPort" flex="100"></div>
    </div>
</div>
